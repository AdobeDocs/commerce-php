{"version":3,"file":"component---src-pages-tutorials-backend-create-api-integration-md-09557d55725a212c1848.js","mappings":"oRAQaA,EAAe,CAAC,EAOvBC,GALgBC,EAKY,cALJ,SAA6BC,GAEzD,OADAC,QAAQC,KAAK,aAAeH,EAAO,4EAC5B,eAASC,EACjB,GAHqBD,MAMtB,MAAMI,EAAc,CAClBN,gBAEIO,EAAYC,EAAAA,EACH,SAASC,EAAT,GAGZ,IAHgC,WACjCC,GAEC,EADEP,GACF,YACD,OAAO,SAACI,GAAD,UAAeD,EAAiBH,EAAhC,CAAuCO,WAAYA,EAAYC,QAAQ,eAG5E,eACE,GAAM,8CACH,+CACL,kBAAK,oFAAkF,cAAGC,WAAW,IACjG,KAAQ,uDACL,cAAkB,+CACzB,kBAAK,iMAEL,kBAAK,gJAA8I,uBAAYA,WAAW,KAAM,QAAqB,yCACrM,SAACX,EAAD,CAAaY,QAAQ,OAAOC,MAAM,OAAOH,QAAQ,iBACjD,kBAAK,6DAA2D,cAAGC,WAAW,IAC1E,KAAQ,kFACL,cAAkB,gDACzB,eACE,GAAM,mBACH,oBACL,uBACE,kBAAOA,WAAW,UAChB,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,MACN,WACL,eAAIA,WAAW,KACb,MAAS,MACN,gBACL,eAAIA,WAAW,KACb,MAAS,MACN,WAGT,kBAAOA,WAAW,UAChB,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAO,YACjC,eAAIA,WAAW,KACb,MAAS,MACN,wBAAsB,uBAAYA,WAAW,MAAO,OAAoB,MAAI,uBAAYA,WAAW,MAAO,QAAqB,MAAI,uBAAYA,WAAW,MAAO,OAAoB,MAAI,uBAAYA,WAAW,MAAO,YAC5N,eAAIA,WAAW,KACb,MAAS,MACN,YAEP,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAO,SACjC,eAAIA,WAAW,KACb,MAAS,MACN,6CACL,eAAIA,WAAW,KACb,MAAS,MACN,YAEP,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAO,YACjC,eAAIA,WAAW,KACb,MAAS,MACN,4DACL,eAAIA,WAAW,KACb,MAAS,MACN,aAIX,eACE,GAAM,mCACH,oCACL,kBAAK,8CAA4C,cAAGA,WAAW,IAC3D,KAAQ,2BACL,cAAkB,wDAAsD,uBAAYA,WAAW,KAAM,oBAAiC,iBAC7I,qBAAK,iBAAMA,WAAW,MAClB,UAAa,gBACV,0kFAsGP,eACE,GAAM,UACH,WACL,kBAAK,iEAA+D,uBAAYA,WAAW,KAAM,oBAAiC,iBAClI,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBACV,+8CAiCV,CAEDH,EAAWM,gBAAiB,C","sources":["webpack://commerce-php/./src/pages/tutorials/backend/create-api-integration.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/commerce-php/commerce-php/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"create-an-integration-with-an-external-api\"\n    }}>{`Create an integration with an external API`}</h1>\n    <p>{`This tutorial shows you how to create an integration with an external API using `}<a parentName=\"p\" {...{\n        \"href\": \"http://docs.guzzlephp.org/en/stable/quickstart.html\"\n      }}>{`GuzzleHttp`}</a>{` library, that is included in the package.`}</p>\n    <p>{`Guzzle is a PHP HTTP client that makes it easy to create some integrations with some web services.\nIts implementation code is more simpler, cleaner and readable, in comparision with cURL.`}</p>\n    <p>{`GuzzleHttp uses cURL by default, but it can use any HTTP client that you want other than cURL like PHP's stream wrapper or sockets, in case `}<inlineCode parentName=\"p\">{`curl`}</inlineCode>{` isn't installed on your Web Server.`}</p>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`It's much easier to cover a GuzzleHttp implementation by `}<a parentName=\"p\" {...{\n        \"href\": \"https://developer.adobe.com/commerce/testing/guide/unit/writing-testable-code/\"\n      }}>{`Unit Tests`}</a>{`, as you're able to mock the HTTP requests.`}</p>\n    <h2 {...{\n      \"id\": \"request-options\"\n    }}>{`Request options`}</h2>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Option`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Type`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`method`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`HTTP method, any of `}<inlineCode parentName=\"td\">{`GET`}</inlineCode>{`, `}<inlineCode parentName=\"td\">{`POST`}</inlineCode>{`, `}<inlineCode parentName=\"td\">{`PUT`}</inlineCode>{`, `}<inlineCode parentName=\"td\">{`DELETE`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`String`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`uri`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The API endpoint that needs to be called`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`String`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`params`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`A list of parameters that needs to be passed to the API`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Array`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <h2 {...{\n      \"id\": \"create-a-github-api-integration\"\n    }}>{`Create a GitHub API integration`}</h2>\n    <p>{`In the following example, we're using the `}<a parentName=\"p\" {...{\n        \"href\": \"https://api.github.com/\"\n      }}>{`Github API`}</a>{` as a web service and will fetch some data from the `}<inlineCode parentName=\"p\">{`magento/magento2`}</inlineCode>{` repository.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`<?php\n\ndeclare(strict_types=1);\n\nnamespace Vendor\\\\Module\\\\Service;\n\nuse GuzzleHttp\\\\Client;\nuse GuzzleHttp\\\\ClientFactory;\nuse GuzzleHttp\\\\Exception\\\\GuzzleException;\nuse GuzzleHttp\\\\Psr7\\\\Response;\nuse GuzzleHttp\\\\Psr7\\\\ResponseFactory;\nuse Magento\\\\Framework\\\\Webapi\\\\Rest\\\\Request;\n\n/**\n * Class GitApiService\n */\nclass GitApiService\n{\n    /**\n     * API request URL\n     */\n    const API_REQUEST_URI = 'https://api.github.com/';\n\n    /**\n     * API request endpoint\n     */\n    const API_REQUEST_ENDPOINT = 'repos/';\n\n    /**\n     * @var ResponseFactory\n     */\n    private $responseFactory;\n\n    /**\n     * @var ClientFactory\n     */\n    private $clientFactory;\n\n    /**\n     * GitApiService constructor\n     *\n     * @param ClientFactory $clientFactory\n     * @param ResponseFactory $responseFactory\n     */\n    public function __construct(\n        ClientFactory $clientFactory,\n        ResponseFactory $responseFactory\n    ) {\n        $this->clientFactory = $clientFactory;\n        $this->responseFactory = $responseFactory;\n    }\n\n    /**\n     * Fetch some data from API\n     */\n    public function execute(): void\n    {\n        $repositoryName = 'magento/magento2';\n        $response = $this->doRequest(static::API_REQUEST_ENDPOINT . $repositoryName);\n        $status = $response->getStatusCode(); // 200 status code\n        $responseBody = $response->getBody();\n        $responseContent = $responseBody->getContents(); // here you will have the API response in JSON format\n        // Add your logic using $responseContent\n    }\n\n    /**\n     * Do API request with provided params\n     *\n     * @param string $uriEndpoint\n     * @param array $params\n     * @param string $requestMethod\n     *\n     * @return Response\n     */\n    private function doRequest(\n        string $uriEndpoint,\n        array $params = [],\n        string $requestMethod = Request::HTTP_METHOD_GET\n    ): Response {\n        /** @var Client $client */\n        $client = $this->clientFactory->create(['config' => [\n            'base_uri' => self::API_REQUEST_URI\n        ]]);\n\n        try {\n            $response = $client->request(\n                $requestMethod,\n                $uriEndpoint,\n                $params\n            );\n        } catch (GuzzleException $exception) {\n            /** @var Response $response */\n            $response = $this->responseFactory->create([\n                'status' => $exception->getCode(),\n                'reason' => $exception->getMessage()\n            ]);\n        }\n\n        return $response;\n    }\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"result\"\n    }}>{`Result`}</h2>\n    <p>{`As a result, you get all the available information about the `}<inlineCode parentName=\"p\">{`magento/magento2`}</inlineCode>{` repository.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  ...\n  \"name\": \"magento2\",\n  \"full_name\": \"magento/magento2\",\n  \"private\": false,\n  \"html_url\": \"https://github.com/magento/magento2\",\n  \"description\": \"All Submissions you make to Magento Inc. (\\\\\"Magento\\\\\") through GitHub are subject to the following terms and conditions: (1) You grant Magento a perpetual, worldwide, non-exclusive, no charge, royalty free, irrevocable license under your applicable copyrights and patents to reproduce, prepare derivative works of, display, publically perform, sublicense and distribute any feedback, ideas, code, or other information (\"Submission\\\\\") you submit through GitHub. (2) Your Submission is an original work of authorship and you are the owner or are legally entitled to grant the license stated above. (3) You agree to the Contributor License Agreement found here:  https://github.com/magento/magento2/blob/master/CONTRIBUTOR_LICENSE_AGREEMENT.html\",\n  \"fork\": false,\n  \"url\": \"https://api.github.com/repos/magento/magento2\",\n  \"homepage\": \"http://www.magento.com\",\n  \"size\": 559209,\n  \"stargazers_count\": 8379,\n  \"watchers_count\": 8379,\n  \"language\": \"PHP\",\n  \"has_issues\": true,\n  \"has_projects\": false,\n  \"has_downloads\": true,\n  \"has_wiki\": true,\n  \"has_pages\": false,\n  \"forks_count\": 7405,\n  \"archived\": false,\n  \"disabled\": false,\n  \"open_issues_count\": 1535,\n  \"forks\": 7405,\n  \"open_issues\": 1535,\n  \"watchers\": 8379,\n  \"default_branch\": \"2.4-develop\",\n  \"subscribers_count\": 1421,\n  ...\n}\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","InlineAlert","name","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","variant","slots","isMDXComponent"],"sourceRoot":""}