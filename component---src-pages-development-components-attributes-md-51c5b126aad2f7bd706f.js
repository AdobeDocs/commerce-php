"use strict";(self.webpackChunkcommerce_php=self.webpackChunkcommerce_php||[]).push([[7811],{86165:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return o},default:function(){return x}});var a,r=n(87462),i=n(63366),d=(n(15007),n(64983)),l=n(91515),m=["components"],o={},s=(a="InlineAlert",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,d.mdx)("div",e)}),u={_frontmatter:o},p=l.Z;function x(e){var t=e.components,n=(0,i.Z)(e,m);return(0,d.mdx)(p,(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,d.mdx)("h1",{id:"eav-and-extension-attributes"},"EAV and extension attributes"),(0,d.mdx)("p",null,"There are two types of attributes you can use to extend Adobe Commerce and Magento Open Source functionality:"),(0,d.mdx)("ul",null,(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("p",{parentName:"li"},"Custom and Entity-Attribute-Value (EAV) attributes—Custom attributes are those added on behalf of a merchant. For example, a merchant might need to add attributes to describe products, such as shape or volume. A merchant can add these attributes in the ",(0,d.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/magento-admin"},"Admin")," panel. See the ",(0,d.mdx)("a",{parentName:"p",href:"https://docs.magento.com/user-guide/stores/attributes.html"},"merchant documentation")," for information about managing custom attributes."),(0,d.mdx)("p",{parentName:"li"},"Custom attributes are a subset of EAV attributes. Objects that use EAV attributes typically store values in several MySQL tables. The ",(0,d.mdx)("inlineCode",{parentName:"p"},"Customer")," and ",(0,d.mdx)("inlineCode",{parentName:"p"},"Catalog")," modules are the primary models that use EAV attributes. Other modules, such as ",(0,d.mdx)("inlineCode",{parentName:"p"},"ConfigurableProduct"),", ",(0,d.mdx)("inlineCode",{parentName:"p"},"GiftMessage"),", and ",(0,d.mdx)("inlineCode",{parentName:"p"},"Tax"),", use the EAV functionality for ",(0,d.mdx)("inlineCode",{parentName:"p"},"Catalog"),".")),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("p",{parentName:"li"},(0,d.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/extension-attribute"},"Extension attributes"),". Extension attributes are new in Adobe Commerce and Magento Open Source. They are used to extend functionality and often use more ",(0,d.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/complex-data"},"complex data")," types than custom attributes. These attributes do not appear in the Admin."))),(0,d.mdx)("h2",{id:"custom-attributes"},"Custom attributes"),(0,d.mdx)("p",null,(0,d.mdx)("inlineCode",{parentName:"p"},"CustomAttributesDataInterface")," defines the methods that are called to get and set custom attributes, including ",(0,d.mdx)("inlineCode",{parentName:"p"},"getCustomAttributes()"),"."),(0,d.mdx)("p",null,"A ",(0,d.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/module"},"module")," has a set of built-in attributes that are always available. The ",(0,d.mdx)("inlineCode",{parentName:"p"},"Catalog")," module has several attributes that are defined as EAV attributes, but are treated as built-in attributes. These attributes include:"),(0,d.mdx)("ul",null,(0,d.mdx)("li",{parentName:"ul"},"attribute_set_id"),(0,d.mdx)("li",{parentName:"ul"},"created_at"),(0,d.mdx)("li",{parentName:"ul"},"group_price"),(0,d.mdx)("li",{parentName:"ul"},"media_gallery"),(0,d.mdx)("li",{parentName:"ul"},"name"),(0,d.mdx)("li",{parentName:"ul"},"price"),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("a",{parentName:"li",href:"https://glossary.magento.com/sku"},"sku")),(0,d.mdx)("li",{parentName:"ul"},"status"),(0,d.mdx)("li",{parentName:"ul"},"store_id"),(0,d.mdx)("li",{parentName:"ul"},"tier_price"),(0,d.mdx)("li",{parentName:"ul"},"type_id"),(0,d.mdx)("li",{parentName:"ul"},"updated_at"),(0,d.mdx)("li",{parentName:"ul"},"visibility"),(0,d.mdx)("li",{parentName:"ul"},"weight")),(0,d.mdx)("p",null,"In this case, when ",(0,d.mdx)("inlineCode",{parentName:"p"},"getCustomAttributes()")," is called, the system returns only custom attributes that are not in this list."),(0,d.mdx)("p",null,"The ",(0,d.mdx)("inlineCode",{parentName:"p"},"Customer")," module provides a ",(0,d.mdx)("inlineCode",{parentName:"p"},"system")," option for its attributes. As a result, the ",(0,d.mdx)("inlineCode",{parentName:"p"},"getCustomAttributes()")," method only returns those EAV attributes that are not defined as ",(0,d.mdx)("inlineCode",{parentName:"p"},"system")," attributes. If you create custom attributes programmatically, set the ",(0,d.mdx)("inlineCode",{parentName:"p"},"system")," option to 'false' if you want to include the attribute in the ",(0,d.mdx)("inlineCode",{parentName:"p"},"custom_attributes")," array."),(0,d.mdx)(s,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,d.mdx)("p",null,"As of version 2.3.4, Adobe Commerce and Magento Open Source caches all system EAV attributes as they are retrieved. This behavior is defined in each affected module's ",(0,d.mdx)("inlineCode",{parentName:"p"},"di.xml")," file as the ",(0,d.mdx)("inlineCode",{parentName:"p"},"attributesForPreload")," argument for ",(0,d.mdx)("inlineCode",{parentName:"p"},'<type name="Magento\\Eav\\Model\\Config">'),". Developers can cache custom EAV attributes by running the ",(0,d.mdx)("inlineCode",{parentName:"p"},"bin/magento config:set dev/caching/cache_user_defined_attributes 1")," command. This can also be done from the Admin while in Develop mode by setting ",(0,d.mdx)("strong",{parentName:"p"},"Stores")," > Settings ",(0,d.mdx)("strong",{parentName:"p"},"Configuration")," > ",(0,d.mdx)("strong",{parentName:"p"},"Advanced")," > ",(0,d.mdx)("strong",{parentName:"p"},"Developer")," > ",(0,d.mdx)("strong",{parentName:"p"},"Caching Settings")," > ",(0,d.mdx)("strong",{parentName:"p"},"Cache User Defined Attributes")," to ",(0,d.mdx)("strong",{parentName:"p"},"Yes"),". Caching EAV attributes while retrieving improves performance as it decreases the amount of insert/select requests to the DB, but it increases the cache network size."),(0,d.mdx)("h3",{id:"adding-customer-eav-attribute-for-backend-only"},"Adding Customer EAV attribute for backend only"),(0,d.mdx)("p",null,"Customer EAV attributes are created using a ",(0,d.mdx)("a",{parentName:"p",href:"declarative-schema/patches.md"},"data patches"),"."),(0,d.mdx)(s,{variant:"warning",slots:"text",mdxType:"InlineAlert"}),(0,d.mdx)("p",null,"Both the ",(0,d.mdx)("inlineCode",{parentName:"p"},"save()")," and ",(0,d.mdx)("inlineCode",{parentName:"p"},"getResource()")," methods for ",(0,d.mdx)("inlineCode",{parentName:"p"},"Magento\\Framework\\Model\\AbstractModel")," have been marked as ",(0,d.mdx)("inlineCode",{parentName:"p"},"@deprecated")," since 2.1 and should no longer be used."),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-php"},"<?php\n/**\n * Copyright © Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\nnamespace Magento\\Customer\\Setup\\Patch\\Data;\n\nuse Magento\\Customer\\Model\\Customer;\nuse Magento\\Customer\\Setup\\CustomerSetupFactory;\nuse Magento\\Framework\\App\\ResourceConnection;\nuse Magento\\Framework\\Setup\\ModuleDataSetupInterface;\nuse Magento\\Framework\\Setup\\Patch\\DataPatchInterface;\nuse Magento\\Framework\\Setup\\Patch\\PatchVersionInterface;\n\n/**\n * Class add customer example attribute to customer\n */\nclass AddCustomerExampleAttribute implements DataPatchInterface\n{\n    /**\n     * @var ModuleDataSetupInterface\n     */\n    private $moduleDataSetup;\n\n    /**\n     * @var CustomerSetupFactory\n     */\n    private $customerSetupFactory;\n\n    /**\n     * @param ModuleDataSetupInterface $moduleDataSetup\n     * @param CustomerSetupFactory $customerSetupFactory\n     */\n    public function __construct(\n        ModuleDataSetupInterface $moduleDataSetup,\n        CustomerSetupFactory $customerSetupFactory\n    ) {\n        $this->moduleDataSetup = $moduleDataSetup;\n        $this->customerSetupFactory = $customerSetupFactory;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public function apply()\n    {\n        $customerSetup = $this->customerSetupFactory->create(['setup' => $this->moduleDataSetup]);\n        $customerSetup->addAttribute(Customer::ENTITY, 'attribute_code', [\n            // Attribute options (list of options can be found below)\n        ]);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public static function getDependencies()\n    {\n        return [\n            UpdateIdentifierCustomerAttributesVisibility::class,\n        ];\n    }\n\n    /**\n     * @inheritdoc\n     */\n    public function getAliases()\n    {\n        return [];\n    }\n}\n")),(0,d.mdx)(s,{variant:"success",slots:"text",mdxType:"InlineAlert"}),(0,d.mdx)("p",null,"The scope of the Customer custom attribute is Global only, while other entities support the Global, Website, and StoreView scopes."),(0,d.mdx)("h2",{id:"extension-attributes"},"Extension attributes"),(0,d.mdx)("p",null,"Use ",(0,d.mdx)("inlineCode",{parentName:"p"},"ExtensibleDataInterface")," to implement extension attributes. In your code, you must define ",(0,d.mdx)("inlineCode",{parentName:"p"},"getExtensionAttributes()")," and ",(0,d.mdx)("inlineCode",{parentName:"p"},"setExtensionAttributes(*ExtensionInterface param)"),"."),(0,d.mdx)("p",null,(0,d.mdx)("inlineCode",{parentName:"p"},"public function getExtensionAttributes();")),(0,d.mdx)("p",null,"Most likely, you will want to extend interfaces defined in the ",(0,d.mdx)("inlineCode",{parentName:"p"},"Api/Data")," directory of a module."),(0,d.mdx)("h3",{id:"declare-extension-attributes"},"Declare extension attributes"),(0,d.mdx)("p",null,"You must create a ",(0,d.mdx)("inlineCode",{parentName:"p"},"<Module>/etc/extension_attributes.xml")," file to define a module's extension attributes:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-xml"},'<config>\n    <extension_attributes for="Path\\To\\Interface">\n        <attribute code="name_of_attribute" type="datatype">\n           <resources>\n              <resource ref="permission"/>\n           </resources>\n           <join reference_table="" reference_field="" join_on_field="">\n              <field>fieldname</field>\n           </join>\n        </attribute>\n    </extension_attributes>\n</config>\n')),(0,d.mdx)("p",null,"where:"),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Keyword"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"),(0,d.mdx)("th",{parentName:"tr",align:null},"Example"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"for"),(0,d.mdx)("td",{parentName:"tr",align:null},"The fully-qualified type name with the namespace that processes the extensions. The value must be a type that implements ",(0,d.mdx)("inlineCode",{parentName:"td"},"ExtensibleDataInterface"),". The interface can be in a different module."),(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"Magento\\Quote\\Api\\Data\\TotalsInterface"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"code"),(0,d.mdx)("td",{parentName:"tr",align:null},"The name of the attribute. The attribute name should be in snake case (the first letter in each word should be in lowercase, with each word separated by an underscore)."),(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"gift_cards_amount_used"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"type"),(0,d.mdx)("td",{parentName:"tr",align:null},"The data type. This can be a simple data type, such as string or integer, or complex type, such as an interface."),(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"float"),(0,d.mdx)("br",null),(0,d.mdx)("inlineCode",{parentName:"td"},"Magento\\CatalogInventory\\Api\\Data\\StockItemInterface"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"ref"),(0,d.mdx)("td",{parentName:"tr",align:null},"Optional. Restricts access to the extension attribute to users with the specified permission."),(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"Magento_CatalogInventory::cataloginventory"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"reference_table"),(0,d.mdx)("td",{parentName:"tr",align:null},"The table involved in a join operation. See ",(0,d.mdx)("a",{parentName:"td",href:"#searching-extension-attributes"},"Searching extension attributes")," for details."),(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"admin_user"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"reference_field"),(0,d.mdx)("td",{parentName:"tr",align:null},"Column in the ",(0,d.mdx)("inlineCode",{parentName:"td"},"reference_table"),"."),(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"user_id"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"join_on_field"),(0,d.mdx)("td",{parentName:"tr",align:null},"The column of the table associated with the interface specified in the ",(0,d.mdx)("inlineCode",{parentName:"td"},"for")," keyword that will be used in the join operation."),(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"store_id"))),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"field"),(0,d.mdx)("td",{parentName:"tr",align:null},"One or more fields present in the interface specified in the ",(0,d.mdx)("inlineCode",{parentName:"td"},"type")," keyword.",(0,d.mdx)("br",null),"You can specify the ",(0,d.mdx)("inlineCode",{parentName:"td"},'column=""')," keyword to define the column in the reference_table to use. The field value specifies the property on the ",(0,d.mdx)("inlineCode",{parentName:"td"},"interface")," which should be set."),(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"<field>firstname</field>"),(0,d.mdx)("br",null),(0,d.mdx)("inlineCode",{parentName:"td"},"<field>lastname</field>"),(0,d.mdx)("br",null),(0,d.mdx)("inlineCode",{parentName:"td"},"<field>email</field>"),(0,d.mdx)("br",null),(0,d.mdx)("br",null),(0,d.mdx)("inlineCode",{parentName:"td"},'<field column="customer_group_code">code</field>'))))),(0,d.mdx)("h3",{id:"searching-extension-attributes"},"Searching extension attributes"),(0,d.mdx)("p",null,"The system uses a join directive to add external attributes to a collection and to make the collection filterable. The ",(0,d.mdx)("inlineCode",{parentName:"p"},"join")," element in the ",(0,d.mdx)("inlineCode",{parentName:"p"},"extension_attributes.xml")," file defines which object fields and the database table/column to use as the source of a search."),(0,d.mdx)("p",null,"In the following example, an attribute named ",(0,d.mdx)("inlineCode",{parentName:"p"},"stock_item")," of type ",(0,d.mdx)("inlineCode",{parentName:"p"},"Magento\\CatalogInventory\\Api\\Data\\StockItemInterface")," is being added to the ",(0,d.mdx)("inlineCode",{parentName:"p"},"Magento\\Catalog\\Api\\Data\\ProductInterface"),"."),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-xml"},'<extension_attributes for="Magento\\Catalog\\Api\\Data\\ProductInterface">\n    <attribute code="stock_item" type="Magento\\CatalogInventory\\Api\\Data\\StockItemInterface">\n        <join reference_table="cataloginventory_stock_item" reference_field="product_id" join_on_field="entity_id">\n            <field>qty</field>\n        </join>\n    </attribute>\n</extension_attributes>\n')),(0,d.mdx)("p",null,"When ",(0,d.mdx)("inlineCode",{parentName:"p"},"getList()")," is called, it returns a list of ",(0,d.mdx)("inlineCode",{parentName:"p"},"ProductInterface"),"s. When it does this, the code populates the ",(0,d.mdx)("inlineCode",{parentName:"p"},"stock_item")," with a joined operation in which the ",(0,d.mdx)("inlineCode",{parentName:"p"},"StockItemInterface"),"’s ",(0,d.mdx)("inlineCode",{parentName:"p"},"qty")," property comes from the ",(0,d.mdx)("inlineCode",{parentName:"p"},"cataloginventory_stock_item")," table where the ",(0,d.mdx)("inlineCode",{parentName:"p"},"Product"),"'s ",(0,d.mdx)("inlineCode",{parentName:"p"},"entity_Id")," is joined with the ",(0,d.mdx)("inlineCode",{parentName:"p"},"cataloginventory_stock_item.product_id")," column."),(0,d.mdx)("p",null,"When you add search extension attributes, you must consider that this can cause ambiguity in the selection of fields in the resulting SQL query when using REST APIs.\nIn these cases, the REST call must explicitly specify both the table name and field to use for selecting."),(0,d.mdx)("p",null,"For example, the following configuration may introduce ambiguity when getting orders via REST API. The configuration constructs a query like ",(0,d.mdx)("inlineCode",{parentName:"p"},"SELECT .... FROM sales_order AS main_table LEFT JOIN sales_order"),". This creates an ambiguity for all columns from the ",(0,d.mdx)("inlineCode",{parentName:"p"},"sales_order")," table in that MySQL cannot determine if it should take them from the ",(0,d.mdx)("inlineCode",{parentName:"p"},"main_table")," or from the ",(0,d.mdx)("inlineCode",{parentName:"p"},"sales_order")," from the ",(0,d.mdx)("inlineCode",{parentName:"p"},"JOIN")," clause."),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-xml"},'<config>\n    <extension_attributes for="Magento\\Sales\\Api\\Data\\OrderInterface">\n        <attribute code="field1" type="int">\n            <join reference_table="sales_order" join_on_field="entity_id" reference_field="entity_id">\n                <field>field1</field>\n            </join>\n        </attribute>\n    </extension_attributes>\n</config>\n')),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"REST API Endpoint:")),(0,d.mdx)("p",null,(0,d.mdx)("inlineCode",{parentName:"p"},"GET http://<host>/rest/default/V1/orders")),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Payload:")),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-http"},"searchCriteria[filter_groups][0][filters][0]\n[field]=main_table.created_at&searchCriteria\n[filter_groups][0][filters][0][value]=2021-09-14%2000:00:00\n&searchCriteria[filter_groups][0][filters][0]\n[conditionType]=from\n&searchCriteria[filter_groups][1][filters][0]\n[field]=main_table.created_at\n&searchCriteria[filter_groups][1][filters][0]\n[value]=2021-09-14%2023:59:59\n&searchCriteria[filter_groups][1][filters][0]\n[conditionType]=to\n&searchCriteria[pageSize]=10\n&searchCriteria[currentPage]=86\n")),(0,d.mdx)("h3",{id:"extension-attribute-authentication"},"Extension attribute authentication"),(0,d.mdx)("p",null,"Individual fields that are defined as extension attributes can be restricted, based on existing permissions. This feature allows extension developers to restrict access to data. See ",(0,d.mdx)("a",{parentName:"p",href:"https://devdocs.magento.com/guides/v2.4/get-started/authentication/gs-authentication.html"},"Web API authentication overview")," for general information about authentication in Magento."),(0,d.mdx)("p",null,"The following ",(0,d.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/app/code/Magento/CatalogInventory/etc/extension_attributes.xml"},"code sample")," defines ",(0,d.mdx)("inlineCode",{parentName:"p"},"stock_item")," as an extension attribute of the ",(0,d.mdx)("inlineCode",{parentName:"p"},"CatalogInventory")," module. ",(0,d.mdx)("inlineCode",{parentName:"p"},"CatalogInventory"),' is treated as a "third-party extension". Access to the inventory data is restricted because the quantity of in-stock item may be competitive information.'),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-xml"},'<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:Api/etc/extension_attributes.xsd">\n    <extension_attributes for="Magento\\Catalog\\Api\\Data\\ProductInterface">\n        <attribute code="stock_item" type="Magento\\CatalogInventory\\Api\\Data\\StockItemInterface">\n            <resources>\n                <resource ref="Magento_CatalogInventory::cataloginventory"/>\n            </resources>\n        </attribute>\n    </extension_attributes>\n</config>\n')),(0,d.mdx)("p",null,"In this example, the ",(0,d.mdx)("inlineCode",{parentName:"p"},"stock_item")," attribute is restricted to only the users who have the ",(0,d.mdx)("inlineCode",{parentName:"p"},"Magento_CatalogInventory::cataloginventory")," permission. As a result, an anonymous or unauthenticated user issuing a ",(0,d.mdx)("inlineCode",{parentName:"p"},"GET <host>/rest/<store_code>/V1/products/<sku>")," request will receive product information similar to the following:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-json"},'    {\n      "sku": "tshirt1",\n      "price": "20.00",\n      "description": "New JSmith design",\n      "extension_attributes": {\n        "logo size": "small"\n      },\n      "custom_attributes": {\n        "artist": "James Smith"\n      }\n    }\n')),(0,d.mdx)("p",null,"However, an authenticated user with the permission ",(0,d.mdx)("inlineCode",{parentName:"p"},"Magento_CatalogInventory::cataloginventory")," receives the additional ",(0,d.mdx)("inlineCode",{parentName:"p"},"stock_item")," field:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-json"},'    {\n      "sku": "tshirt1",\n      "price": "20.00",\n      "description": "New JSmith design",\n      "extension_attributes": {\n        "logo size": "small",\n        "stock_item" : {\n          "status" : "in_stock"\n          "quantity": 70\n        }\n      },\n      "custom_attributes": {\n        "artist": "James Smith"\n      }\n    }\n')),(0,d.mdx)("p",null,"This only works for extension attributes (those attributes defined in an ",(0,d.mdx)("inlineCode",{parentName:"p"},"extension_attributes.xml")," file). There are no permission restrictions on the rest of the returned data. For example, there is no way to restrict ",(0,d.mdx)("inlineCode",{parentName:"p"},"custom_attributes"),"."),(0,d.mdx)("h3",{id:"extension-interfaces"},"Extension interfaces"),(0,d.mdx)("p",null,"An ",(0,d.mdx)("inlineCode",{parentName:"p"},"ExtensionInterface")," will be empty if no extension attributes have been added. In the following example—in an unmodified installation—",(0,d.mdx)("inlineCode",{parentName:"p"},"CustomerExtensionInterface")," will be generated, but will be empty:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-php"},"use Magento\\Framework\\Api\\ExtensionAttributesInterface;\ninterface CustomerExtensionInterface extends ExtensionAttributesInterface\n{\n}\n")),(0,d.mdx)("p",null,"However, if an extension similar to the following has been defined, the interface will not be empty:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-xml"},'<extension_attributes for="Magento\\Customer\\Api\\Data\\CustomerInterface">\n    <attribute code="attributeName" type="Magento\\Some\\Type[]" />\n</extension_attributes>\n')),(0,d.mdx)("h3",{id:"troubleshoot-eav-attributes"},"Troubleshoot EAV attributes"),(0,d.mdx)("p",null,"If you have issues when using ",(0,d.mdx)("inlineCode",{parentName:"p"},"setup:upgrade"),", verify ",(0,d.mdx)("inlineCode",{parentName:"p"},"__construct")," uses the method ",(0,d.mdx)("inlineCode",{parentName:"p"},"EavSetupFactory")," not ",(0,d.mdx)("inlineCode",{parentName:"p"},"EavSetup"),". You should not directly inject ",(0,d.mdx)("inlineCode",{parentName:"p"},"EavSetup")," in extension code. Check your custom code and purchased modules and extensions to verify. After changing the methods, you should be able to properly deploy."),(0,d.mdx)("h2",{id:"add-product-eav-attribute-options-reference"},"Add product EAV attribute options reference"),(0,d.mdx)("p",null,"The following table is a reference for the ",(0,d.mdx)("inlineCode",{parentName:"p"},"Magento\\Eav\\Setup\\EavSetup::addAttribute")," method. It contains the available options when creating a product attribute, listing each option's key, description, and the default value (where applicable)."),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Key"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"),(0,d.mdx)("th",{parentName:"tr",align:null},"Default Value"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"apply_to"),(0,d.mdx)("td",{parentName:"tr",align:null},"Catalog EAV Attribute - defines which product types the attribute can be applied to"),(0,d.mdx)("td",{parentName:"tr",align:null})),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"attribute_model"),(0,d.mdx)("td",{parentName:"tr",align:null},"EAV Attribute attribute_model"),(0,d.mdx)("td",{parentName:"tr",align:null})),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"attribute_set"),(0,d.mdx)("td",{parentName:"tr",align:null},"Name of the attribute set the new attribute will be assigned to. Works in combination with ",(0,d.mdx)("strong",{parentName:"td"},"group")," or empty ",(0,d.mdx)("strong",{parentName:"td"},"user_defined")),(0,d.mdx)("td",{parentName:"tr",align:null})),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"backend"),(0,d.mdx)("td",{parentName:"tr",align:null},"EAV Attribute backend_model"),(0,d.mdx)("td",{parentName:"tr",align:null})),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"comparable"),(0,d.mdx)("td",{parentName:"tr",align:null},"Catalog EAV Attribute - defines if attribute can be used when comparing products"),(0,d.mdx)("td",{parentName:"tr",align:null},"0")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"default"),(0,d.mdx)("td",{parentName:"tr",align:null},"EAV Attribute default_value"),(0,d.mdx)("td",{parentName:"tr",align:null})),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"filterable_in_search"),(0,d.mdx)("td",{parentName:"tr",align:null},"Catalog EAV Attribute is_filterable_in_search - defines if attribute can be used to filter search results"),(0,d.mdx)("td",{parentName:"tr",align:null},"0")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"filterable"),(0,d.mdx)("td",{parentName:"tr",align:null},"Catalog EAV Attribute is_filterable - defines if attribute can be used to filter on navigation"),(0,d.mdx)("td",{parentName:"tr",align:null},"0")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"frontend_class"),(0,d.mdx)("td",{parentName:"tr",align:null},"EAV Attribute frontend_class"),(0,d.mdx)("td",{parentName:"tr",align:null})),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"frontend"),(0,d.mdx)("td",{parentName:"tr",align:null},"EAV Attribute frontend_model"),(0,d.mdx)("td",{parentName:"tr",align:null})),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"global"),(0,d.mdx)("td",{parentName:"tr",align:null},"Catalog EAV Attribute is_global field"),(0,d.mdx)("td",{parentName:"tr",align:null},"1")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"group"),(0,d.mdx)("td",{parentName:"tr",align:null},"Attribute group name or ID"),(0,d.mdx)("td",{parentName:"tr",align:null})),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"input_renderer"),(0,d.mdx)("td",{parentName:"tr",align:null},"Catalog EAV Attribute frontend_input_renderer"),(0,d.mdx)("td",{parentName:"tr",align:null})),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"input"),(0,d.mdx)("td",{parentName:"tr",align:null},"EAV Attribute frontend_input"),(0,d.mdx)("td",{parentName:"tr",align:null},"text")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"is_filterable_in_grid"),(0,d.mdx)("td",{parentName:"tr",align:null},"Catalog EAV Attribute - defines if attribute can be used to filter on product grid in Admin"),(0,d.mdx)("td",{parentName:"tr",align:null},"0")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"is_html_allowed_on_front"),(0,d.mdx)("td",{parentName:"tr",align:null},"Catalog EAV Attribute - defines if HTML needs to be escaped on the frontend"),(0,d.mdx)("td",{parentName:"tr",align:null},"0")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"is_used_in_grid"),(0,d.mdx)("td",{parentName:"tr",align:null},"Catalog EAV Attribute - defines if attribute can be used on the product grid in Admin"),(0,d.mdx)("td",{parentName:"tr",align:null},"0")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"is_visible_in_grid"),(0,d.mdx)("td",{parentName:"tr",align:null},"Catalog EAV Attribute is_visible_in_grid - defines if attribute will be visible on the product grid in Admin"),(0,d.mdx)("td",{parentName:"tr",align:null},"0")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"label"),(0,d.mdx)("td",{parentName:"tr",align:null},"EAV Attribute frontend_label"),(0,d.mdx)("td",{parentName:"tr",align:null})),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"note"),(0,d.mdx)("td",{parentName:"tr",align:null},"EAV Attribute note"),(0,d.mdx)("td",{parentName:"tr",align:null})),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"option"),(0,d.mdx)("td",{parentName:"tr",align:null},"EAV Attribute Option values"),(0,d.mdx)("td",{parentName:"tr",align:null})),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"position"),(0,d.mdx)("td",{parentName:"tr",align:null},"Catalog EAV Attribute position"),(0,d.mdx)("td",{parentName:"tr",align:null},"0")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"required"),(0,d.mdx)("td",{parentName:"tr",align:null},"EAV Attribute is_required"),(0,d.mdx)("td",{parentName:"tr",align:null},"1")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"searchable"),(0,d.mdx)("td",{parentName:"tr",align:null},"Catalog EAV Attribute is_searchable"),(0,d.mdx)("td",{parentName:"tr",align:null},"0")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"sort_order"),(0,d.mdx)("td",{parentName:"tr",align:null},"EAV Entity Attribute sort_order"),(0,d.mdx)("td",{parentName:"tr",align:null})),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"source"),(0,d.mdx)("td",{parentName:"tr",align:null},"EAV Attribute source_model"),(0,d.mdx)("td",{parentName:"tr",align:null})),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"system"),(0,d.mdx)("td",{parentName:"tr",align:null},"Declares the attribute as a system attribute."),(0,d.mdx)("td",{parentName:"tr",align:null},"1")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"table"),(0,d.mdx)("td",{parentName:"tr",align:null},"EAV Attribute backend_table"),(0,d.mdx)("td",{parentName:"tr",align:null})),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"type"),(0,d.mdx)("td",{parentName:"tr",align:null},"EAV Attribute backend_type"),(0,d.mdx)("td",{parentName:"tr",align:null},"varchar")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"unique"),(0,d.mdx)("td",{parentName:"tr",align:null},"EAV Attribute is_unique"),(0,d.mdx)("td",{parentName:"tr",align:null},"0")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"used_for_promo_rules"),(0,d.mdx)("td",{parentName:"tr",align:null},"Catalog EAV Attribute is_used_for_promo_rules"),(0,d.mdx)("td",{parentName:"tr",align:null},"0")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"used_for_sort_by"),(0,d.mdx)("td",{parentName:"tr",align:null},"Catalog EAV Attribute used_for_sort_by"),(0,d.mdx)("td",{parentName:"tr",align:null},"0")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"used_in_product_listing"),(0,d.mdx)("td",{parentName:"tr",align:null},"Catalog EAV Attribute used_in_product_listing"),(0,d.mdx)("td",{parentName:"tr",align:null},"0")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"user_defined"),(0,d.mdx)("td",{parentName:"tr",align:null},"EAV Attribute is_user_defined"),(0,d.mdx)("td",{parentName:"tr",align:null},"0")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"visible_in_advanced_search"),(0,d.mdx)("td",{parentName:"tr",align:null},"Catalog EAV Attribute is_visible_in_advanced_search - defines if attribute will appear on the Advanced Search form"),(0,d.mdx)("td",{parentName:"tr",align:null},"0")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"visible_on_front"),(0,d.mdx)("td",{parentName:"tr",align:null},"Catalog EAV Attribute is_visible_on_front - defines attribute visibility on frontend"),(0,d.mdx)("td",{parentName:"tr",align:null},"0")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"visible"),(0,d.mdx)("td",{parentName:"tr",align:null},"Catalog EAV Attribute is_visible - defines visibility in Admin, won't be available for changing a value in the admin interface if set to 0"),(0,d.mdx)("td",{parentName:"tr",align:null},"1")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"wysiwyg_enabled"),(0,d.mdx)("td",{parentName:"tr",align:null},"Catalog EAV Attribute is_wysiwyg_enabled - used for enabling wysiwyg editor for an attribute. Works for textarea only"),(0,d.mdx)("td",{parentName:"tr",align:null},"0")))))}x.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-development-components-attributes-md-51c5b126aad2f7bd706f.js.map