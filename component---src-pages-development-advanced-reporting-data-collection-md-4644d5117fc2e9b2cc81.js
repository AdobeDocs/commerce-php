"use strict";(self.webpackChunkcommerce_php=self.webpackChunkcommerce_php||[]).push([[74687],{65681:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return m},default:function(){return x}});var a,r=t(87462),d=t(63366),l=(t(15007),t(64983)),o=t(91515),i=["components"],m={},p=(a="InlineAlert",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,l.mdx)("div",e)}),s={_frontmatter:m},c=o.Z;function x(e){var n=e.components,t=(0,d.Z)(e,i);return(0,l.mdx)(c,(0,r.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,l.mdx)("h1",{id:"data-collection-for-advanced-reporting"},"Data collection for advanced reporting"),(0,l.mdx)("p",null,"An Adobe Commerce or Magento Open Source instance collects data that Adobe Commerce Reporting uses to build the advanced reports. All the data are stored in an encrypted archive file which is securely transferred to Adobe Commerce Reporting. Data collection is declared in a configuration file ",(0,l.mdx)("inlineCode",{parentName:"p"},"etc/analytics.xml"),". It declares:"),(0,l.mdx)("ul",null,(0,l.mdx)("li",{parentName:"ul"},"Which report files must be included into the archive file."),(0,l.mdx)("li",{parentName:"ul"},"Which provider classes must collect data for each report file."),(0,l.mdx)("li",{parentName:"ul"},"Which report data configuration must be applied to collected data.")),(0,l.mdx)("p",null,"You do not need to have an Adobe Commerce Reporting account to use Advanced Reporting."),(0,l.mdx)(p,{variant:"warning",slots:"text",mdxType:"InlineAlert"}),(0,l.mdx)("p",null,"This topic serves to provide better understanding of how data collection works. Any changes in configuration files will cause issues, because Adobe Commerce Reporting does not expect any changes of configuration in the current version."),(0,l.mdx)("h2",{id:"example"},"Example"),(0,l.mdx)("p",null,"An example of the ",(0,l.mdx)("inlineCode",{parentName:"p"},"etc/analytics.xml")," file:"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0"?>\n\n<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:module:Magento_Analytics:etc/analytics.xsd">\n    <file name="modules">\n        <providers>\n            <reportProvider name="modules" class="Magento\\Analytics\\ReportXml\\ReportProvider">\n                <parameters>\n                    <name>modules</name>\n                </parameters>\n            </reportProvider>\n        </providers>\n    </file>\n    <file name="store_config">\n        <providers>\n            <customProvider name="store_config" class="Magento\\Analytics\\Model\\StoreConfigurationProvider"/>\n        </providers>\n    </file>\n    <file name="stores">\n        <providers>\n            <reportProvider name="stores" class="Magento\\Analytics\\ReportXml\\ReportProvider">\n                <parameters>\n                    <name>stores</name>\n                </parameters>\n            </reportProvider>\n            <customProvider name="store_config" class="Magento\\Analytics\\Model\\StoreConfigurationProvider"/>\n        </providers>\n    </file>\n</config>\n')),(0,l.mdx)("p",null,"The example configuration file declares the following:"),(0,l.mdx)("ul",null,(0,l.mdx)("li",{parentName:"ul"},"The ",(0,l.mdx)("inlineCode",{parentName:"li"},"modules.csv"),", ",(0,l.mdx)("inlineCode",{parentName:"li"},"store_config.csv"),", and ",(0,l.mdx)("inlineCode",{parentName:"li"},"stores.csv")," report files must be included in the archive file prepared for Adobe Commerce Reporting."),(0,l.mdx)("li",{parentName:"ul"},(0,l.mdx)("inlineCode",{parentName:"li"},"modules.csv")," must contain data provided by the ",(0,l.mdx)("inlineCode",{parentName:"li"},"\\Magento\\Analytics\\ReportXml\\ReportProvider")," class.\nProvided data must be configured according to the ",(0,l.mdx)("inlineCode",{parentName:"li"},"modules")," report declarations defined in the ",(0,l.mdx)("inlineCode",{parentName:"li"},"etc/reports.xml")," file."),(0,l.mdx)("li",{parentName:"ul"},(0,l.mdx)("inlineCode",{parentName:"li"},"store_config.csv")," must contain data provided by the ",(0,l.mdx)("inlineCode",{parentName:"li"},"Magento\\Analytics\\Model\\StoreConfigurationProvider")," class."),(0,l.mdx)("li",{parentName:"ul"},(0,l.mdx)("inlineCode",{parentName:"li"},"stores.csv")," must contain data provided by the ",(0,l.mdx)("inlineCode",{parentName:"li"},"\\Magento\\Analytics\\ReportXml\\ReportProvider")," class.\nProvided data is configured according to the ",(0,l.mdx)("inlineCode",{parentName:"li"},"store_config")," report declarations defined in the ",(0,l.mdx)("inlineCode",{parentName:"li"},"etc/reports.xml")," file.\nAlso, the report file must contain data provided by the ",(0,l.mdx)("inlineCode",{parentName:"li"},"Magento\\Analytics\\Model\\StoreConfigurationProvider")," class.")),(0,l.mdx)("h2",{id:"extensibility"},"Extensibility"),(0,l.mdx)("p",null,"Configuration of data collection can be extended or changed in any module adding the corresponding ",(0,l.mdx)("inlineCode",{parentName:"p"},"<module_name>/etc/analytics.xml")," file with nodes that must be changed or added."),(0,l.mdx)("h2",{id:"structure"},"Structure"),(0,l.mdx)("p",null,"The ",(0,l.mdx)("inlineCode",{parentName:"p"},"etc/analytics.xsd")," schema declares the structure of the ",(0,l.mdx)("inlineCode",{parentName:"p"},"etc/analytics.xml")," file."),(0,l.mdx)("p",null,(0,l.mdx)("img",{parentName:"p",src:"/commerce-php/assets/90d8211e477ea312c819389cd4c74186/analytics_xsd.svg",alt:"Analytics schema"})),(0,l.mdx)("h3",{id:"config"},(0,l.mdx)("inlineCode",{parentName:"h3"},"<config>")),(0,l.mdx)("p",null,"Configuration of an XML."),(0,l.mdx)("table",null,(0,l.mdx)("thead",{parentName:"table"},(0,l.mdx)("tr",{parentName:"thead"},(0,l.mdx)("th",{parentName:"tr",align:null},"Attribute"),(0,l.mdx)("th",{parentName:"tr",align:null},"Description"),(0,l.mdx)("th",{parentName:"tr",align:null},"Constant value"),(0,l.mdx)("th",{parentName:"tr",align:null},"Use"))),(0,l.mdx)("tbody",{parentName:"table"},(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"xmlns:xsi")),(0,l.mdx)("td",{parentName:"tr",align:null},"Default namespace declaration"),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},'"http://www.w3.org/2001/XMLSchema-instance"')),(0,l.mdx)("td",{parentName:"tr",align:null},"Required")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"xsi:noNamespaceSchemaLocation")),(0,l.mdx)("td",{parentName:"tr",align:null},"An XML Schema document that does not have a target namespace"),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},'"urn:magento:module:Magento_Analytics:etc/analytics.xsd"')),(0,l.mdx)("td",{parentName:"tr",align:null},"Required")))),(0,l.mdx)("h3",{id:"file"},(0,l.mdx)("inlineCode",{parentName:"h3"},"<file>")),(0,l.mdx)("p",null,"A report file (",(0,l.mdx)("inlineCode",{parentName:"p"},".csv")," by default) with collected data to be added to the archive file. The ",(0,l.mdx)("inlineCode",{parentName:"p"},"\\Magento\\Analytics\\Model\\ReportWriter")," class is responsible for a decision about a data file extension (",(0,l.mdx)("inlineCode",{parentName:"p"},".csv"),", ",(0,l.mdx)("inlineCode",{parentName:"p"},".json"),", etc.)."),(0,l.mdx)("table",null,(0,l.mdx)("thead",{parentName:"table"},(0,l.mdx)("tr",{parentName:"thead"},(0,l.mdx)("th",{parentName:"tr",align:null},"Attribute"),(0,l.mdx)("th",{parentName:"tr",align:null},"Description"),(0,l.mdx)("th",{parentName:"tr",align:null},"Example value"),(0,l.mdx)("th",{parentName:"tr",align:null},"Use"))),(0,l.mdx)("tbody",{parentName:"table"},(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"name")),(0,l.mdx)("td",{parentName:"tr",align:null},"A filename with no extension"),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},'"modules"')),(0,l.mdx)("td",{parentName:"tr",align:null},"Required")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"prefix")),(0,l.mdx)("td",{parentName:"tr",align:null},"Reserved for future use."),(0,l.mdx)("td",{parentName:"tr",align:null},"--"),(0,l.mdx)("td",{parentName:"tr",align:null},"--")))),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-xml"},'<config ...>\n\n    \x3c!-- Adds a report file `module.csv` to the archive file --\x3e\n    <file name="modules">\n        ...\n    </file>\n\n    \x3c!-- Adds a report file `stores.csv` to the archive file --\x3e\n    <file name="stores">\n        ...\n    </file>\n\n</config>\n')),(0,l.mdx)("h3",{id:"providers"},(0,l.mdx)("inlineCode",{parentName:"h3"},"<providers>")),(0,l.mdx)("p",null,"The node must contain a ",(0,l.mdx)("inlineCode",{parentName:"p"},"<reportProvider>")," node, or a ",(0,l.mdx)("inlineCode",{parentName:"p"},"<customProvider>")," node, or both."),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-xml"},"...\n    <file ...>\n        \x3c!-- A report provider adds data to the report file  --\x3e\n        <providers>\n            <reportProvider ...>\n        </providers>\n    </file>\n\n    <file ...>\n        \x3c!-- A custom provider adds data to the report file  --\x3e\n        <providers>\n            <customProvider ...>\n        </providers>\n    </file>\n\n    <file ...>\n        <providers>\n            \x3c!-- A report provider and a custom provider add data to the report file  --\x3e\n            <reportProvider ...>\n            <customProvider ...>\n        </providers>\n    </file>\n...\n")),(0,l.mdx)("h3",{id:"reportprovider"},(0,l.mdx)("inlineCode",{parentName:"h3"},"<reportProvider>")),(0,l.mdx)("p",null,"A class that provides data for a report file. It can contain parameters."),(0,l.mdx)("table",null,(0,l.mdx)("thead",{parentName:"table"},(0,l.mdx)("tr",{parentName:"thead"},(0,l.mdx)("th",{parentName:"tr",align:null},"Attribute"),(0,l.mdx)("th",{parentName:"tr",align:null},"Description"),(0,l.mdx)("th",{parentName:"tr",align:null},"Example value"),(0,l.mdx)("th",{parentName:"tr",align:null},"Use"))),(0,l.mdx)("tbody",{parentName:"table"},(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"name")),(0,l.mdx)("td",{parentName:"tr",align:null},"A provider name"),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"modules")),(0,l.mdx)("td",{parentName:"tr",align:null},"Required")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"class")),(0,l.mdx)("td",{parentName:"tr",align:null},"Full name of a class that provides data"),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},'"Magento\\Analytics\\ReportXml\\ReportProvider"')),(0,l.mdx)("td",{parentName:"tr",align:null},"Required")))),(0,l.mdx)("p",null,"Currently there is only one report provider available that is ",(0,l.mdx)("inlineCode",{parentName:"p"},"Magento\\Analytics\\ReportXml\\ReportProvider"),"."),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-xml"},'...\n    <providers>\n        \x3c!-- A report provider `stores` uses the `Magento\\Analytics\\ReportXml\\ReportProvider` class to collect report data --\x3e\n        <reportProvider name="stores" class="Magento\\Analytics\\ReportXml\\ReportProvider">\n            ...\n        </reportProvider>\n    </providers>\n...\n')),(0,l.mdx)("h3",{id:"parameters"},(0,l.mdx)("inlineCode",{parentName:"h3"},"<parameters>")),(0,l.mdx)("p",null,"Parameters used by ",(0,l.mdx)("inlineCode",{parentName:"p"},"<reportProvider>"),". Currently there is only one parameter is available. It is declared in ",(0,l.mdx)("inlineCode",{parentName:"p"},"<name>"),"."),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-xml"},'...\n    <reportProvider name="stores" class="Magento\\Analytics\\ReportXml\\ReportProvider">\n        \x3c!-- The report provider `stores` uses a configuration of a report with name `store_report` declared in `etc/reports.xml` --\x3e\n        <parameters>\n            <name>store_report</name>\n        </parameters>\n    </reportProvider>\n...\n')),(0,l.mdx)("p",null,"If ",(0,l.mdx)("inlineCode",{parentName:"p"},'reportProvider class="Magento\\Analytics\\ReportXml\\ReportProvider"'),", then ",(0,l.mdx)("inlineCode",{parentName:"p"},"<name>")," references to the ",(0,l.mdx)("inlineCode",{parentName:"p"},"<report name />")," in ",(0,l.mdx)("inlineCode",{parentName:"p"},"reports.xml"),"."),(0,l.mdx)("h3",{id:"customprovider"},(0,l.mdx)("inlineCode",{parentName:"h3"},"<customProvider>")),(0,l.mdx)("p",null,"A class that provides data for a report file. It cannot contain any parameters."),(0,l.mdx)("table",null,(0,l.mdx)("thead",{parentName:"table"},(0,l.mdx)("tr",{parentName:"thead"},(0,l.mdx)("th",{parentName:"tr",align:null},"Attribute"),(0,l.mdx)("th",{parentName:"tr",align:null},"Description"),(0,l.mdx)("th",{parentName:"tr",align:null},"Example value"),(0,l.mdx)("th",{parentName:"tr",align:null},"Use"))),(0,l.mdx)("tbody",{parentName:"table"},(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"name")),(0,l.mdx)("td",{parentName:"tr",align:null},"A provider name"),(0,l.mdx)("td",{parentName:"tr",align:null},'"store_config"'),(0,l.mdx)("td",{parentName:"tr",align:null},"Required")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"class")),(0,l.mdx)("td",{parentName:"tr",align:null},"Full name of a class that provides data"),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},'"Magento\\Analytics\\Model\\StoreConfigurationProvider"')),(0,l.mdx)("td",{parentName:"tr",align:null},"Required")))),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-xml"},'...\n    <providers>\n        \x3c!-- A report provider `store_config` uses the `Magento\\Analytics\\Model\\StoreConfigurationProvider` class to collect report data --\x3e\n        <customProvider name="store_config" class="Magento\\Analytics\\Model\\StoreConfigurationProvider"/>\n    </providers>\n...\n')))}x.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-development-advanced-reporting-data-collection-md-4644d5117fc2e9b2cc81.js.map