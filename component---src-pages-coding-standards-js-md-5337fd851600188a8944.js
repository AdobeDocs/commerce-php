"use strict";(self.webpackChunkcommerce_php=self.webpackChunkcommerce_php||[]).push([[9005],{28594:function(e,n,a){a.r(n),a.d(n,{_frontmatter:function(){return l},default:function(){return p}});var t=a(87462),i=a(63366),r=(a(15007),a(64983)),o=a(91515),s=["components"],l={},d={_frontmatter:l},m=o.Z;function p(e){var n=e.components,a=(0,i.Z)(e,s);return(0,r.mdx)(m,(0,t.Z)({},d,a,{components:n,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"javascript-coding-standard"},"JavaScript coding standard"),(0,r.mdx)("p",null,"Use the ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento-coding-standard/blob/develop/eslint/.eslintrc-magento"},"ESLint rules")," to make sure your code adheres to the coding standards.\nDevelopers writing ",(0,r.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/javascript"},"JavaScript")," and ",(0,r.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/jquery"},"jQuery")," code for Adobe Commerce and Magento Open Source must adhere to these guidelines and follow the standards listed in this document."),(0,r.mdx)("p",null,"Use ",(0,r.mdx)("a",{parentName:"p",href:"http://www.ietf.org/rfc/rfc2119.txt"},"RFC 2119"),' to interpret the "must," "must not," "required," "shall," "shall not," "should," "should not," "recommended," "may," and "optional" keywords.'),(0,r.mdx)("p",null,"Adobe Commerce and Magento Open Source uses the ",(0,r.mdx)("a",{parentName:"p",href:"https://jquery.com/"},"jQuery library")," including standard and custom ",(0,r.mdx)("a",{parentName:"p",href:"http://api.jqueryui.com/category/widgets"},"jQuery widgets"),"."),(0,r.mdx)("p",null,"For the jQuery widget coding standard, see ",(0,r.mdx)("a",{parentName:"p",href:"jquery-widgets.md"},"jQuery widget coding standard"),"."),(0,r.mdx)("h2",{id:"eslint-code-analysis"},"Eslint code analysis"),(0,r.mdx)("p",null,"Use ",(0,r.mdx)("a",{parentName:"p",href:"http://eslint.org/"},"ESLint")," to ensure the quality of your JavaScript code."),(0,r.mdx)("p",null,"ESLint is a community-driven tool that detects errors and potential problems in JavaScript code.\nIt can use custom rules to enforce specific coding standards."),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("a",{parentName:"li",href:"https://github.com/magento/magento-coding-standard/blob/develop/eslint/.eslintrc-magento"},"ESLint rules"))),(0,r.mdx)("h2",{id:"additional-formatting-standards"},"Additional formatting standards"),(0,r.mdx)("h3",{id:"anonymous-function-calls"},"Anonymous function calls"),(0,r.mdx)("p",null,"When you declare an anonymous function as an argument in a function call, indent the body of the function by ",(0,r.mdx)("em",{parentName:"p"},"four")," spaces from the left edge of the statement or function ",(0,r.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/keyword"},"keyword")," to increase readability."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-javascript"},"myObject.myFunction(param1, function (a,b) {\n    //Function logic\n    return a > b;\n});\n")),(0,r.mdx)("h3",{id:"end-of-file"},"End of file"),(0,r.mdx)("p",null,"The last line in a file must end with a single linefeed(LF) character(i.e. an empty line)."),(0,r.mdx)("p",null,"This reduces the quantity of the changed lines in a diff and makes code safer in file concatenation processes."),(0,r.mdx)("h3",{id:"indentation"},"Indentation"),(0,r.mdx)("p",null,"Indentation in code uses four spaces."),(0,r.mdx)("p",null,"Tabs are not allowed as indentation."),(0,r.mdx)("h4",{id:"wrapped-lines"},"Wrapped lines"),(0,r.mdx)("p",null,"Indent wrapped lines two spaces or left-aligned to the expression above."),(0,r.mdx)("h3",{id:"max-line-length"},"Max line length"),(0,r.mdx)("p",null,"The recommended max line length is 80 characters."),(0,r.mdx)("p",null,"Source code lines must not exceed 120 characters."),(0,r.mdx)("p",null,"Comment lines that contain an example command or a literal ",(0,r.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/url"},"URL")," longer than 120 characters may exceed the 120 character limit for ease of cutting and pasting."),(0,r.mdx)("p",null,"Do not be concerned about header guards that exceed 120 characters."),(0,r.mdx)("h3",{id:"line-termination"},"Line termination"),(0,r.mdx)("p",null,"Line termination follows the UNIX text file convention."),(0,r.mdx)("p",null,"Lines must end with a single linefeed(LF) character represented as ordinal 10 or hexadecimal (",(0,r.mdx)("inlineCode",{parentName:"p"},"0x0A"),")."),(0,r.mdx)("p",null,(0,r.mdx)("em",{parentName:"p"},"Do not")," use carriage the Mac OS convention of carriage returns(CR or ",(0,r.mdx)("inlineCode",{parentName:"p"},"0x0D"),") or the carriage return-linefeed combination(CRLF or ",(0,r.mdx)("inlineCode",{parentName:"p"},"0x0D")," and ",(0,r.mdx)("inlineCode",{parentName:"p"},"0x0A"),") standard for Windows OS."),(0,r.mdx)("h3",{id:"multi-line-string-literals"},"Multi-line string literals"),(0,r.mdx)("p",null,"Use string concatenation for multi-line string literals:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-javascript"},"var myString = 'JavaScript was originally developed in Netscape, by Brendan Eich. ' +\n    'Battling with Microsoft over the Internet, Netscape considered their client-server solution ' +\n    'as a distributed OS, running a portable version of Sun Microsystem&#8217;s Java. ' +\n    'Because Java was a competitor of C++ and aimed at professional programmers, ' +\n    'Netscape also wanted a lightweight interpreted language that would complement Java ' +\n    'by appealing to nonprofessional programmers, like Microsoft&#8217;s VB.[9] (see JavaScript and Java)';\n")),(0,r.mdx)("h3",{id:"parentheses"},"Parentheses"),(0,r.mdx)("p",null,"Use sparingly and in general where required by the syntax and semantics."),(0,r.mdx)("p",null,"Never use parentheses for:"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Unary operators (e.g. ",(0,r.mdx)("inlineCode",{parentName:"li"},"delete"),", ",(0,r.mdx)("inlineCode",{parentName:"li"},"typeof"),", and ",(0,r.mdx)("inlineCode",{parentName:"li"},"void"),")"),(0,r.mdx)("li",{parentName:"ul"},"After keywords such as ",(0,r.mdx)("inlineCode",{parentName:"li"},"return"),", ",(0,r.mdx)("inlineCode",{parentName:"li"},"throw")),(0,r.mdx)("li",{parentName:"ul"},"For ",(0,r.mdx)("inlineCode",{parentName:"li"},"case"),", ",(0,r.mdx)("inlineCode",{parentName:"li"},"in"),", or ",(0,r.mdx)("inlineCode",{parentName:"li"},"new"),", and others keywords like them")),(0,r.mdx)("h3",{id:"blocks"},"Blocks"),(0,r.mdx)("p",null,"Use braces with all multiline blocks. May only omit braces if entire block can be written in one line and improves readability."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-javascript"},"// Wrong\nif (true)\n    blah();\n\nfunction () { return false; }\n\n// Correct\nif (true) return;\n\nif (true) {\n    return;\n}\n\nif (true) {\n    blah();\n}\n\nfunction () {\n    return false;\n}\n\n")),(0,r.mdx)("h3",{id:"semicolons"},"Semicolons"),(0,r.mdx)("p",null,"Always put semicolons as statement terminators."),(0,r.mdx)("p",null,"The following code examples show the dangers of missing semicolons:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-javascript"},"// Example 1: JavaScript Error\nMyClass.prototype.myMethod = function() {\n    return 42;\n}  // <-- Missing semicolon\n\n(function() {\n    // Some initialization code wrapped in a function to create a scope for locals.\n})();\n")),(0,r.mdx)("p",null,"Since there is semicolon to end the first statement, the first function returns 42 and the script interprets 42 as a function.\nWhen the script tries to call 42 as a function with the second function as a parameter, an error occurs."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-javascript"},"// Example 2: Trying to do one thing on Internet Explorer and another on Firefox.\nvar x = {\n    'i': 1,\n    'j': 2\n }  // <-- Missing semicolon\n\n[normalVersion, ffVersion][isIE]();\n")),(0,r.mdx)("p",null,"A 'no such property in undefined' error appears during runtime when the script tries to call ",(0,r.mdx)("inlineCode",{parentName:"p"},"x[ffVersion][isIE]()"),"."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-javascript"},"\n// Example 3: Conditional execution a la bash\nvar THINGS_TO_EAT = [apples, oysters, sprayOnCheese]  // <-- Missing semicolon\n\n-1 == resultOfOperation() || die();\n\n")),(0,r.mdx)("p",null,"The script calls ",(0,r.mdx)("inlineCode",{parentName:"p"},"die")," unless ",(0,r.mdx)("inlineCode",{parentName:"p"},"resultOfOperation)_")," is ",(0,r.mdx)("inlineCode",{parentName:"p"},"NaN")," and assigns ",(0,r.mdx)("inlineCode",{parentName:"p"},"THING_TO_EAT")," the result of ",(0,r.mdx)("inlineCode",{parentName:"p"},"die()"),"."),(0,r.mdx)("h4",{id:"explanation"},"Explanation"),(0,r.mdx)("p",null,"JavaScript requires statements to end with a semicolon, except when it thinks it can safely infer their existence."),(0,r.mdx)("p",null,"In each of the examples above, a function declaration, or an object, or an array literal is used inside a statement."),(0,r.mdx)("p",null,"The closing brackets are not enough to indicate the end of the statement.\nJavaScript never ends a statement if the next token is an infix or bracket operator."),(0,r.mdx)("h3",{id:"strings"},"Strings"),(0,r.mdx)("p",null,"Use single quotes instead of double quotes for consistency."),(0,r.mdx)("p",null,"This is helpful when creating strings that include HTML:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-javascript"},"var msg = '<span class=\"text\">Hello World!</div>';\n")),(0,r.mdx)("h2",{id:"additional-naming-convention-standards"},"Additional naming convention standards"),(0,r.mdx)("h3",{id:"general-naming-conventions"},"General naming conventions"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Avoid underscores and numbers in names."),(0,r.mdx)("li",{parentName:"ul"},"Variables or methods should have names that accurately describe their purpose or behavior."),(0,r.mdx)("li",{parentName:"ul"},"Object methods or variables that are declared ",(0,r.mdx)("inlineCode",{parentName:"li"},"private")," or ",(0,r.mdx)("inlineCode",{parentName:"li"},"protected")," should start with an underscore(",(0,r.mdx)("inlineCode",{parentName:"li"},"_"),").")),(0,r.mdx)("h3",{id:"functions-and-methods"},"Functions and methods"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Class method names should start with an English verb in its infinitive form that describes the method."),(0,r.mdx)("li",{parentName:"ul"},"Names for accessors for instance or static variables should always have the ",(0,r.mdx)("inlineCode",{parentName:"li"},"get")," or ",(0,r.mdx)("inlineCode",{parentName:"li"},"set")," prefix."),(0,r.mdx)("li",{parentName:"ul"},"In ",(0,r.mdx)("a",{parentName:"li",href:"https://glossary.magento.com/design-pattern"},"design pattern")," classes, implementation method names should contain the pattern name where practical to provide better behavior description."),(0,r.mdx)("li",{parentName:"ul"},"Methods that return status flags or Boolean values should have the ",(0,r.mdx)("inlineCode",{parentName:"li"},"has")," or ",(0,r.mdx)("inlineCode",{parentName:"li"},"is")," prefix.")),(0,r.mdx)("h3",{id:"variables-and-properties"},"Variables and properties"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},"Do not use short variable names such as ",(0,r.mdx)("inlineCode",{parentName:"li"},"i")," or ",(0,r.mdx)("inlineCode",{parentName:"li"},"n")," except in small loop contexts"),(0,r.mdx)("li",{parentName:"ul"},"If a loop contains more than 20 lines of code, the index variables should have more descriptive names.")),(0,r.mdx)("h2",{id:"additional-coding-construct-standards"},"Additional coding construct standards"),(0,r.mdx)("h3",{id:"binary-and-ternary-operators"},"Binary and ternary operators"),(0,r.mdx)("p",null,"Always put the operator on the preceding line to avoid implicit semi-colon insertion issues."),(0,r.mdx)("h3",{id:"custom-tostring-method"},"Custom ",(0,r.mdx)("inlineCode",{parentName:"h3"},"toString()")," method"),(0,r.mdx)("p",null,"This method must always succeed without side effects."),(0,r.mdx)("h3",{id:"function-declarations-within-blocks"},"Function declarations within blocks"),(0,r.mdx)("p",null,"Use a variable initialized with a function expression to define a function within a block."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-javascript"},"// Wrong\nif (x) {\n    function foo() {}\n}\n\n// Correct\nif (x) {\n    var foo = function() {}\n}\n")),(0,r.mdx)("h3",{id:"exceptions-and-custom-exceptions"},"Exceptions and custom exceptions"),(0,r.mdx)("p",null,"You cannot avoid exceptions if you are doing something non-trivial (using an application development framework, and so on)."),(0,r.mdx)("p",null,"Without custom exceptions, returning error information from a function that also returns a value can be tricky, not to mention inelegant.\nBad solutions include passing in a reference type to hold error information or always returning Objects with a potential error member."),(0,r.mdx)("p",null,"These basically amount to a primitive ",(0,r.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/exception"},"exception")," handling hack.\nFeel free to use custom exceptions when appropriate."),(0,r.mdx)("h3",{id:"standard-features"},"Standard features"),(0,r.mdx)("p",null,"For maximum portability and compatibility, use standard features whenever possible."),(0,r.mdx)("p",null,"For example, ",(0,r.mdx)("inlineCode",{parentName:"p"},"string.charAt(3)")," instead of ",(0,r.mdx)("inlineCode",{parentName:"p"},"string[3]"),", and element access with DOM functions instead of using an application-specific shorthand."),(0,r.mdx)("h3",{id:"method-definitions"},"Method definitions"),(0,r.mdx)("p",null,"There are several ways to attach methods and properties to a constructor, but the preferred style is:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-javascript"},"Foo.prototype.bar = function() {\n    // ...\n};\n")),(0,r.mdx)("p",null,"Do not use:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-javascript"},"Foo.prototype = {\n    bar: function() {\n        // ...\n    },\n    circle: function() {\n        // ...\n    }\n};\n\n")),(0,r.mdx)("p",null,"Assignment operations to constructor prototypes creating temporal coupling and sometimes other unwanted side effects."),(0,r.mdx)("h3",{id:"closures"},"Closures"),(0,r.mdx)("p",null,"A closure keeps a pointer to its enclosing scope, so attaching a closure to a DOM element can create a circular reference and thus, a memory leak."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-javascript"},"// Wrong\nfunction foo(element, a, b) {\n    element.onclick = function() {\n      // uses a and b\n    };\n}\n")),(0,r.mdx)("p",null,'The function closure keeps references to elements "a" and "b" even if it never uses them.'),(0,r.mdx)("p",null,"Because elements also keep references to the closure, it is a cycle that will not be cleaned up by garbage collection.\nIn these situations, the code can be structured as follows:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-javascript"},"// Correct\nfunction foo(element, a, b) {\n    element.onclick = bar(a, b);\n}\n\nfunction bar(a, b) {\n    return function() {\n      // uses a and b\n    }\n}\n")),(0,r.mdx)("h2",{id:"additional-general-standards"},"Additional general standards"),(0,r.mdx)("h3",{id:"array-and-object-initializers"},"Array and object initializers"),(0,r.mdx)("p",null,"Single-line array and object initializers are allowed when they fit on a line as follows:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-javascript"},"    var arr = [1, 2, 3];  // No space after [ or before ].\n    var obj = {a: 1, b: 2, c: 3};  // No space after { or before }.\n")),(0,r.mdx)("p",null,"Long identifiers or values present problems for aligned initialization lists, so always prefer non-aligned initialization."),(0,r.mdx)("p",null,"For example:"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-javascript"},"Object.prototype = {\n    a: 0,\n    b: 1,\n    lengthyName: 2\n};\n")),(0,r.mdx)("h3",{id:"associative-arrays"},"Associative arrays"),(0,r.mdx)("p",null,"Use ",(0,r.mdx)("inlineCode",{parentName:"p"},"Object")," instead of ",(0,r.mdx)("inlineCode",{parentName:"p"},"Array")," for associative arrays."),(0,r.mdx)("h3",{id:"deferred-initialization"},"Deferred initialization"),(0,r.mdx)("p",null,"Use deferred initialization when it is not possible to initialize variables at the point of declaration."),(0,r.mdx)("h3",{id:"explicit-scope"},"Explicit scope"),(0,r.mdx)("p",null,"Use explicit scope to increase code portability and clarity."),(0,r.mdx)("h3",{id:"built-in-objects"},"Built-in objects"),(0,r.mdx)("p",null,"Modifying built-in like ",(0,r.mdx)("inlineCode",{parentName:"p"},"Object.prototype")," and ",(0,r.mdx)("inlineCode",{parentName:"p"},"Array.prototype")," is strictly forbidden."),(0,r.mdx)("p",null,"Modifying other built-ins like ",(0,r.mdx)("inlineCode",{parentName:"p"},"Function.prototype")," is less dangerous but leads to debugging issue in production."),(0,r.mdx)("h3",{id:"variable-declarations"},"Variable declarations"),(0,r.mdx)("p",null,"Declare a variable with ",(0,r.mdx)("inlineCode",{parentName:"p"},"var")," wherever possible to avoid overwriting existing global values."),(0,r.mdx)("p",null,"Using only one var per scope promotes readability."),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-javascript"},"var foo = 'bar',\n    num = 1,\n    arr = [1, 2, 3];\n")),(0,r.mdx)("h2",{id:"custom-rules"},"Custom rules"),(0,r.mdx)("p",null,"There is a set of custom Eslint rules to ensure code compatiblity with the latest versions of third-party libraries."),(0,r.mdx)("p",null,"These custom rules are included using the ",(0,r.mdx)("inlineCode",{parentName:"p"},"rulePaths")," setting in the ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/dev/tools/grunt/configs/eslint.json"},"Eslint Grunt configuration"),"."),(0,r.mdx)("p",null,"The source code of the rules can be found in the ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/tree/2.4/dev/tests/static/testsuite/Magento/Test/Js/_files/eslint"},"Eslint custom rules folder"),"."))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-coding-standards-js-md-5337fd851600188a8944.js.map