"use strict";(self.webpackChunkcommerce_php=self.webpackChunkcommerce_php||[]).push([[27447],{95842:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return p},default:function(){return u}});var a,r=t(87462),o=t(63366),i=(t(15007),t(64983)),s=t(91515),d=["components"],p={},l=(a="InlineAlert",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.mdx)("div",e)}),m={_frontmatter:p},c=s.Z;function u(e){var n=e.components,t=(0,o.Z)(e,d);return(0,i.mdx)(c,(0,r.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"reservations"},"Reservations"),(0,i.mdx)("p",null,"Adobe Commerce and Magento Open Source use ",(0,i.mdx)("em",{parentName:"p"},"reservations")," to calculate and keep track of the salable quantity of each product assigned to a stock."),(0,i.mdx)(l,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,i.mdx)("p",null,"See ",(0,i.mdx)("a",{parentName:"p",href:"https://experienceleague.adobe.com/docs/commerce-admin/inventory/basics/selection-reservations.html"},"Source Algorithms and Reservations")," in the ",(0,i.mdx)("em",{parentName:"p"},"Admin User Guide"),"."),(0,i.mdx)("h2",{id:"interfaces-and-services"},"Interfaces and services"),(0,i.mdx)("p",null,"All interfaces and services are defined in the ",(0,i.mdx)("inlineCode",{parentName:"p"},"InventoryReservations")," and ",(0,i.mdx)("inlineCode",{parentName:"p"},"InventoryReservationsApi")," modules."),(0,i.mdx)("h3",{id:"data-interface"},"Data interface"),(0,i.mdx)("p",null,(0,i.mdx)("inlineCode",{parentName:"p"},"ReservationInterface")," defines the constants and getter methods required for managing reservations."),(0,i.mdx)("h3",{id:"reservation-services"},"Reservation services"),(0,i.mdx)("p",null,"When an event such as an order placement, cancellation, refund, or shipment occurs, the Append Reservation Service creates a reservation for each SKU, indicating how many items to add to the salable quantity total. The service guarantees the client does not use the ",(0,i.mdx)("inlineCode",{parentName:"p"},"ReservationAppend")," service to update existing reservations. (Reservations are append-only entities.) For example, use the service to check whether the ",(0,i.mdx)("inlineCode",{parentName:"p"},"ReservationId"),", which is passed in the scope of ",(0,i.mdx)("inlineCode",{parentName:"p"},"ReservationInterface"),", has been nullified."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-php"},"interface AppendReservationsInterface\n{\n    /**\n     * Append reservations\n     *\n     * @param ReservationInterface[] $reservations\n     * @return void\n     * @throws \\Magento\\Framework\\Exception\\InputException\n     * @throws \\Magento\\Framework\\Exception\\CouldNotSaveException\n     */\n    public function execute(array $reservations): void;\n}\n")),(0,i.mdx)("p",null,"Do NOT use the ",(0,i.mdx)("inlineCode",{parentName:"p"},"AppendReservationsInterface")," service directly in the business logic that creates a business event. Instead, use a more high-level service:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-php"},"namespace Magento\\InventorySalesApi\\Api;\n\n/**\n * This service is responsible for creating reservations upon a sale event.\n *\n * @api\n */\ninterface PlaceReservationsForSalesEventInterface\n{\n    /**\n     * @param \\Magento\\InventorySalesApi\\Api\\Data\\ItemToSellInterface[] $items\n     * @param \\Magento\\InventorySalesApi\\Api\\Data\\SalesChannelInterface $salesChannel\n     * @param \\Magento\\InventorySalesApi\\Api\\Data\\SalesEventInterface $salesEvent\n     * @return void\n     *\n     * @throws \\Magento\\Framework\\Exception\\LocalizedException\n     * @throws \\Magento\\Framework\\Exception\\InputException\n     * @throws \\Magento\\Framework\\Exception\\CouldNotSaveException\n     */\n    public function execute(\n        array $items,\n        \\Magento\\InventorySalesApi\\Api\\Data\\SalesChannelInterface $salesChannel,\n        \\Magento\\InventorySalesApi\\Api\\Data\\SalesEventInterface $salesEvent\n    ): void;\n}\n")),(0,i.mdx)("h3",{id:"checkout-services"},"Checkout services"),(0,i.mdx)("p",null,"In Inventory Management, a product's ",(0,i.mdx)("inlineCode",{parentName:"p"},"Quantity")," value is not static. The salable quantity is now retrieved as a result of a dedicated service call. This differs from the previous ",(0,i.mdx)("inlineCode",{parentName:"p"},"CatalogInventory")," implementation, which defined the ",(0,i.mdx)("inlineCode",{parentName:"p"},"Product")," ",(0,i.mdx)("inlineCode",{parentName:"p"},"StockItem")," interface. (",(0,i.mdx)("inlineCode",{parentName:"p"},"CatalogInventory")," has been deprecated.)"),(0,i.mdx)("p",null,"Use the following dynamic services introduced instead of ",(0,i.mdx)("inlineCode",{parentName:"p"},"StockItem"),":"),(0,i.mdx)("table",null,(0,i.mdx)("thead",{parentName:"table"},(0,i.mdx)("tr",{parentName:"thead"},(0,i.mdx)("th",{parentName:"tr",align:null},"Interface"),(0,i.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,i.mdx)("tbody",{parentName:"table"},(0,i.mdx)("tr",{parentName:"tbody"},(0,i.mdx)("td",{parentName:"tr",align:null},(0,i.mdx)("inlineCode",{parentName:"td"},"GetProductSalableQtyInterface")),(0,i.mdx)("td",{parentName:"tr",align:null},"Returns the salable product quantity for the specified stock ID")),(0,i.mdx)("tr",{parentName:"tbody"},(0,i.mdx)("td",{parentName:"tr",align:null},(0,i.mdx)("inlineCode",{parentName:"td"},"IsProductSalableInterface")),(0,i.mdx)("td",{parentName:"tr",align:null},"Checks whether the product is salable")),(0,i.mdx)("tr",{parentName:"tbody"},(0,i.mdx)("td",{parentName:"tr",align:null},(0,i.mdx)("inlineCode",{parentName:"td"},"IsProductSalableForRequestedQtyInterface")),(0,i.mdx)("td",{parentName:"tr",align:null},"Checks whether there is enough salable quantity to fulfill an order or place the product into a shopping cart")))),(0,i.mdx)("h2",{id:"web-api-support"},"Web API support"),(0,i.mdx)("p",null,"Adobe Commerce and Magento Open Source web APIs (REST and SOAP) impose restrictions for entity interfaces that are outside the scope of reservations. Most notably, Web APIs require getter and setter methods. Because reservations are append-only immutable entities, there are no reservation setter methods. Therefore, reservation Web APIs are not supported."))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-development-framework-inventory-management-reservations-md-da2cd6b8757052175b90.js.map