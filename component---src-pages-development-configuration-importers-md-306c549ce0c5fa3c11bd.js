"use strict";(self.webpackChunkcommerce_php=self.webpackChunkcommerce_php||[]).push([[77100],{33954:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return p},default:function(){return u}});var r=t(87462),a=t(45987),o=(t(35776),t(3905)),m=t(91515);const i=["components"],p={},d=(l="InlineAlert",function(e){return console.warn("Component "+l+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.mdx)("div",e)});var l;const s={_frontmatter:p},c=m.Z;function u(e){let{components:n}=e,t=(0,a.Z)(e,i);return(0,o.mdx)(c,(0,r.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,o.mdx)("h1",{id:"configuration-importers"},"Configuration importers"),(0,o.mdx)("p",null,"A configuration importer provides consistent configurations across multiple systems (such as development, staging, and production).\nThis is useful for deployment strategies such as ",(0,o.mdx)("a",{parentName:"p",href:"https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/deployment/overview.html"},"pipeline deployment"),"."),(0,o.mdx)("p",null,"Adobe Commerce and Magento Open Source use configuration importers to import configuration data from the shared configuration file, ",(0,o.mdx)("inlineCode",{parentName:"p"},"config.php"),", to the appropriate storage, such as a database."),(0,o.mdx)("p",null,"Use the ",(0,o.mdx)("a",{parentName:"p",href:"https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/cli/configuration-management/import-configuration.html"},(0,o.mdx)("inlineCode",{parentName:"a"},"magento app:config:import")," command")," to import the configuration from the command line."),(0,o.mdx)("p",null,"Currently, the application has the following importers:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"Magento\\Config\\Model\\Config\\Importer")),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"Magento\\Store\\Model\\Config\\Importer")),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("inlineCode",{parentName:"li"},"Magento\\Theme\\Model\\Config\\Importer"))),(0,o.mdx)("h2",{id:"importerinterface"},(0,o.mdx)("inlineCode",{parentName:"h2"},"ImporterInterface")),(0,o.mdx)("p",null,"All importers implement the interface ",(0,o.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/App/DeploymentConfig/ImporterInterface.php"},(0,o.mdx)("inlineCode",{parentName:"a"},"Magento\\Framework\\App\\DeploymentConfig\\ImporterInterface"))," and define the following methods:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("p",{parentName:"li"},(0,o.mdx)("inlineCode",{parentName:"p"},"import(array $data)")," - The argument ",(0,o.mdx)("inlineCode",{parentName:"p"},"$data")," is the configuration array from ",(0,o.mdx)("inlineCode",{parentName:"p"},"config.php"),"."),(0,o.mdx)("p",{parentName:"li"},"This method should return the array of messages generated during the import process.")),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("p",{parentName:"li"},(0,o.mdx)("inlineCode",{parentName:"p"},"getWarningMessages(array $data)")," - Generates and returns the array of warning messages that contain information about what will be changed in the system."),(0,o.mdx)("p",{parentName:"li"},"The ",(0,o.mdx)("inlineCode",{parentName:"p"},"$data")," argument is the same as for the method ",(0,o.mdx)("inlineCode",{parentName:"p"},"import"),"."),(0,o.mdx)("p",{parentName:"li"},"If this method returns an empty array, the import proceeds without interaction."),(0,o.mdx)("p",{parentName:"li"},"You can also provide a message such as ",(0,o.mdx)("inlineCode",{parentName:"p"},"Do you want to continue [yes/no]?")),(0,o.mdx)("p",{parentName:"li"},"If the user enters ",(0,o.mdx)("inlineCode",{parentName:"p"},"no"),", import is canceled; otherwise, if the user enters ",(0,o.mdx)("inlineCode",{parentName:"p"},"yes"),", the import is processed."))),(0,o.mdx)("h3",{id:"implement-your-own-importer"},"Implement your own importer"),(0,o.mdx)("ol",null,(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},"Create an ",(0,o.mdx)("inlineCode",{parentName:"p"},"Importer")," class that implements ",(0,o.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/App/DeploymentConfig/ImporterInterface.php"},(0,o.mdx)("inlineCode",{parentName:"a"},"Magento\\Framework\\App\\DeploymentConfig\\ImporterInterface")),".")),(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},"Register your importer in your module's ",(0,o.mdx)("a",{parentName:"p",href:"../components/dependency-injection.md"},(0,o.mdx)("inlineCode",{parentName:"a"},"di.xml")),":"),(0,o.mdx)("pre",{parentName:"li"},(0,o.mdx)("code",{parentName:"pre",className:"language-xml"},'<type name="Magento\\Deploy\\Model\\DeploymentConfig\\ImporterPool">\n    <arguments>\n        <argument name="importers" xsi:type="array">\n            <item name="i18n" xsi:type="array">\n                <item name="class" xsi:type="string">Vendor\\Module\\Model\\Config\\Importer</item>\n                <item name="sortOrder" xsi:type="number">110</item>\n            </item>\n        </argument>\n    </arguments>\n</type>\n')))),(0,o.mdx)("p",null,"The sample code in the preceding example registers the importer ",(0,o.mdx)("inlineCode",{parentName:"p"},"Vendor\\Module\\Model\\Config\\Importer")," for the ",(0,o.mdx)("inlineCode",{parentName:"p"},"i18n")," array in ",(0,o.mdx)("inlineCode",{parentName:"p"},"config.php"),"."),(0,o.mdx)("p",null,"The ",(0,o.mdx)("inlineCode",{parentName:"p"},"i18n")," array has a queue order of 110, which means this importer runs after importers that have value of sort order less than 110 has and if values in the section ",(0,o.mdx)("inlineCode",{parentName:"p"},"i18n")," were changed."),(0,o.mdx)(d,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,o.mdx)("p",null,"An array cannot be imported by more than one importer."),(0,o.mdx)("h2",{id:"more-information"},"More information"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("a",{parentName:"li",href:"sensitive-environment-settings.md"},"Sensitive and system-specific settings")),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("a",{parentName:"li",href:"https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/files/config-reference-configphp.html"},"config.php reference")),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("a",{parentName:"li",href:"https://experienceleague.adobe.com/docs/commerce-operations/configuration-guide/files/config-reference-envphp.html"},"env.php reference"))))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-development-configuration-importers-md-306c549ce0c5fa3c11bd.js.map