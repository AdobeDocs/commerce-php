{"version":3,"file":"component---src-pages-development-cache-partial-cache-type-md-23215d146ad2b7737976.js","mappings":"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","sources":["webpack://commerce-php/./src/pages/development/cache/partial/cache-type.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/commerce-php/commerce-php/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`A `}<em parentName=\"p\">{`cache type`}</em>{` enables you to specify what is cached and enables merchants to clear that cache type using the Cache Management page in the Admin.`}</p>\n    <p>{`The tag `}<em parentName=\"p\">{`scope`}</em>{` provides a mechanism for a cache type.`}</p>\n    <h2 {...{\n      \"id\": \"cache-type-configuration\"\n    }}>{`Cache type configuration`}</h2>\n    <p>{`Declare a new cache type in the `}<inlineCode parentName=\"p\">{`<module_dir>/etc/cache.xml`}</inlineCode>{` file with the following attributes:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Attribute`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Required?`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`name`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Yes`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`A unique cache type ID`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`translate`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`No`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Parameters that will be translated on the \"Cache Management\" page`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`instance`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Yes`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The cache type model class`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`Also, cache type configuration have the following required parameters:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Parameter`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`label`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The \"Cache Type\" field to be displayed on the `}<inlineCode parentName=\"td\">{`System`}</inlineCode>{` > `}<inlineCode parentName=\"td\">{`Tools`}</inlineCode>{` > `}<inlineCode parentName=\"td\">{`Cache Management`}</inlineCode>{` page.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`description`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The \"Description\" field to be displayed on the `}<inlineCode parentName=\"td\">{`System`}</inlineCode>{` > `}<inlineCode parentName=\"td\">{`Tools`}</inlineCode>{` > `}<inlineCode parentName=\"td\">{`Cache Management`}</inlineCode>{` page.`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`For example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<?xml version=\"1.0\"?>\n<config xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"urn:magento:framework:Cache/etc/cache.xsd\">\n    <type name=\"%cache_type_id%\" translate=\"label,description\" instance=\"VendorName\\\\ModuleName\\\\Model\\\\Cache\\\\Type\\\\CacheType\">\n        <label>Cache Type Label</label>\n        <description>Cache Type Description</description>\n    </type>\n</config>\n`}</code></pre>\n    <p>{`You may declare multiple cache types.`}</p>\n    <h2 {...{\n      \"id\": \"cache-type-model\"\n    }}>{`Cache type model`}</h2>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`<?php\n/**\n * Copyright &copy; Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\nnamespace VendorName\\\\ModuleName\\\\Model\\\\Cache\\\\Type;\n\nuse Magento\\\\Framework\\\\App\\\\Cache\\\\Type\\\\FrontendPool;\nuse Magento\\\\Framework\\\\Cache\\\\Frontend\\\\Decorator\\\\TagScope;\n\n/**\n * System / Cache Management / Cache type \"Your Cache Type Label\"\n */\nclass CacheType extends TagScope\n{\n    /**\n     * Cache type code unique among all cache types\n     */\n    const TYPE_IDENTIFIER = '%cache_type_id%';\n\n    /**\n     * The tag name that limits the cache cleaning scope within a particular tag\n     */\n    const CACHE_TAG = '%CACHE_TYPE_TAG%';\n\n    /**\n     * @param FrontendPool $cacheFrontendPool\n     */\n    public function __construct(FrontendPool $cacheFrontendPool)\n    {\n        parent::__construct(\n            $cacheFrontendPool->get(self::TYPE_IDENTIFIER),\n            self::CACHE_TAG\n        );\n    }\n}\n`}</code></pre>\n    <p>{`You must specify the following parameters:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`VendorName\\\\ModuleName`}</inlineCode>{` defines the name of a module that uses a cache type. A module can use several cache types and a cache type can be used in several modules.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`%cache_type_id%`}</inlineCode>{` defines the unique identifier of a cache type.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`%CACHE_TYPE_TAG%`}</inlineCode>{` defines the unique tag to be used in the cache type scoping.`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"store-data-in-a-custom-cache-type\"\n    }}>{`Store data in a custom cache type`}</h2>\n    <p>{`To store serialized data in a custom cache, follow these steps:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Pass the argument to the constructor `}<inlineCode parentName=\"p\">{`Magento\\\\Framework\\\\App\\\\CacheInterface`}</inlineCode>{` `}<inlineCode parentName=\"p\">{`$cache`}</inlineCode>{` of a required class (Repository, Model, Block, etc).`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-php\"\n          }}>{`/**\n * @param CacheInterface $cache\n * @param SerializerInterface $serializer\n */\npublic function __construct(CacheInterface $cache, SerializerInterface $serializer)\n{\n    $this->cache = $cache;\n    $this->serializer = $serializer;\n}\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Store data in the cache.`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-php\"\n          }}>{`$cacheKey  = \\\\VendorName\\\\ModuleName\\\\Model\\\\Cache\\\\Type\\\\CacheType::TYPE_IDENTIFIER;\n$cacheTag  = \\\\VendorName\\\\ModuleName\\\\Model\\\\Cache\\\\Type\\\\CacheType::CACHE_TAG;\n\n$storeData = $this->cache->save(\n    $this->serializer->serialize($cacheData),\n    $cacheKey,\n    [$cacheTag],\n    86400\n);\n`}</code></pre>\n      </li>\n    </ol>\n    <h2 {...{\n      \"id\": \"retrieve-data-from-custom-cache-type\"\n    }}>{`Retrieve data from custom cache type`}</h2>\n    <p>{`Retrieve data from the cache with:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$cacheKey  = \\\\VendorName\\\\ModuleName\\\\Model\\\\Cache\\\\Type\\\\CacheType::TYPE_IDENTIFIER;\n\n$data = $this->serializer->unserialize($this->cache->load($cacheKey));\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"invalidate-custom-cache-type\"\n    }}>{`Invalidate custom cache type`}</h2>\n    <p>{`To invalidate a custom cache type, follow these steps:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Pass the argument to the constructor `}<inlineCode parentName=\"p\">{`Magento\\\\Framework\\\\App\\\\Cache\\\\TypeListInterface`}</inlineCode>{` `}<inlineCode parentName=\"p\">{`$typeList`}</inlineCode>{` of a required class (Repository, Model, Block, etc).`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-php\"\n          }}>{`/**\n * @param TypeListInterface $typeList\n */\npublic function __construct(TypeListInterface $typeList)\n{\n    $this->typeList = $typeList;\n}\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Invalidate the cache.`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-php\"\n          }}>{`$cacheKey  = \\\\VendorName\\\\ModuleName\\\\Model\\\\Cache\\\\Type\\\\CacheType::TYPE_IDENTIFIER;\n\n$this->typeList->invalidate($cacheKey);\n`}</code></pre>\n      </li>\n    </ol>\n    <h2 {...{\n      \"id\": \"flush-custom-cache-type\"\n    }}>{`Flush custom cache type`}</h2>\n    <p>{`The custom cache type can be flushed in the following ways:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Go to System -> Cache Management and flush the custom cache type`}</li>\n      <li parentName=\"ul\">{`Programmatically, using the TypeList.`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$cacheKey  = \\\\VendorName\\\\ModuleName\\\\Model\\\\Cache\\\\Type\\\\CacheType::TYPE_IDENTIFIER;\n\n$this->typeList->cleanType($cacheKey);\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"examples\"\n    }}>{`Examples`}</h2>\n    <p>{`A cache type `}<inlineCode parentName=\"p\">{`translate`}</inlineCode>{` is declared in the Magento_Translation module using the `}<inlineCode parentName=\"p\">{`cache.xml`}</inlineCode>{` configuration file.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<config xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"urn:magento:framework:Cache/etc/cache.xsd\">\n    <type name=\"translate\" translate=\"label,description\" instance=\"Magento\\\\Framework\\\\App\\\\Cache\\\\Type\\\\Translate\">\n        <label>Translations</label>\n        <description>Translation files</description>\n    </type>\n</config>\n`}</code></pre>\n    <p>{`Translate cache type model class is defined in `}<inlineCode parentName=\"p\">{`Magento\\\\Framework\\\\App\\\\Cache\\\\Type\\\\Translate.php`}</inlineCode>{` class. It must extend the `}<inlineCode parentName=\"p\">{`Magento\\\\Framework\\\\Cache\\\\Frontend\\\\Decorator\\\\TagScope`}</inlineCode>{` class.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`<?php\n/**\n * Copyright &copy; Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n\nnamespace Magento\\\\Framework\\\\App\\\\Cache\\\\Type;\n\nuse Magento\\\\Framework\\\\Cache\\\\Frontend\\\\Decorator\\\\TagScope;\n\n/**\n * System / Cache Management / Cache type \"Translations\"\n */\nclass Translate extends TagScope\n{\n    /**\n     * Cache type code unique among all cache types\n     */\n    const TYPE_IDENTIFIER = 'translate';\n\n    /**\n     * Cache tag used to distinguish the cache type from all other caches\n     */\n    const CACHE_TAG = 'TRANSLATE';\n\n    /**\n     * @param FrontendPool $cacheFrontendPool\n     */\n    public function __construct(FrontendPool $cacheFrontendPool)\n    {\n        parent::__construct($cacheFrontendPool->get(self::TYPE_IDENTIFIER), self::CACHE_TAG);\n    }\n}\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"sourceRoot":""}