"use strict";(self.webpackChunkcommerce_php=self.webpackChunkcommerce_php||[]).push([[86830],{47550:function(e,t,a){a.r(t),a.d(t,{_frontmatter:function(){return p},default:function(){return c}});var n=a(87462),i=a(45987),o=(a(35776),a(3905)),m=a(91515),r=a(89290);const d=["components"],p={},l={_frontmatter:p},s=m.Z;function c(e){let{components:t}=e,a=(0,i.Z)(e,d);return(0,o.mdx)(s,(0,n.Z)({},l,a,{components:t,mdxType:"MDXLayout"}),(0,o.mdx)(r.Z,{mdxType:"Docs"}),(0,o.mdx)("h1",{id:"adding-vault-integration"},"Adding vault integration"),(0,o.mdx)("p",null,"Vault as a payment method provides store customers with ability to use the previously saved credit card information for checkout. This information is stored safely on the side of trusted payments gateways (Braintree, PayPal). Not storing the sensitive credit card information is one of the ",(0,o.mdx)("a",{parentName:"p",href:"https://www.pcisecuritystandards.org/"},"PCI compliance")," requirements."),(0,o.mdx)("p",null,"The ",(0,o.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/tree/2.4/app/code/Magento/Vault"},"Commerce Vault")," is implemented using the Adobe Commerce ",(0,o.mdx)("a",{parentName:"p",href:"../payment-gateway/index.md"},"payment gateway"),". It is used in the out-of-the-box vault implementation for the Braintree payment method. Third party developers can use it to add vault to their custom payment provider integration."),(0,o.mdx)("p",null,"The following diagram shows a simplified interaction flow between Commerce sales management, vault, payment integration and external payment service provider."),(0,o.mdx)("p",null,(0,o.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"700px"}},"\n      ",(0,o.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"45.9375%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,o.mdx)("picture",{parentName:"span"},"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/commerce-php/static/e9839676092b92055487add900d73317/5530d/vault_interaction_flow1.webp 320w","/commerce-php/static/e9839676092b92055487add900d73317/0c8fb/vault_interaction_flow1.webp 640w","/commerce-php/static/e9839676092b92055487add900d73317/84c6d/vault_interaction_flow1.webp 700w"],sizes:"(max-width: 700px) 100vw, 700px",type:"image/webp"}),"\n          ",(0,o.mdx)("source",{parentName:"picture",srcSet:["/commerce-php/static/e9839676092b92055487add900d73317/dd4a7/vault_interaction_flow1.png 320w","/commerce-php/static/e9839676092b92055487add900d73317/0f09e/vault_interaction_flow1.png 640w","/commerce-php/static/e9839676092b92055487add900d73317/a27c6/vault_interaction_flow1.png 700w"],sizes:"(max-width: 700px) 100vw, 700px",type:"image/png"}),"\n          ",(0,o.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/commerce-php/static/e9839676092b92055487add900d73317/a27c6/vault_interaction_flow1.png",alt:"Vault Interaction",title:"Vault Interaction",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,o.mdx)("p",null,"The flow is similar to usual Commerce ",(0,o.mdx)("a",{parentName:"p",href:"../payment-gateway/index.md"},"payment gateway interaction flow"),"."),(0,o.mdx)("p",null,"The main difference is that when vault is used, it defines what command is required and when it must be called."),(0,o.mdx)("h2",{id:"adding-vault-general-steps"},"Adding vault: general steps"),(0,o.mdx)("p",null,"Commerce vault implementation provides that vault is available as a separate payment method during order creation (storefront or admin). But technically it is tightly related to the corresponding payment provider integration.\nYou do not need to create a new module for vault implementation. All required configuration and entities are added to the module of the payment provider integration."),(0,o.mdx)("p",null,"The topics of this chapter describe how to add the vault functionality to a payment method (the payment method must be implemented using Commerce payment gateway):"),(0,o.mdx)("ol",null,(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},(0,o.mdx)("a",{parentName:"p",href:"module-configuration.md"},"Add vault to module dependencies"),".")),(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},(0,o.mdx)("a",{parentName:"p",href:"vault-payment-configuration.md"},"Configure vault general parameters"),".")),(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},(0,o.mdx)("a",{parentName:"p",href:"vault-di.md"},"Add vault and payment methods entities using dependency injection configuration"),".")),(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},(0,o.mdx)("a",{parentName:"p",href:"enabler.md"},"Implement the ability for customers to choose whether to use vault"),".")),(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},(0,o.mdx)("a",{parentName:"p",href:"payment-token.md"},"Storing and processing the payment related data"),".")),(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},(0,o.mdx)("a",{parentName:"p",href:"token-ui-component-provider.md"},"Adding and using UI_Vault component to place orders on the storefront"),".")),(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},(0,o.mdx)("a",{parentName:"p",href:"customer-stored-payments.md"},"Display stored tokens for customer and process their deleting"),".")),(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},(0,o.mdx)("a",{parentName:"p",href:"admin-integration.md"},"Using stored tokens to place an order from Admin panel"),"."))))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-development-payments-integrations-vault-index-md-a6782503e1c6cd6cbe07.js.map