{"version":3,"file":"component---src-pages-development-components-web-api-request-processor-pool-md-7670ee9da620eac030e9.js","mappings":"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","sources":["webpack://commerce-php/./src/pages/development/components/web-api/request-processor-pool.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/commerce-php/commerce-php/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"request-processors-pool\"\n    }}>{`Request processors pool`}</h1>\n    <p>{`The request processors pool routes web API requests. It is located in the `}<inlineCode parentName=\"p\">{`Magento_WebApi`}</inlineCode>{` module: `}<inlineCode parentName=\"p\">{`Magento\\\\Webapi\\\\Controller\\\\Rest\\\\RequestProcessorPool`}</inlineCode></p>\n    <p>{`Adobe Commerce and Magento Open Source define the following processors:`}</p>\n    <h2 {...{\n      \"id\": \"processors\"\n    }}>{`Processors`}</h2>\n    <h3 {...{\n      \"id\": \"sync\"\n    }}><inlineCode parentName=\"h3\">{`sync`}</inlineCode></h3>\n    <p>{`Executes the corresponding service contract.`}</p>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`Class:`}</strong>{` `}<inlineCode parentName=\"li\">{`Magento\\\\Webapi\\\\Controller\\\\Rest\\\\SynchronousRequestProcessor`}</inlineCode></li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`URL pattern:`}</strong>{` `}<inlineCode parentName=\"li\">{`/^\\\\\\\\/V\\\\\\\\d+/`}</inlineCode></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"syncschema\"\n    }}><inlineCode parentName=\"h3\">{`syncSchema`}</inlineCode></h3>\n    <p>{`Delivers the schema needed for generating Swagger documentation.`}</p>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`Class:`}</strong>{` `}<inlineCode parentName=\"li\">{`Magento\\\\Webapi\\\\Controller\\\\Rest\\\\SchemaRequestProcessor`}</inlineCode></li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`URL pattern:`}</strong>{` `}<inlineCode parentName=\"li\">{`schema`}</inlineCode></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"async\"\n    }}><inlineCode parentName=\"h3\">{`async`}</inlineCode></h3>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`Class:`}</strong>{` `}<inlineCode parentName=\"li\">{`Magento\\\\WebapiAsync\\\\Controller\\\\Rest\\\\AsynchronousRequestProcessor`}</inlineCode></li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`URL pattern:`}</strong>{` `}<inlineCode parentName=\"li\">{`/^\\\\\\\\/async(\\\\\\\\/V.+)/`}</inlineCode></li>\n    </ul>\n    <p>{`Performs an asynchronous API request. It executes `}<inlineCode parentName=\"p\">{`Magento\\\\AsynchronousOperations\\\\Model\\\\MassSchedule::publishMass`}</inlineCode>{`, which places a single message in the queue.`}</p>\n    <h3 {...{\n      \"id\": \"asyncschema\"\n    }}><inlineCode parentName=\"h3\">{`asyncSchema`}</inlineCode></h3>\n    <p>{`Delivers the schema needed for generating Swagger documentation for asynchronous endpoints.`}</p>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`Class:`}</strong>{` `}<inlineCode parentName=\"li\">{`Magento\\\\WebapiAsync\\\\Controller\\\\Rest\\\\AsynchronousSchemaRequestProcessor`}</inlineCode></li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`URL pattern:`}</strong>{` `}<inlineCode parentName=\"li\">{`async/schema`}</inlineCode></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"asyncbulk\"\n    }}><inlineCode parentName=\"h3\">{`asyncBulk`}</inlineCode></h3>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`Class:`}</strong>{` `}<inlineCode parentName=\"li\">{`Magento\\\\WebapiAsync\\\\Controller\\\\Rest\\\\VirtualType\\\\AsynchronousBulkRequestProcessor`}</inlineCode></li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`URL pattern:`}</strong>{` `}<inlineCode parentName=\"li\">{`/^\\\\\\\\/async\\\\/bulk(\\\\\\\\/V.+)/`}</inlineCode></li>\n    </ul>\n    <p>{`Performs a bulk API request by executing `}<inlineCode parentName=\"p\">{`Magento\\\\AsynchronousOperations\\\\Model\\\\MassSchedule::publishMass`}</inlineCode>{`, which places multiple messages in the queue.`}</p>\n    <h3 {...{\n      \"id\": \"asyncbulkschema\"\n    }}><inlineCode parentName=\"h3\">{`asyncBulkSchema`}</inlineCode></h3>\n    <p>{`Currently not used. Reserved for future use.`}</p>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`Class:`}</strong>{` `}<inlineCode parentName=\"li\">{`Magento\\\\WebapiAsync\\\\Controller\\\\Rest\\\\VirtualType\\\\AsynchronousBulkSchemaRequestProcessor`}</inlineCode></li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`URL pattern:`}</strong>{` `}<inlineCode parentName=\"li\">{`async/bulk/schema`}</inlineCode></li>\n    </ul>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p><inlineCode parentName=\"p\">{`async`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`asyncBulk`}</inlineCode>{` share the same processor but have different URL patterns.`}</p>\n    <h2 {...{\n      \"id\": \"create-a-new-processor\"\n    }}>{`Create a new processor`}</h2>\n    <p>{`To create a custom processor, you must perform the following tasks:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Define the custom processor in `}<inlineCode parentName=\"li\">{`webapi_rest/di.xml`}</inlineCode>{`.`}</li>\n      <li parentName=\"ul\">{`Create a processor class and implement the `}<inlineCode parentName=\"li\">{`Magento\\\\Webapi\\\\Controller\\\\Rest\\\\RequestProcessorInterface`}</inlineCode>{` interface.`}</li>\n      <li parentName=\"ul\">{`Define the processing rules in the `}<inlineCode parentName=\"li\">{`canProcess`}</inlineCode>{` method.`}</li>\n      <li parentName=\"ul\">{`Create the processor logic in the `}<inlineCode parentName=\"li\">{`process`}</inlineCode>{` method.`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"define-the-custom-processor\"\n    }}>{`Define the custom processor`}</h3>\n    <p>{`Processors must be defined in a module's `}<inlineCode parentName=\"p\">{`webapi_rest/di.xml`}</inlineCode>{` file. The following example shows the definition of the default `}<inlineCode parentName=\"p\">{`sync`}</inlineCode>{` processor:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<type name=\"Magento\\\\Webapi\\\\Controller\\\\Rest\\\\RequestProcessorPool\">\n    <arguments>\n        <argument name=\"requestProcessors\" xsi:type=\"array\">\n            <item name=\"sync\" xsi:type=\"object\" sortOrder=\"100\">Magento\\\\Webapi\\\\Controller\\\\Rest\\\\SynchronousRequestProcessor</item>\n        </argument>\n    </arguments>\n</type>\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"create-the-processor-class\"\n    }}>{`Create the processor class`}</h2>\n    <p>{`A custom processor must implement the `}<inlineCode parentName=\"p\">{`Magento\\\\Webapi\\\\Controller\\\\Rest\\\\RequestProcessorInterface`}</inlineCode>{` interface, as shown below:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`<?php\n/**\n * Copyright &copy; Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\ndeclare(strict_types=1);\n\nnamespace Magento\\\\Webapi\\\\Controller\\\\Rest;\n\n/**\n *  Request processor interface\n */\ninterface RequestProcessorInterface\n{\n    /**\n     * Executes the logic to process the request\n     *\n     * @param \\\\Magento\\\\Framework\\\\Webapi\\\\Rest\\\\Request $request\n     * @return void\n     * @throws \\\\Magento\\\\Framework\\\\Exception\\\\AuthorizationException\n     * @throws \\\\Magento\\\\Framework\\\\Exception\\\\InputException\n     * @throws \\\\Magento\\\\Framework\\\\Webapi\\\\Exception\n     */\n    public function process(\\\\Magento\\\\Framework\\\\Webapi\\\\Rest\\\\Request $request);\n\n    /**\n     * Method should return true for all the requests the current processor can process.\n     *\n     * Invoked in the loop for all registered request processors. The first one wins.\n     *\n     * @param \\\\Magento\\\\Framework\\\\Webapi\\\\Rest\\\\Request $request\n     * @return bool\n     */\n    public function canProcess(\\\\Magento\\\\Framework\\\\Webapi\\\\Rest\\\\Request $request);\n}\n`}</code></pre>\n    <p>{`The `}<inlineCode parentName=\"p\">{`canProcess(\\\\Magento\\\\Framework\\\\Webapi\\\\Rest\\\\Request $request)`}</inlineCode>{` method defines whether the current request can be processed. Currently, all implemented processors match current request URLs with the defined patterns.`}</p>\n    <p>{`For example, `}<inlineCode parentName=\"p\">{`Magento\\\\WebapiAsync\\\\Controller\\\\Rest\\\\AsynchronousRequestProcessor`}</inlineCode>{` processes asynchronous calls, such as `}<inlineCode parentName=\"p\">{`<host>/rest/async/V1/products`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`const PROCESSOR_PATH = \"/^\\\\\\\\/async(\\\\\\\\/V.+)/\";\n\n.....\n\npublic function canProcess(\\\\Magento\\\\Framework\\\\Webapi\\\\Rest\\\\Request $request)\n{\n    if ($request->getHttpMethod() === \\\\Magento\\\\Framework\\\\Webapi\\\\Rest\\\\Request::HTTP_METHOD_GET) {\n        return false;\n    }\n\n    if (preg_match($this->processorPath, $request->getPathInfo()) === 1) {\n        return true;\n    }\n    return false;\n}\n\n.....\n`}</code></pre>\n    <p>{`The `}<inlineCode parentName=\"p\">{`process(\\\\Magento\\\\Framework\\\\Webapi\\\\Rest\\\\Request $request)`}</inlineCode>{` method executes processor logic.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","InlineAlert","name","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","variant","slots","isMDXComponent"],"sourceRoot":""}