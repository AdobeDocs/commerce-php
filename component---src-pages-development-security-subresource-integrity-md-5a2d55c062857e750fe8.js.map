{"version":3,"file":"component---src-pages-development-security-subresource-integrity-md-5a2d55c062857e750fe8.js","mappings":"qRAQaA,EAAe,CAAC,EAOvBC,GALgBC,EAKY,cALJ,SAA6BC,GAEzD,OADAC,QAAQC,KAAK,aAAeH,EAAO,4EAC5B,eAASC,EACjB,GAHqBD,MAMtB,MAAMI,EAAc,CAClBN,gBAEIO,EAAYC,EAAAA,EACH,SAASC,EAAT,GAGZ,IAHgC,WACjCC,GAEC,EADEP,GACF,YACD,OAAO,SAACI,GAAD,UAAeD,EAAiBH,EAAhC,CAAuCO,WAAYA,EAAYC,QAAQ,eAG5E,eACE,GAAM,yBACH,0BACL,kBAAK,ySACH,cAAGC,WAAW,IACZ,KAAQ,+EACL,+BAAmC,8BAC1C,eACE,GAAM,uBACH,wBACL,kBAAK,sVAEL,eACE,GAAM,yBACH,0BACL,kBAAK,4QAA0Q,uBAAYA,WAAW,KAAM,gEAA6E,iCACzX,qBAAK,iBAAMA,WAAW,MAClB,UAAa,gBACV,ueAWP,eACE,GAAM,yCACH,0CACL,kBAAK,kEAAgE,cAAGA,WAAW,IAC/E,KAAQ,kIACL,kBAAsB,mDAC3B,cAAGA,WAAW,IACZ,KAAQ,0HACL,iBAAqB,wJACO,cAAGA,WAAW,IAC7C,KAAQ,qHACL,iCAAqC,iJACG,cAAGA,WAAW,IACzD,KAAQ,sHACL,kCAAsC,YAC7C,eACE,GAAM,iCACH,kCACL,kBAAK,yMACsE,uBAAYA,WAAW,KAAM,aAA0B,qBAAmB,cAAGA,WAAW,IAC/J,KAAQ,sHACL,kCAAsC,YAC7C,kBAAK,gDACL,oBACE,eAAIA,WAAW,OACb,cAAGA,WAAW,MAAO,mCAAiC,uBAAYA,WAAW,KAAM,aAA0B,qBAAmB,cAAGA,WAAW,IAC1I,KAAQ,sHACL,kCAAsC,aAE/C,eAAIA,WAAW,OACb,cAAGA,WAAW,MAAO,oBAGzB,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBACV,+BAEP,oBACE,eAAIA,WAAW,MAAO,6BAA2B,mBAAQA,WAAW,MAAO,UAAmB,OAAK,mBAAQA,WAAW,MAAO,SAAkB,OAAK,mBAAQA,WAAW,MAAO,oBAA6B,MAAI,mBAAQA,WAAW,MAAO,0BAE3O,SAACX,EAAD,CAAaY,MAAM,OAAOF,QAAQ,iBAClC,kBAAK,6GACL,qBAAK,iBAAMC,WAAW,MAClB,UAAa,iBACV,+CAEP,eACE,GAAM,8CACH,+CACL,kBAAK,oLACL,qBAAK,iBAAMA,WAAW,MAClB,UAAa,gBACV,qGAGP,SAACX,EAAD,CAAaY,MAAM,OAAOF,QAAQ,iBAClC,kBAAK,iIAA+H,cAAGC,WAAW,IAC9I,KAAQ,4EACL,eAAmB,mEAG7B,CAEDH,EAAWK,gBAAiB,C","sources":["webpack://commerce-php/./src/pages/development/security/subresource-integrity.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/commerce-php/commerce-php/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"subresource-integrity\"\n    }}>{`Subresource Integrity`}</h1>\n    <p>{`Subresource Integrity (SRI) is a security feature that enables browsers to verify that the resources they fetch (for example, from a CDN) are delivered without unexpected manipulation. This feature works by allowing you to provide a cryptographic hash that a fetched resource must match.\nSee `}<a parentName=\"p\" {...{\n        \"href\": \"https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity\"\n      }}>{`Subresource Integrity (SRI)`}</a>{` to learn more about SRI.`}</p>\n    <h2 {...{\n      \"id\": \"application-support\"\n    }}>{`Application Support`}</h2>\n    <p>{`To comply with PCI 4.0 requirements for verification of script integrity on payment pages, Adobe Commerce and Magento Open Source 2.4.7 and later include support for Subresource Integrity by providing integrity hashes for all Javascript assets residing in the local filesystem. (This\nfunctionality is defined in the Magento_Csp module.)`}</p>\n    <h2 {...{\n      \"id\": \"default-configuration\"\n    }}>{`Default Configuration`}</h2>\n    <p>{`The default SRI feature is implemented only on the payment pages for the admin and storefront areas. However, merchants can extend the default configuration to other pages. For example, to enable SRI on the customer account page in the storefront, create the file `}<inlineCode parentName=\"p\">{`<module-dir>/view/frontend/layout/customer_account_index.xml`}</inlineCode>{` with the following content:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<page xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"urn:magento:framework:View/Layout/etc/page_configuration.xsd\">\n    <head>\n        <link src=\"Magento_Csp::js/sri.js\"/>\n    </head>\n    <body>\n        <referenceBlock name=\"head.additional\">\n            <block class=\"Magento\\\\Csp\\\\Block\\\\Sri\\\\Hashes\" name=\"customer.account.index.sri.hashes\" template=\"Magento_Csp::sri/hashes.phtml\"/>\n        </referenceBlock>\n    </body>\n</page>\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"subresource-integrity-hash-generation\"\n    }}>{`Subresource Integrity Hash Generation`}</h2>\n    <p>{`The Subresource Integrity hash generation process begins once `}<a parentName=\"p\" {...{\n        \"href\": \"https://experienceleague.adobe.com/en/docs/commerce-operations/configuration-guide/cli/static-view/static-view-file-deployment\"\n      }}>{`static content`}</a>{` for each package area has been deployed.\nThe `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/magento/magento2/tree/2.4-develop/app/code/Magento/Csp/Model/Deploy/Package/Processor/PostProcessor\"\n      }}>{`postprocessor`}</a>{` class then systematically processes all javascript files within each package and generates integrity hashes.\nThe postprocessor class triggers the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/magento/magento2/blob/2.4-develop/app/code/Magento/Csp/Model/SubresourceIntegrityCollector.php\"\n      }}>{`SubresourceIntegrityCollector`}</a>{` class to collect the hashes which are cached for storage after all packages are deployed.\nAll integrity hashes are stored in cache via the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/magento/magento2/blob/2.4-develop/app/code/Magento/Csp/Model/SubresourceIntegrityRepository.php\"\n      }}>{`SubresourceIntegrityRepository`}</a>{` class.`}</p>\n    <h2 {...{\n      \"id\": \"subresource-integrity-caching\"\n    }}>{`Subresource Integrity Caching`}</h2>\n    <p>{`Subresource Integrity hashes are stored and organized in cache by the deployed package area - frontend, base or admin.\nThe hash value for a specific file can be retrieved from the cache using the `}<inlineCode parentName=\"p\">{`getByPath`}</inlineCode>{` function in the `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/magento/magento2/blob/2.4-develop/app/code/Magento/Csp/Model/SubresourceIntegrityRepository.php\"\n      }}>{`SubresourceIntegrityRepository`}</a>{` class.`}</p>\n    <p>{`Caches can be purged in the following ways:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Programmatically, by using the `}<inlineCode parentName=\"p\">{`deleteAll`}</inlineCode>{` function in the `}<a parentName=\"p\" {...{\n            \"href\": \"https://github.com/magento/magento2/blob/2.4-develop/app/code/Magento/Csp/Model/SubresourceIntegrityRepository.php\"\n          }}>{`SubresourceIntegrityRepository`}</a>{` class.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Using the CLI`}</p>\n      </li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`bin/magento cache:flush\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\">{`Through the Admin UI via `}<strong parentName=\"li\">{`System`}</strong>{` > `}<strong parentName=\"li\">{`Tools`}</strong>{` > `}<strong parentName=\"li\">{`Cache Management`}</strong>{`. `}<strong parentName=\"li\">{`Flush Cache Storage`}</strong></li>\n    </ul>\n    <InlineAlert slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`After the cache has been purged, SRI caches must be regenerated using the static content deploy command.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`bin/magento setup:static-content:deploy\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"subresource-integrity-for-remote-resources\"\n    }}>{`Subresource Integrity for Remote Resources`}</h3>\n    <p>{`Although, there is no SRI support for custom remote Javascript resources currently, merchants can generate the integrity hash for remote resources using the following example.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`$hash = base64_encode(hash('sha256', $content, true));\n$integrity = \"sha256\" . \"-{$hash}\";\n`}</code></pre>\n    <InlineAlert slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`For subresource-integrity verification of a resource served from an origin other than the document where it is embedded, the `}<a parentName=\"p\" {...{\n        \"href\": \"https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/crossorigin\"\n      }}>{`crossorigin`}</a>{` attribute must be provided along with the integrity attribute.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","InlineAlert","name","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","slots","isMDXComponent"],"sourceRoot":""}