{"version":3,"file":"component---src-pages-developer-components-indexing-custom-indexer-md-3c4afd2e9ee977f120ce.js","mappings":"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","sources":["webpack://commerce-php/./src/pages/developer/components/indexing/custom-indexer.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/commerce-php/commerce-php/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h2 {...{\n      \"id\": \"adding-a-custom-indexer-m2devgde-indexing-custom\"\n    }}>{`Adding a custom indexer {#m2devgde-indexing-custom}`}</h2>\n    <p>{`This topic discusses how to create a custom indexer. We've recently made a performance improvement that enables you to declare one or more `}<em parentName=\"p\">{`shared`}</em>{` indexers; if one of the shared indexes is already up-to-date, it doesn't need to be reindexed.`}</p>\n    <p>{`To implement your own indexer, add the following code in your module:`}</p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#custom-indexer-logic\"\n        }}>{`Indexer logic`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#indexer-configuration\"\n        }}>{`Indexer configuration`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#mview-configuration\"\n        }}>{`MView configuration`}</a></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"custom-indexer-logic\"\n    }}>{`Custom indexer logic`}</h3>\n    <p>{`Your custom indexer class should implement `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/magento/magento2/blob/2.4/lib/internal/Magento/Framework/Indexer/ActionInterface.php\"\n      }}>{`\\\\Magento\\\\Framework\\\\Indexer\\\\ActionInterface`}</a>{`, and the indexer should be able to perform three types of operations:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Row reindex: processing a single entry from a dictionary; responsibility of `}<inlineCode parentName=\"li\">{`executeRow($id)`}</inlineCode></li>\n      <li parentName=\"ul\">{`List reindex: processing a set of dictionary entries; responsibility of `}<inlineCode parentName=\"li\">{`executeList($ids)`}</inlineCode>{`, where `}<inlineCode parentName=\"li\">{`$ids`}</inlineCode>{` is an array of `}<a parentName=\"li\" {...{\n          \"href\": \"https://glossary.magento.com/entity\"\n        }}>{`entity`}</a>{` IDs`}</li>\n      <li parentName=\"ul\">{`Full reindex: processing all entities from a specific dictionary; responsibility of `}<inlineCode parentName=\"li\">{`executeFull()`}</inlineCode></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"indexer-configuration\"\n    }}>{`Indexer configuration`}</h3>\n    <p>{`Declare a new indexer process in the `}<inlineCode parentName=\"p\">{`etc/indexer.xml`}</inlineCode>{` file with the following attributes:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Attribute`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Required?`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`id`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Yes`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`A unique indexer ID`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`class`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`No`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The class that processes indexer methods (`}<inlineCode parentName=\"td\">{`executeFull`}</inlineCode>{`, `}<inlineCode parentName=\"td\">{`executeList`}</inlineCode>{`, `}<inlineCode parentName=\"td\">{`executeRow`}</inlineCode>{`)`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`primary`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`No`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The source provider`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`shared_index`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`No`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Use this option to improve performance if your indexer is related to another indexer. In this `}<a parentName=\"td\" {...{\n              \"href\": \"https://github.com/magento/magento2/blob/2.4/app/code/Magento/CatalogRule/etc/indexer.xml\"\n            }}>{`example`}</a>{`, if the Catalog Product Rule index needs to be reindexed, but other catalog product rule indexes are up-to-date, then only the Catalog Product Rule is reindexed.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`view_id`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`No`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The ID of the view element that is defined in the `}<inlineCode parentName=\"td\">{`mview.xml`}</inlineCode>{` configuration file.`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`For example,`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<?xml version=\"1.0\"?>\n<config xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"urn:magento:framework:Indexer/etc/indexer.xsd\">\n    <indexer id=\"design_config_grid\" view_id=\"design_config_dummy\" class=\"Magento\\\\Theme\\\\Model\\\\Indexer\\\\Design\\\\Config\" primary=\"design_config\">\n        ...\n    </indexer>\n</config>\n`}</code></pre>\n    <p>{`An indexer process can also have the following optional parameters:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Parameter`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`description`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The description of indexer to be displayed on the `}<inlineCode parentName=\"td\">{`System`}</inlineCode>{` > `}<inlineCode parentName=\"td\">{`Tools`}</inlineCode>{` > `}<inlineCode parentName=\"td\">{`Index Management`}</inlineCode>{` page.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`fieldset`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Describes the fields, source, and data provider of the flat index table.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`saveHandler`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`An extension point. The class for processing (deleting, saving, updating) items when indexing.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`structure`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The class that processes (creates, removes) flat index tables.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`title`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The title of indexer to be displayed on the `}<inlineCode parentName=\"td\">{`System`}</inlineCode>{` > `}<inlineCode parentName=\"td\">{`Tools`}</inlineCode>{` > `}<inlineCode parentName=\"td\">{`Index Management`}</inlineCode>{` page.`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`For example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<?xml version=\"1.0\"?>\n<config xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"urn:magento:framework:Indexer/etc/indexer.xsd\">\n    <indexer ...>\n        <title translate=\"true\">Design Config Grid</title>\n        <description translate=\"true\">Rebuild design config grid index</description>\n\n        <fieldset name=\"design_config\" source=\"Magento\\\\Theme\\\\Model\\\\ResourceModel\\\\Design\\\\Config\\\\Scope\\\\Collection\"\n                  provider=\"Magento\\\\Theme\\\\Model\\\\Indexer\\\\Design\\\\Config\\\\FieldsProvider\">\n            <field name=\"store_website_id\" xsi:type=\"filterable\" dataType=\"int\"/>\n            <field name=\"store_group_id\" xsi:type=\"filterable\" dataType=\"int\"/>\n            <field name=\"store_id\" xsi:type=\"filterable\" dataType=\"int\"/>\n        </fieldset>\n        <saveHandler class=\"Magento\\\\Framework\\\\Indexer\\\\SaveHandler\\\\Grid\"/>\n        <structure class=\"Magento\\\\Framework\\\\Indexer\\\\GridStructure\"/>\n    </indexer>\n</config>\n`}</code></pre>\n    <p>{`All indexers related to a `}<a parentName=\"p\" {...{\n        \"href\": \"https://glossary.magento.com/module\"\n      }}>{`module`}</a>{` should be declared in one file.`}</p>\n    <h3 {...{\n      \"id\": \"mview-configuration\"\n    }}>{`MView configuration`}</h3>\n    <p>{`Add the `}<inlineCode parentName=\"p\">{`mview.xml`}</inlineCode>{` configuration file in the `}<inlineCode parentName=\"p\">{`etc`}</inlineCode>{` module directory, where you declare the following:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`indexer view ID`}</li>\n      <li parentName=\"ul\">{`indexer class`}</li>\n      <li parentName=\"ul\">{`the database tables the indexer tracks`}</li>\n      <li parentName=\"ul\">{`what column data is sent to the indexer`}</li>\n    </ul>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://github.com/magento/magento2/blob/2.4/app/code/Magento/Catalog/etc/mview.xml\"\n      }}>{`Example`}</a></p>\n    <p>{`All Mview declarations related to a module should be declared in one file.`}</p>\n    <h3 {...{\n      \"id\": \"example-of-a-custom-indexer-implementation\"\n    }}>{`Example of a custom indexer implementation`}</h3>\n    <p>{`To push best-selling products to the top of a category listing, process statistics about sales to change the product position dynamically.`}</p>\n    <p>{`Assuming your module is named `}<inlineCode parentName=\"p\">{`<VendorName>_Merchandizing`}</inlineCode>{`, you must write the appropriate code in the indexer class `}<inlineCode parentName=\"p\">{`Merchandizing/Model/Indexer/Popular.php`}</inlineCode></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`<?php\nnamespace <VendorName>\\\\Merchandizing\\\\Model\\\\Indexer;\n\nclass Popular implements \\\\Magento\\\\Framework\\\\Indexer\\\\ActionInterface, \\\\Magento\\\\Framework\\\\Mview\\\\ActionInterface\n{\n    /*\n     * Used by mview, allows process indexer in the \"Update on schedule\" mode\n     */\n    public function execute($ids){\n        //Used by mview, allows you to process multiple placed orders in the \"Update on schedule\" mode\n    }\n\n    /*\n     * Will take all of the data and reindex\n     * Will run when reindex via command line\n     */\n    public function executeFull(){\n        //Should take into account all placed orders in the system\n    }\n\n    /*\n     * Works with a set of entity changed (may be massaction)\n     */\n    public function executeList(array $ids){\n        //Works with a set of placed orders (mass actions and so on)\n    }\n\n    /*\n     * Works in runtime for a single entity using plugins\n     */\n    public function executeRow($id){\n        //Works in runtime for a single order using plugins\n    }\n}\n`}</code></pre>\n    <p>{`Next, declare the indexer in `}<inlineCode parentName=\"p\">{`Merchandizing/etc/indexer.xml`}</inlineCode>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<?xml version=\"1.0\"?>\n<config xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"urn:magento:framework:Indexer/etc/indexer.xsd\">\n    <indexer id=\"merchandizing_popular\" view_id=\"merchandizing_popular_order\" class=\"Vendor\\\\Merchandizing\\\\Model\\\\Indexer\\\\Popular\">\n        <title translate=\"true\">Popular Products</title>\n        <description translate=\"true\">Sort products in a category by popularity</description>\n    </indexer>\n</config>\n`}</code></pre>\n    <p>{`In this file, declare a new indexer process with the attribute:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`id`}</inlineCode>{` - To identify this indexer. Check status, mode or reindex this indexer by command line.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`view_id`}</inlineCode>{` - Id of view element which will be defined in the `}<inlineCode parentName=\"li\">{`mview`}</inlineCode>{` configuration file.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`class`}</inlineCode>{` -  The name to the class which we process indexer method.`}</li>\n    </ul>\n    <p>{`Finally, declare the indexer view (`}<inlineCode parentName=\"p\">{`merchandizing_popular_order`}</inlineCode>{`) that tracks sales (`}<inlineCode parentName=\"p\">{`Merchandizing/etc/mview.xml`}</inlineCode>{`):`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<config xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"urn:magento:framework:Mview/etc/mview.xsd\">\n    <view id=\"merchandizing_popular_order\" class=\"Vendor\\\\Merchandizing\\\\Model\\\\Indexer\\\\Popular\" group=\"indexer\">\n        <subscriptions>\n            <table name=\"sales_order\" entity_column=\"entity_id\" />\n        </subscriptions>\n    </view>\n</config>\n`}</code></pre>\n    <p>{`These settings start `}<inlineCode parentName=\"p\">{`<VendorName>\\\\Merchandizing\\\\Model\\\\Indexer\\\\Popular::execute`}</inlineCode>{` method every time an order is changed.`}</p>\n    <p>{`After this, please refresh the cache and go to `}<strong parentName=\"p\">{`System`}</strong>{` > Tools > `}<a parentName=\"p\" {...{\n        \"href\": \"https://docs.magento.com/m2/ce/user_guide/system/index-management.html\"\n      }}><strong parentName=\"a\">{`Index Management`}</strong></a>{` through the Admin to verify the custom indexer result.`}</p>\n    <p><span parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-wrapper\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"maxWidth\": \"914px\"\n        }\n      }}>{`\n      `}<span parentName=\"span\" {...{\n          \"className\": \"gatsby-resp-image-background-image\",\n          \"style\": {\n            \"paddingBottom\": \"81.5625%\",\n            \"position\": \"relative\",\n            \"bottom\": \"0\",\n            \"left\": \"0\",\n            \"display\": \"block\",\n            \"transition\": \"opacity 0.5s 0.5s\",\n            \"pointerEvents\": \"none\"\n          }\n        }}></span>{`\n  `}<picture parentName=\"span\">{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/commerce-php/static/e5f33cfcc82cbf15f4e758d7885d963d/cb523/custom-indexer-magento2.webp 320w\", \"/commerce-php/static/e5f33cfcc82cbf15f4e758d7885d963d/797b9/custom-indexer-magento2.webp 640w\", \"/commerce-php/static/e5f33cfcc82cbf15f4e758d7885d963d/11904/custom-indexer-magento2.webp 914w\"],\n            \"sizes\": \"(max-width: 914px) 100vw, 914px\",\n            \"type\": \"image/webp\"\n          }}></source>{`\n          `}<source parentName=\"picture\" {...{\n            \"srcSet\": [\"/commerce-php/static/e5f33cfcc82cbf15f4e758d7885d963d/cb69c/custom-indexer-magento2.jpg 320w\", \"/commerce-php/static/e5f33cfcc82cbf15f4e758d7885d963d/c08c5/custom-indexer-magento2.jpg 640w\", \"/commerce-php/static/e5f33cfcc82cbf15f4e758d7885d963d/7ba59/custom-indexer-magento2.jpg 914w\"],\n            \"sizes\": \"(max-width: 914px) 100vw, 914px\",\n            \"type\": \"image/jpeg\"\n          }}></source>{`\n          `}<img parentName=\"picture\" {...{\n            \"className\": \"gatsby-resp-image-image\",\n            \"src\": \"/commerce-php/static/e5f33cfcc82cbf15f4e758d7885d963d/7ba59/custom-indexer-magento2.jpg\",\n            \"alt\": \"Custom indexer modes\",\n            \"title\": \"Custom indexer modes\",\n            \"loading\": \"lazy\",\n            \"style\": {\n              \"width\": \"100%\",\n              \"height\": \"100%\",\n              \"margin\": \"0\",\n              \"verticalAlign\": \"middle\",\n              \"position\": \"absolute\",\n              \"opacity\": \"0\",\n              \"transition\": \"opacity 0.5s\",\n              \"color\": \"inherit\",\n              \"boxShadow\": \"inset 0px 0px 0px 400px none\",\n              \"top\": \"0\",\n              \"left\": \"0\"\n            }\n          }}></img>{`\n        `}</picture>{`\n    `}</span></p>\n    <p>{`Now when an order is placed, the Popular Products indexer calculates the sorting order of the products by popularity and stores this data in the index table, so that it can be used in product displaying logic.`}</p>\n    <p>{`Use the following command to reindex the custom indexer:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`bin/magento indexer:reindex merchandizing_popular\n`}</code></pre>\n    <p>{`Use the following command to invalidate the custom indexer:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`bin/magento indexer:reset merchandizing_popular\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"sourceRoot":""}