"use strict";(self.webpackChunkcommerce_php=self.webpackChunkcommerce_php||[]).push([[50872],{12460:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return p},default:function(){return u}});var o=t(87462),a=t(45987),m=(t(35776),t(3905)),i=t(91515);const r=["components"],p={},s=(c="InlineAlert",function(e){return console.warn("Component "+c+" was not imported, exported, or provided by MDXProvider as global scope"),(0,m.mdx)("div",e)});var c;const d={_frontmatter:p},l=i.Z;function u(e){let{components:n}=e,t=(0,a.Z)(e,r);return(0,m.mdx)(l,(0,o.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,m.mdx)("h1",{id:"customize-the-view-of-a-checkout-step"},"Customize the view of a checkout step"),(0,m.mdx)("p",null,"This topic contains the basic information about how to customize the view of an existing checkout step. In the Adobe Commerce and Magento Open Source application, checkout is implemented using UI components. You can customize each step by ",(0,m.mdx)("a",{parentName:"p",href:"#change-the-components-js-implementation-and-template"},"changing the JavaScript implementation or template")," for a component, ",(0,m.mdx)("a",{parentName:"p",href:"#add-the-new-component-to-the-checkout-page-layout"},"adding"),", ",(0,m.mdx)("a",{parentName:"p",href:"#disable-a-component"},"disabling"),", or ",(0,m.mdx)("a",{parentName:"p",href:"#remove-a-component"},"removing")," a component."),(0,m.mdx)("h2",{id:"change-the-components-js-implementation-and-template"},"Change the component's .js implementation and template"),(0,m.mdx)("p",null,"To change the ",(0,m.mdx)("inlineCode",{parentName:"p"},".js")," implementation and template used for components rendering, you need to declare the new files in the checkout page layout. To do this, take the following steps:"),(0,m.mdx)("ol",null,(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},"In your custom module directory, create the following new file: ",(0,m.mdx)("inlineCode",{parentName:"p"},"<your_module_dir>/view/frontend/layout/checkout_index_index.xml"),". (For your checkout customization to be applied correctly, your custom module should depend on the Magento_Checkout module.)")),(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},"In this file, add the following:"),(0,m.mdx)("pre",{parentName:"li"},(0,m.mdx)("code",{parentName:"pre",className:"language-xml"},'<page xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:View/Layout/etc/page_configuration.xsd">\n    <body>\n        <referenceBlock name="checkout.root">\n                <arguments>\n                    <argument name="jsLayout" xsi:type="array">\n                        \x3c!-- Your customization will be here --\x3e\n                        ...\n                    </argument>\n                </arguments>\n        </referenceBlock>\n    </body>\n</page>\n'))),(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},"In the ",(0,m.mdx)("inlineCode",{parentName:"p"},"<Magento_Checkout_module_dir>/view/frontend/layout/checkout_index_index.xml")," file, find the component that you need to customize. Copy the corresponding node and all parent nodes up to ",(0,m.mdx)("inlineCode",{parentName:"p"},"<argument>"),". There is no need to leave all the attributes and values of parent nodes, as you are not going to change them.")),(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},"Change the path to the component's ",(0,m.mdx)("inlineCode",{parentName:"p"},".js")," file, template or any other property."))),(0,m.mdx)("p",null,"Example:"),(0,m.mdx)("p",null,"The Magento_Shipping module adds a component rendered as a link to the Shipping Policy info to the Shipping step:"),(0,m.mdx)("p",null,(0,m.mdx)("inlineCode",{parentName:"p"},"<Magento_Shipping_module_dir>/view/frontend/layout/checkout_index_index.xml")," looks like following:"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-xml"},'<page xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:View/Layout/etc/page_configuration.xsd">\n    <body>\n        <referenceBlock name="checkout.root">\n            <arguments>\n                <argument name="jsLayout" xsi:type="array">\n                    <item name="components" xsi:type="array">\n                        <item name="checkout" xsi:type="array">\n                            <item name="children" xsi:type="array">\n                                <item name="steps" xsi:type="array">\n                                    <item name="children" xsi:type="array">\n                                        <item name="shipping-step" xsi:type="array">\n                                            <item name="children" xsi:type="array">\n                                                <item name="shippingAddress" xsi:type="array">\n                                                    <item name="children" xsi:type="array">\n                                                        <item name="before-shipping-method-form" xsi:type="array">\n                                                            <item name="children" xsi:type="array">\n                                                                <item name="shipping_policy" xsi:type="array">\n                                                                    <item name="component" xsi:type="string">Magento_Shipping/js/view/checkout/shipping/shipping-policy</item>\n                                                                </item>\n                                                            </item>\n                                                        </item>\n                                                    </item>\n                                                </item>\n                                            </item>\n                                        </item>\n                                    </item>\n                                </item>\n                            </item>\n                        </item>\n                    </item>\n                </argument>\n            </arguments>\n        </referenceBlock>\n    </body>\n</page>\n\n')),(0,m.mdx)("h2",{id:"add-the-new-component-to-the-checkout-page-layout"},"Add the new component to the checkout page layout"),(0,m.mdx)("p",null,"Any UI component is added in the ",(0,m.mdx)("inlineCode",{parentName:"p"},"checkout_index_index.xml")," similar to the way a ",(0,m.mdx)("a",{parentName:"p",href:"add-new-step.md#step-2-add-your-step-to-the-checkout-page-layout"},"checkout step component is added"),"."),(0,m.mdx)("p",null,"Make sure that you declare a component so that it is rendered correctly by the parent component. If a parent component is a general UI component (referenced by the ",(0,m.mdx)("inlineCode",{parentName:"p"},"uiComponent")," alias), its child components are rendered without any conditions. But if a parent component is an extension of a general UI components, then children rendering might be restricted in certain way. For example a component can render only children from a certain ",(0,m.mdx)("inlineCode",{parentName:"p"},"displayArea"),"."),(0,m.mdx)("h2",{id:"move-a-component"},"Move a component"),(0,m.mdx)("p",null,"To move any component on your checkout page, find the component (parent) where it needs to be placed, and paste your component as a child of the parent."),(0,m.mdx)("p",null,"The following example shows how to move the discount component to the order summary block, which will display on both shipping and billing steps."),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-xml"},'<page xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n            xsi:noNamespaceSchemaLocation="urn:magento:framework:View/Layout/etc/page_configuration.xsd">\n    <body>\n        <referenceBlock name="checkout.root">\n            <arguments>\n                <argument name="jsLayout" xsi:type="array">\n                    <item name="components" xsi:type="array">\n                        <item name="checkout" xsi:type="array">\n                            <item name="children" xsi:type="array">\n                                <item name="sidebar" xsi:type="array">\n                                    <item name="children" xsi:type="array">\n                                        <item name="summary" xsi:type="array">\n                                            <item name="children" xsi:type="array">\n                                                <item name="summary-discount" xsi:type="array">\n                                                    <item name="component" xsi:type="string">Magento_SalesRule/js/view/payment/discount</item>\n                                                    <item name="children" xsi:type="array">\n                                                        <item name="errors" xsi:type="array">\n                                                            <item name="sortOrder" xsi:type="string">0</item>\n                                                            <item name="component" xsi:type="string">Magento_SalesRule/js/view/payment/discount-messages</item>\n                                                            <item name="displayArea" xsi:type="string">messages</item>\n                                                        </item>\n                                                    </item>\n                                                </item>\n                                            </item>\n                                        </item>\n                                    </item>\n                                </item>\n                            </item>\n                        </item>\n                    </item>\n                </argument>\n            </arguments>\n        </referenceBlock>\n    </body>\n</page>\n')),(0,m.mdx)(s,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,m.mdx)("p",null,"Remember to ",(0,m.mdx)("a",{parentName:"p",href:"#disable-a-component"},"disable")," or ",(0,m.mdx)("a",{parentName:"p",href:"#remove-a-component"},"remove")," the component from its original location, or they will conflict with each other."),(0,m.mdx)("h3",{id:"order-summary-result"},"Order Summary Result"),(0,m.mdx)("p",null,(0,m.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"338px"}},"\n      ",(0,m.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"117.81249999999999%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,m.mdx)("picture",{parentName:"span"},"\n          ",(0,m.mdx)("source",{parentName:"picture",srcSet:["/commerce-php/static/90122347f7ded9010f6e297f0b3d4d13/5530d/discount_component.webp 320w","/commerce-php/static/90122347f7ded9010f6e297f0b3d4d13/5976e/discount_component.webp 338w"],sizes:"(max-width: 338px) 100vw, 338px",type:"image/webp"}),"\n          ",(0,m.mdx)("source",{parentName:"picture",srcSet:["/commerce-php/static/90122347f7ded9010f6e297f0b3d4d13/dd4a7/discount_component.png 320w","/commerce-php/static/90122347f7ded9010f6e297f0b3d4d13/74935/discount_component.png 338w"],sizes:"(max-width: 338px) 100vw, 338px",type:"image/png"}),"\n          ",(0,m.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/commerce-php/static/90122347f7ded9010f6e297f0b3d4d13/74935/discount_component.png",alt:"Discount Component",title:"Discount Component",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,m.mdx)("h2",{id:"disable-a-component"},"Disable a component"),(0,m.mdx)("p",null,"To disable the component in your ",(0,m.mdx)("inlineCode",{parentName:"p"},"checkout_index_index.xml")," use the following instructions:"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-xml"},'<item name="%the_component_to_be_disabled%" xsi:type="array">\n    <item name="config" xsi:type="array">\n        <item name="componentDisabled" xsi:type="boolean">true</item>\n    </item>\n</item>\n')),(0,m.mdx)("h2",{id:"remove-a-component"},"Remove a component"),(0,m.mdx)("p",null,"To keep a component from being rendered, create a layout processor. A layout processor consists of a class, implementing\nthe ",(0,m.mdx)("inlineCode",{parentName:"p"},"\\Magento\\Checkout\\Block\\Checkout\\LayoutProcessorInterface")," interface, and thus a ",(0,m.mdx)("inlineCode",{parentName:"p"},"LayoutProcessorInterface::process($jsLayout)")," method."),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-php"},"<?php\n\nnamespace <Vendor>\\<Module>\\Block\\Checkout;\n\nuse Magento\\Checkout\\Block\\Checkout\\LayoutProcessorInterface;\n\nclass OurLayoutProcessor implements LayoutProcessorInterface\n{\n    /**\n     * @param array $jsLayout\n     * @return array\n     */\n    public function process($jsLayout)\n    {\n        //%path_to_target_node% is the path to the component's node in checkout_index_index.\n        unset($jsLayout['components']['checkout']['children']['steps'][%path_to_target_node%]);\n        return $jsLayout;\n    }\n}\n")),(0,m.mdx)("p",null,"Once created, add the layout processor through Dependency Injection (DI)."),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0"?>\n<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">\n    <type name="Magento\\Checkout\\Block\\Onepage">\n        <arguments>\n            <argument name="layoutProcessors" xsi:type="array">\n                <item name="ourLayoutProcessor" xsi:type="object"><Vendor>\\<Module>\\Block\\Checkout\\OurLayoutProcessor</item>\n            </argument>\n        </arguments>\n    </type>\n</config>\n')),(0,m.mdx)("p",null,"To use this sample in your code, replace the ",(0,m.mdx)("inlineCode",{parentName:"p"},"%path_to_target_node%")," placeholder with real value."),(0,m.mdx)(s,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,m.mdx)("p",null,"Disable vs remove a component: A disabled component is loaded but not rendered. If you remove a component, it is removed and not loaded."))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-tutorials-frontend-custom-checkout-customize-view-md-9a977a479fe796ab61d0.js.map