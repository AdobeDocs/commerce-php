{"version":3,"file":"component---src-pages-developer-components-view-models-md-313c7ae4abc04d7f0165.js","mappings":"sMAUsBA,E,wEAFTC,EAAe,GAOtBC,GALgBF,EAKY,cALJ,SAA6BG,GAEzD,OADAC,QAAQC,KAAK,aAAeL,EAAO,4EAC5B,eAASG,KAIZG,EAAc,CAClBL,aAAAA,GAEIM,EAAYC,EAAAA,EACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGP,GACF,YACD,OAAO,SAACI,GAAD,UAAeD,EAAiBH,EAAhC,CAAuCO,WAAYA,EAAYC,QAAQ,eAG5E,6PACA,eACE,GAAM,2BADR,4BAGA,0KACA,SAACT,EAAD,CAAaU,QAAQ,OAAOC,MAAM,OAAOF,QAAQ,iBACjD,yOAA0N,cAAGG,WAAW,IACpO,KAAQ,6GAD8M,0BAA1N,MAGA,SAACZ,EAAD,CAAaU,QAAQ,OAAOC,MAAM,OAAOF,QAAQ,iBACjD,oHACA,eACE,GAAM,4BADR,6BAGA,4LAA6K,uBAAYG,WAAW,KAAvB,kBAA7K,iGACA,qBAAK,iBAAMA,WAAW,MAClB,UAAa,gBADZ,6PAQL,sGAAuF,uBAAYA,WAAW,KAAvB,0EAAvF,MACA,qBAAK,iBAAMA,WAAW,MAClB,UAAa,gBADZ,4OAQL,+EAAgE,uBAAYA,WAAW,KAAvB,iEAAhE,mBACA,qBAAK,iBAAMA,WAAW,MAClB,UAAa,gBADZ,oOAYL,kGACA,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBADZ,oMAWL,eACE,GAAM,2BADR,4BAGA,oBACE,eAAIA,WAAW,OAAK,cAAGA,WAAW,KAC9B,KAAQ,iHACR,MAAS,yBAFO,SAApB,WAG6B,uBAAYA,WAAW,MAAvB,cAH7B,2EAKF,iFAAkE,uBAAYA,WAAW,KAAvB,iEAAlE,kBACA,2EAA4D,uBAAYA,WAAW,KAAvB,uBAA5D,6CACA,qBAAK,iBAAMA,WAAW,MAClB,UAAa,gBADZ,8YASL,0EAA2D,uBAAYA,WAAW,KAAvB,iEAA3D,2CACA,mDAAoC,uBAAYA,WAAW,KAAvB,iEAApC,sBACA,qBAAK,iBAAMA,WAAW,MAClB,UAAa,gBADZ,shCA0CL,0FAA2E,uBAAYA,WAAW,KAAvB,6EAA3E,eACA,qBAAK,iBAAMA,WAAW,MAClB,UAAa,gBADZ,6QAaTL,EAAWM,gBAAiB","sources":["webpack://commerce-php/./src/pages/developer/components/view-models.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/commerce-php/commerce-php/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`A view model is an abstraction of the view exposing public properties and commands. It allows developers to offload features and business logic from block classes into separate classes that are easier to maintain, test, and reuse.`}</p>\n    <h2 {...{\n      \"id\": \"when-to-use-view-models\"\n    }}>{`When to use view models`}</h2>\n    <p>{`Use this approach anytime you need to inject functionality into template files and your code does not need to be backwards compatible with Magento.`}</p>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`View models are available in Adobe Commerce and Magento Open Source 2.2 and later. If your code must be compatible with older versions of Magento, consider adding your logic to blocks. For more information, see `}<a parentName=\"p\" {...{\n        \"href\": \"https://developer.adobe.com/commerce/contributor/guides/code-contributions/backward-compatibility-policy/\"\n      }}>{`Backward compatibility`}</a>{`.`}</p>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`The use of helpers in templates is discouraged. It is recommended to use view models instead.`}</p>\n    <h2 {...{\n      \"id\": \"how-to-write-view-models\"\n    }}>{`How to write view models`}</h2>\n    <p>{`View models can be used by passing the view model class as an argument to a template's block in the page layout configuration file. In the following example snippet, `}<inlineCode parentName=\"p\">{`MyNewViewModel`}</inlineCode>{` is the view model class of the ExampleCorp_Catalog module passed as an argument to a block.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<block name=\"examplecorp.new.viewmodel\" template=\"ExampleCorp_Catalog::example.phtml\">\n    <arguments>\n        <argument name=\"view_model\" xsi:type=\"object\">ExampleCorp\\\\Catalog\\\\ViewModel\\\\MyNewViewModel</argument>\n    </arguments>\n</block>\n`}</code></pre>\n    <p>{`In the following example, the same view model is used with an existing block in `}<inlineCode parentName=\"p\">{`Magento/Checkout/view/frontend/layout/checkout_cart_item_renderers.xml`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<referenceBlock name=\"checkout.cart.item.renderers.default\">\n    <arguments>\n        <argument name=\"view_model\" xsi:type=\"object\">ExampleCorp\\\\Catalog\\\\ViewModel\\\\MyNewViewModel</argument>\n    </arguments>\n</referenceBlock>\n`}</code></pre>\n    <p>{`The view model class must always implement the interface `}<inlineCode parentName=\"p\">{`\\\\Magento\\\\Framework\\\\View\\\\Element\\\\Block\\\\ArgumentInterface`}</inlineCode>{`. For example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`namespace ExampleCorp\\\\Catalog\\\\ViewModel;\n\nclass MyNewViewModel implements \\\\Magento\\\\Framework\\\\View\\\\Element\\\\Block\\\\ArgumentInterface\n{\n    public function getTitle()\n    {\n      return 'Hello World';\n    }\n}\n`}</code></pre>\n    <p>{`You can access the public methods for the view model class in the template:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-html\"\n      }}>{`<?php\n\n/** @var $viewModel \\\\ExampleCorp\\\\Catalog\\\\ViewModel\\\\MyNewViewModel */\n\n$viewModel = $block->getViewModel();\n\n?>\n<h1><?= $block->escapeHtml($viewModel->getTitle()); ?></h1>\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"examples-of-view-models\"\n    }}>{`Examples of view models`}</h2>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://github.com/magento/magento2/blob/2.3.3/app/code/Magento/Theme/view/frontend/layout/default.xml#L43-L45\",\n          \"title\": \"view_model definition\"\n        }}>{`Theme`}</a>{`. This `}<inlineCode parentName=\"li\">{`view_model`}</inlineCode>{` is injected into a template to return the target store redirect url.`}</li>\n    </ul>\n    <p>{`The following is an example of view model usage within the `}<inlineCode parentName=\"p\">{`Magento/Catalog/view/frontend/layout/catalog_product_view.xml`}</inlineCode>{` layout file.`}</p>\n    <p>{`The view model class is passed as an argument to the `}<inlineCode parentName=\"p\">{`product.info.upsell`}</inlineCode>{` block in the layout configuration file:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<block class=\"Magento\\\\Catalog\\\\Block\\\\Product\\\\ProductList\\\\Upsell\" name=\"product.info.upsell\" template=\"Magento_Catalog::product/list/items.phtml\">\n    <arguments>\n        <argument name=\"type\" xsi:type=\"string\">upsell</argument>\n        <argument name=\"view_model\" xsi:type=\"object\">Magento\\\\Catalog\\\\ViewModel\\\\Product\\\\Listing\\\\PreparePostData</argument>\n    </arguments>\n</block>\n`}</code></pre>\n    <p>{`The following is an example of the view model class `}<inlineCode parentName=\"p\">{`Magento/Catalog/ViewModel/Product/Listing/PreparePostData.php`}</inlineCode>{` implementation in the catalog module.`}</p>\n    <p>{`The class must implement the `}<inlineCode parentName=\"p\">{`\\\\Magento\\\\Framework\\\\View\\\\Element\\\\Block\\\\ArgumentInterface`}</inlineCode>{` interface class.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`namespace Magento\\\\Catalog\\\\ViewModel\\\\Product\\\\Listing;\n\nuse Magento\\\\Framework\\\\View\\\\Element\\\\Block\\\\ArgumentInterface;\nuse Magento\\\\Framework\\\\App\\\\ActionInterface;\nuse Magento\\\\Framework\\\\Url\\\\Helper\\\\Data as UrlHelper;\n\n/**\n * Check is available add to compare.\n */\nclass PreparePostData implements ArgumentInterface\n{\n    /**\n     * @var UrlHelper\n     */\n    private $urlHelper;\n\n    /**\n     * @param UrlHelper $urlHelper\n     */\n    public function __construct(UrlHelper $urlHelper)\n    {\n        $this->urlHelper = $urlHelper;\n    }\n\n    /**\n     * Wrapper for the PostHelper::getPostData()\n     *\n     * @param string $url\n     * @param array $data\n     * @return array\n     */\n    public function getPostData(string $url, array $data = []):array\n    {\n        if (!isset($data[ActionInterface::PARAM_NAME_URL_ENCODED])) {\n            $data[ActionInterface::PARAM_NAME_URL_ENCODED] = $this->urlHelper->getEncodedUrl();\n        }\n        return ['action' => $url, 'data' => $data];\n    }\n}\n`}</code></pre>\n    <p>{`The following is an example of the view model initialization in the `}<inlineCode parentName=\"p\">{`app/code/Magento/Catalog/view/frontend/templates/product/list/items.phtml`}</inlineCode>{` template.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-php\"\n      }}>{`/** @var $viewModel /Magento/Catalog/ViewModel/Product/Listing/PreparePostData */\n$viewModel = $block->getViewModel();\n$postArray = $viewModel->getPostData(\n    $block->escapeUrl($block->getAddToCartUrl($_item)),\n    ['product' => $_item->getEntityId()]\n);\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["name","_frontmatter","InlineAlert","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","variant","slots","parentName","isMDXComponent"],"sourceRoot":""}