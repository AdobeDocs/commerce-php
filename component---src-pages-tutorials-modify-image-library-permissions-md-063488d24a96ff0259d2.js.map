{"version":3,"file":"component---src-pages-tutorials-modify-image-library-permissions-md-063488d24a96ff0259d2.js","mappings":"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","sources":["webpack://commerce-php/./src/pages/tutorials/modify-image-library-permissions.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/commerce-php/commerce-php/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"modify-media-library-folder-permissions\"\n    }}>{`Modify media library folder permissions`}</h1>\n    <p>{`The media gallery gives admins the ability to upload image files in specific folders. The Storage class for images in the CMS module manages image file uploads, file retrievals, and directory creation.`}</p>\n    <p>{`Due to code changes, how you extend your media gallery depends on your version of Adobe Commerce or Magento Open Source:`}</p>\n    <p>{`Once you've listed both product names, you can call the product `}<inlineCode parentName=\"p\">{`Commerce`}</inlineCode>{`.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Commerce versions `}<inlineCode parentName=\"li\">{`2.4.3-p1`}</inlineCode>{` and later`}</li>\n      <li parentName=\"ul\">{`Commerce versions `}<inlineCode parentName=\"li\">{`2.4.0-2.4.3`}</inlineCode></li>\n    </ul>\n    <h2 {...{\n      \"id\": \"commerce-versions-243-p1-and-higher\"\n    }}>{`Commerce versions 2.4.3-p1 and higher`}</h2>\n    <p>{`In versions 2.4.3-p1 and higher, you must modify media library folder permissions in a 'config.xml' file.`}</p>\n    <p>{`For security purposes, Commerce provides media gallery access to contents in specific folders. The configuration path `}<inlineCode parentName=\"p\">{`system/media_storage_configuration/allowed_resources/media_gallery_image_folders`}</inlineCode>{` in `}<inlineCode parentName=\"p\">{`config.xml`}</inlineCode>{` defines the \"Media Gallery Allowed\" folders.`}</p>\n    <p>{`By default, Commerce allows the media gallery access to the following two directories under `}<inlineCode parentName=\"p\">{`/pub/media`}</inlineCode>{`:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`catalog/category`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`wysiwyg`}</inlineCode></li>\n    </ul>\n    <p>{`In this tutorial, you will learn how to extend \"Media Gallery Allowed\" folders using the `}<inlineCode parentName=\"p\">{`config.xml`}</inlineCode>{` file.`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Create a `}<inlineCode parentName=\"p\">{`config.xml`}</inlineCode>{` file.`}</p>\n        <p parentName=\"li\">{`If your module does not have one, create a `}<inlineCode parentName=\"p\">{`config.xml`}</inlineCode>{` file under the `}<inlineCode parentName=\"p\">{`etc`}</inlineCode>{` directory.`}</p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Add a new \"Media Gallery Allowed\" folder:`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{\n            \"className\": \"language-xml\"\n          }}>{`<system>\n   <media_storage_configuration>\n      <allowed_resources>\n         <media_gallery_image_folders>\n            <!-- new \"Media Gallery Allowed\" folders -->\n            <my_image_folder>custom_folder_name</my_image_folder>\n            <my_catalog_image_folder>catalog/custom_folder_name</my_catalog_image_folder>\n         </media_gallery_image_folders>\n      </allowed_resources>\n   </media_storage_configuration>\n</system>\n`}</code></pre>\n      </li>\n    </ol>\n    <h2 {...{\n      \"id\": \"commerce-versions-240---243\"\n    }}>{`Commerce versions 2.4.0 - 2.4.3`}</h2>\n    <p>{`In versions 2.4.0 - 2.4.3, you must modify media library folder permissions in a `}<inlineCode parentName=\"p\">{`di.xml`}</inlineCode>{` file. If you subsequently upgrade to version 2.4.3-p1 or higher, you must implement the `}<inlineCode parentName=\"p\">{`config.xml`}</inlineCode>{` method.`}</p>\n    <p>{`For security purposes, Commerce does not provide Media Library access to contents in specific folders. This configuration is set in the CMS module's `}<inlineCode parentName=\"p\">{`di.xml`}</inlineCode>{` file and injected into the `}<inlineCode parentName=\"p\">{`Storage`}</inlineCode>{` class constructor.`}</p>\n    <p>{`By default, Commerce allows Media Library access to all directories under `}<inlineCode parentName=\"p\">{`/pub/media`}</inlineCode>{` except the following:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`captcha`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`catalog/product`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`customer`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`downloadable`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`import`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`theme`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`theme_customization`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`tmp`}</inlineCode></li>\n    </ul>\n    <p>{`In this tutorial, you will learn how to specify Media Library view permissions for folders using the `}<inlineCode parentName=\"p\">{`di.xml`}</inlineCode>{` file.`}</p>\n    <h3 {...{\n      \"id\": \"step-1-create-a-dixml-file\"\n    }}>{`Step 1: Create a `}<inlineCode parentName=\"h3\">{`di.xml`}</inlineCode>{` file`}</h3>\n    <p>{`If your module does not have one, create a `}<a parentName=\"p\" {...{\n        \"href\": \"../development/build/dependency-injection-file.md\"\n      }}><inlineCode parentName=\"a\">{`di.xml`}</inlineCode></a>{` file under the `}<inlineCode parentName=\"p\">{`etc`}</inlineCode>{` directory.`}</p>\n    <h3 {...{\n      \"id\": \"step-2-specify-the-class-type-configuration\"\n    }}>{`Step 2: Specify the class type configuration`}</h3>\n    <p>{`To work with the constructor arguments for the `}<inlineCode parentName=\"p\">{`Storage`}</inlineCode>{` class, create a new `}<inlineCode parentName=\"p\">{`type`}</inlineCode>{` element with the `}<inlineCode parentName=\"p\">{`name`}</inlineCode>{` property set to `}<inlineCode parentName=\"p\">{`Magento\\\\Cms\\\\Model\\\\Wysiwyg\\\\Images\\\\Storage`}</inlineCode>{` in the `}<inlineCode parentName=\"p\">{`di.xml`}</inlineCode>{` file.`}</p>\n    <p>{`Under the `}<inlineCode parentName=\"p\">{`type`}</inlineCode>{` element, create an `}<inlineCode parentName=\"p\">{`arguments`}</inlineCode>{` element.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<type name=\"Magento\\\\Cms\\\\Model\\\\Wysiwyg\\\\Images\\\\Storage\">\n    <arguments>\n    </arguments>\n</type>\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"step-3-specify-an-argument-name\"\n    }}>{`Step 3: Specify an argument name`}</h2>\n    <p>{`To change the content of the `}<inlineCode parentName=\"p\">{`dirs`}</inlineCode>{` argument provided to the constructor, create a new `}<inlineCode parentName=\"p\">{`argument`}</inlineCode>{` array element with the name `}<inlineCode parentName=\"p\">{`dirs`}</inlineCode>{` under `}<inlineCode parentName=\"p\">{`arguments`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<type name=\"Magento\\\\Cms\\\\Model\\\\Wysiwyg\\\\Images\\\\Storage\">\n    <arguments>\n        <argument name=\"dirs\" xsi:type=\"array\">\n        </argument>\n    </arguments>\n</type>\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"step-4-specify-the-directory-to-exclude-or-include\"\n    }}>{`Step 4: Specify the directory to exclude or include`}</h3>\n    <p>{`Add entries to the `}<inlineCode parentName=\"p\">{`exclude`}</inlineCode>{` array to extend the list of view-restricted directories.`}</p>\n    <p>{`The following configuration restricts Media Library access to content under `}<inlineCode parentName=\"p\">{`pub/media/private-directory/`}</inlineCode>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<type name=\"Magento\\\\Cms\\\\Model\\\\Wysiwyg\\\\Images\\\\Storage\">\n    <arguments>\n        <argument name=\"dirs\" xsi:type=\"array\">\n            <item name=\"exclude\" xsi:type=\"array\">\n                <item name=\"private-directory\" xsi:type=\"array\">\n                    <item name=\"regexp\" xsi:type=\"boolean\">true</item>\n                    <item name=\"name\" xsi:type=\"string\">pub[/\\\\\\\\]+media[/\\\\\\\\]+private-directory[/\\\\\\\\]*$</item>\n                </item>\n            </item>\n        </argument>\n    </arguments>\n</type>\n`}</code></pre>\n    <p>{`Add entries to the `}<inlineCode parentName=\"p\">{`include`}</inlineCode>{` array to override directory restrictions.`}</p>\n    <p>{`The following configuration overrides the default directory restriction for the `}<inlineCode parentName=\"p\">{`pub/media/downloadable/`}</inlineCode>{` directory:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<type name=\"Magento\\\\Cms\\\\Model\\\\Wysiwyg\\\\Images\\\\Storage\">\n    <arguments>\n        <argument name=\"dirs\" xsi:type=\"array\">\n            <item name=\"include\" xsi:type=\"array\">\n                <item name=\"downloadable\" xsi:type=\"array\">\n                    <item name=\"regexp\" xsi:type=\"boolean\">true</item>\n                    <item name=\"name\" xsi:type=\"string\">pub[/\\\\\\\\]+media[/\\\\\\\\]+downloadable[/\\\\\\\\]*$</item>\n                </item>\n            </item>\n        </argument>\n    </arguments>\n</type>\n`}</code></pre>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"sourceRoot":""}