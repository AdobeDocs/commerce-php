{"version":3,"file":"component---src-pages-development-components-declarative-schema-configuration-md-4ea4119b9167458e4296.js","mappings":"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","sources":["webpack://commerce-php/./src/pages/development/components/declarative-schema/configuration.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/commerce-php/commerce-php/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"configure-declarative-schema\"\n    }}>{`Configure declarative schema`}</h1>\n    <p>{`Before Adobe Commerce and Magento Open Source 2.3, extension developers were required to write code (PHP scripts) to change the database schema. The following types of scripts existed before 2.3:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`InstallData and InstallSchema scripts, which are executed the first time a module is installed.`}</li>\n      <li parentName=\"ul\">{`UpgradeData and UpgradeSchema incremental scripts, which supplement an existing module schema.`}</li>\n      <li parentName=\"ul\">{`Recurring scripts, which are executed each time you install or upgrade Magento.`}</li>\n    </ul>\n    <p>{`Each script iteratively adds changes. During the installation process, upgrade scripts apply only those changes that have not been applied yet. For example, if you have a module with version 2.1.8 installed and the latest version is 2.1.11, then the upgrade script changes for 2.1.9, 2.1.10, and 2.1.11 will be applied, in order, when you upgrade to 2.1.11. Each upgrade script is responsible for checking the required version for each change to apply. The Adobe Commerce or Magento Open Source installation only knows that a module has an upgrade script, not what versions it affected. That procedure is called `}<em parentName=\"p\">{`migration setup`}</em>{` or `}<em parentName=\"p\">{`migration scripts`}</em>{`.`}</p>\n    <p>{`The main disadvantage of this approach is that the application applies changes blindly. For example, in one version a new database column might be introduced, only to be removed in the next. `}<em parentName=\"p\">{`Declarative setup`}</em>{` eliminates this type of unnecessary work.`}</p>\n    <p>{`Declarative setup is based on database structure declarations, and is used in projects such as `}<a parentName=\"p\" {...{\n        \"href\": \"http://www.doctrine-project.org/\"\n      }}>{`Doctrine`}</a>{`. Schema files declare what the database structure should be, and the application determines the differences between the current table structure and what it should be. These differences can be represented with atomic SQL operations.`}</p>\n    <p>{`The application prioritizes the declarative schema and executes the declarative install schemas before the `}<a parentName=\"p\" {...{\n        \"href\": \"patches.md\"\n      }}>{`data and schema patches`}</a>{`.`}</p>\n    <p>{`The following example, extracted from the `}<inlineCode parentName=\"p\">{`Catalog/etc/db_schema.xml`}</inlineCode>{` file, defines the `}<inlineCode parentName=\"p\">{`catalog_product_entity_datetime`}</inlineCode>{` table:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<table name=\"catalog_product_entity_datetime\" resource=\"default\" engine=\"innodb\"\n           comment=\"Catalog Product Datetime Attribute Backend Table\">\n    <column xsi:type=\"int\" name=\"value_id\" unsigned=\"false\" nullable=\"false\" identity=\"true\" comment=\"Value ID\"/>\n    <column xsi:type=\"smallint\" name=\"attribute_id\" unsigned=\"true\" nullable=\"false\" identity=\"false\" default=\"0\" comment=\"Attribute ID\"/>\n    <column xsi:type=\"smallint\" name=\"store_id\" unsigned=\"true\" nullable=\"false\" identity=\"false\" default=\"0\" comment=\"Store ID\"/>\n    <column xsi:type=\"int\" name=\"entity_id\" unsigned=\"true\" nullable=\"false\" identity=\"false\" default=\"0\" comment=\"Entity ID\"/>\n    <column xsi:type=\"datetime\" name=\"value\" on_update=\"false\" nullable=\"true\" comment=\"Value\"/>\n    <constraint xsi:type=\"primary\" referenceId=\"PRIMARY\">\n        <column name=\"value_id\"/>\n    </constraint>\n    <constraint xsi:type=\"foreign\" referenceId=\"CAT_PRD_ENTT_DTIME_ATTR_ID_EAV_ATTR_ATTR_ID\" table=\"catalog_product_entity_datetime\" column=\"attribute_id\" referenceTable=\"eav_attribute\" referenceColumn=\"attribute_id\" onDelete=\"CASCADE\"/>\n    <constraint xsi:type=\"foreign\" referenceId=\"CAT_PRD_ENTT_DTIME_ENTT_ID_CAT_PRD_ENTT_ENTT_ID\" table=\"catalog_product_entity_datetime\" column=\"entity_id\" referenceTable=\"catalog_product_entity\" referenceColumn=\"entity_id\" onDelete=\"CASCADE\"/>\n    <constraint xsi:type=\"foreign\" referenceId=\"CATALOG_PRODUCT_ENTITY_DATETIME_STORE_ID_STORE_STORE_ID\" table=\"catalog_product_entity_datetime\" column=\"store_id\" referenceTable=\"store\" referenceColumn=\"store_id\" onDelete=\"CASCADE\"/>\n    <constraint xsi:type=\"unique\" referenceId=\"CATALOG_PRODUCT_ENTITY_DATETIME_ENTITY_ID_ATTRIBUTE_ID_STORE_ID\">\n        <column name=\"entity_id\"/>\n        <column name=\"attribute_id\"/>\n        <column name=\"store_id\"/>\n    </constraint>\n    <index referenceId=\"CATALOG_PRODUCT_ENTITY_DATETIME_ATTRIBUTE_ID\" indexType=\"btree\">\n        <column name=\"attribute_id\"/>\n    </index>\n    <index referenceId=\"CATALOG_PRODUCT_ENTITY_DATETIME_STORE_ID\" indexType=\"btree\">\n        <column name=\"store_id\"/>\n    </index>\n</table>\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"db_schema-structure\"\n    }}><inlineCode parentName=\"h2\">{`db_schema`}</inlineCode>{` structure`}</h2>\n    <p>{`The `}<inlineCode parentName=\"p\">{`<Module_Vendor>/<Module_Name>/etc/db_schema.xml`}</inlineCode>{` file declares a module's database structure.`}</p>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`If you have enabled `}<a parentName=\"p\" {...{\n        \"href\": \"https://devdocs.magento.com/guides/v2.4/config-guide/cli/config-cli-subcommands-urn.html\"\n      }}>{`URN highlighting`}</a>{`, you can use the PhpStorm autocomplete feature after choosing a node's `}<inlineCode parentName=\"p\">{`xsi:type`}</inlineCode>{`. This will also allow you to view which attributes are available on each line of your `}<inlineCode parentName=\"p\">{`db_schema.xml`}</inlineCode>{` file`}</p>\n    <h3 {...{\n      \"id\": \"top-level-node\"\n    }}>{`Top-level node`}</h3>\n    <p>{`The `}<inlineCode parentName=\"p\">{`schema`}</inlineCode>{` node defines the location of the `}<inlineCode parentName=\"p\">{`schema.xsd`}</inlineCode>{` file.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<schema xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:noNamespaceSchemaLocation=\"urn:magento:framework:Setup/Declaration/Schema/etc/schema.xsd\">\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"table-node\"\n    }}><inlineCode parentName=\"h3\">{`table`}</inlineCode>{` node`}</h3>\n    <p>{`Each `}<inlineCode parentName=\"p\">{`db_schema.xml`}</inlineCode>{` file should contain one or more `}<inlineCode parentName=\"p\">{`table`}</inlineCode>{` nodes. Each table node represents a table in the database.\nA table node can contain the following attributes:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Attribute`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`name`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The name of the table`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`engine`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`SQL engine. This value must be `}<inlineCode parentName=\"td\">{`innodb`}</inlineCode>{` or `}<inlineCode parentName=\"td\">{`memory`}</inlineCode>{`.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`resource`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The database shard on which to install the table. This value must be `}<inlineCode parentName=\"td\">{`default`}</inlineCode>{`, `}<inlineCode parentName=\"td\">{`checkout`}</inlineCode>{`, or `}<inlineCode parentName=\"td\">{`sales`}</inlineCode>{`.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`comment`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Table comment`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`A `}<inlineCode parentName=\"p\">{`table`}</inlineCode>{` node can contain three types of subnodes:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`column`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`constraint`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`index`}</inlineCode></li>\n    </ul>\n    <h4 {...{\n      \"id\": \"column-subnode\"\n    }}><inlineCode parentName=\"h4\">{`column`}</inlineCode>{` subnode`}</h4>\n    <p>{`The `}<inlineCode parentName=\"p\">{`column`}</inlineCode>{` subnode defines a column in a table. Each column requires its own declaration.`}</p>\n    <p>{`A column can have the following attributes:`}</p>\n    <table>\n\t<tr>\n\t\t<th>Attribute</th>\n\t\t<th>Description</th>\n\t</tr>\n\t<tr>\n\t\t<td><inlineCode className=\"spectrum-Body--sizeS\">xsi:type</inlineCode></td>\n\t\t<td>\n\t\t\t<p>Specifies the column type. Must be one of the following:</p>\n\t\t\t<ul>\n\t\t\t\t<li><inlineCode className=\"spectrum-Body--sizeS\">blob</inlineCode> (includes blob, mediumblob, longblob)</li>\n\t\t\t\t<li><inlineCode className=\"spectrum-Body--sizeS\">boolean</inlineCode></li>\n\t\t\t\t<li><inlineCode className=\"spectrum-Body--sizeS\">date</inlineCode></li>\n\t\t\t\t<li><inlineCode className=\"spectrum-Body--sizeS\">datetime</inlineCode></li>\n\t\t\t\t<li><inlineCode className=\"spectrum-Body--sizeS\">decimal</inlineCode></li>\n\t\t\t\t<li><inlineCode className=\"spectrum-Body--sizeS\">float</inlineCode></li>\n\t\t\t\t<li><inlineCode className=\"spectrum-Body--sizeS\">int</inlineCode> (includes smallint, bigint, tinyint)</li>\n\t\t\t\t<li><inlineCode className=\"spectrum-Body--sizeS\">json</inlineCode></li>\n\t\t\t\t<li><inlineCode className=\"spectrum-Body--sizeS\">real</inlineCode> (includes decimal, float, double, real)</li>\n\t\t\t\t<li><inlineCode className=\"spectrum-Body--sizeS\">smallint</inlineCode></li>\n\t\t\t\t<li><inlineCode className=\"spectrum-Body--sizeS\">text</inlineCode> (includes text, mediumtext, longtext)</li>\n\t\t\t\t<li><inlineCode className=\"spectrum-Body--sizeS\">timestamp</inlineCode></li>\n\t\t\t\t<li><inlineCode className=\"spectrum-Body--sizeS\">varbinary</inlineCode></li>\n\t\t\t\t<li><inlineCode className=\"spectrum-Body--sizeS\">varchar</inlineCode></li>\n\t\t\t</ul>\n\t\t</td>\n\t</tr>\n\t<tr>\n\t\t<td><inlineCode className=\"spectrum-Body--sizeS\">default</inlineCode></td>\n\t\t<td>Initializes the column with the specified default value. The default value should have the same datatype defined in xsi:type.</td>\n\t</tr>\n\t<tr>\n\t\t<td><inlineCode className=\"spectrum-Body--sizeS\">disabled</inlineCode></td>\n\t\t<td>Disables or deletes the declared table, column, constraint, or index.</td>\n\t</tr>\n\t<tr>\n\t\t<td><inlineCode className=\"spectrum-Body--sizeS\">identity</inlineCode></td>\n\t\t<td>Indicates whether a column is auto incremented.</td>\n\t</tr>\n\t<tr>\n\t\t<td><inlineCode className=\"spectrum-Body--sizeS\">length</inlineCode></td>\n\t\t<td>Specifies the length of a column. Can be used for <inlineCode className=\"spectrum-Body--sizeS\">char</inlineCode>, <inlineCode className=\"spectrum-Body--sizeS\">varchar</inlineCode>, and <inlineCode className=\"spectrum-Body--sizeS\">varbinary types</inlineCode>.</td>\n\t</tr>\n\t<tr>\n\t\t<td><inlineCode className=\"spectrum-Body--sizeS\">nullable</inlineCode></td>\n\t\t<td>Indicates whether column can be nullable.</td>\n\t</tr>\n\t<tr>\n\t\t<td><inlineCode className=\"spectrum-Body--sizeS\">onCreate</inlineCode></td>\n\t\t<td>This is a DDL trigger that allows you to move data from an existing column to a newly created column. This trigger works only when a column is created.</td>\n\t</tr>\n\t<tr>\n\t\t<td><inlineCode className=\"spectrum-Body--sizeS\">padding</inlineCode></td>\n\t\t<td>The size of an integer column.</td>\n\t</tr>\n\t<tr>\n\t\t<td><inlineCode className=\"spectrum-Body--sizeS\">precision</inlineCode></td>\n\t\t<td>The number of allowed digits in a real data type.</td>\n\t</tr>\n\t<tr>\n\t\t<td><inlineCode className=\"spectrum-Body--sizeS\">scale</inlineCode></td>\n\t\t<td>The number of digits after the decimal in a real data type.</td>\n\t</tr>\n\t<tr>\n\t\t<td><inlineCode className=\"spectrum-Body--sizeS\">unsigned</inlineCode></td>\n\t\t<td>For numeric data types, specifies whether the column can contain positive and negative values or only positive values.</td>\n\t</tr>\n    </table>\n    <p>{`For more information about each type, refer to the annotations in the corresponding XSD file.`}</p>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://devdocs.magento.com/guides/v2.4/install-gde/composer.html\"\n        }}>{`Composer`}</a>{` or `}<a parentName=\"li\" {...{\n          \"href\": \"https://devdocs.magento.com/guides/v2.4/install-gde/prereq/dev_install.html\"\n        }}>{`GitHub`}</a>{` installation: `}<inlineCode parentName=\"li\">{`<Application_root_directory/lib/internal/Magento/Framework/Setup/Declaration/Schema/etc`}</inlineCode></li>\n    </ul>\n    <p>{`Example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<column xsi:type=\"int\" name=\"entity_id\" unsigned=\"true\" nullable=\"false\" identity=\"true\" comment=\"Credit ID\"/>\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"constraint-subnode\"\n    }}><inlineCode parentName=\"h4\">{`constraint`}</inlineCode>{` subnode`}</h4>\n    <p>{`The `}<inlineCode parentName=\"p\">{`constraint`}</inlineCode>{` subnode always contains the following attributes:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Attribute`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`type`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`One of `}<inlineCode parentName=\"td\">{`primary`}</inlineCode>{`, `}<inlineCode parentName=\"td\">{`unique`}</inlineCode>{`, or `}<inlineCode parentName=\"td\">{`foreign`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`referenceId`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`A custom identifier that is used only for relation mapping in the scope of `}<inlineCode parentName=\"td\">{`db_schema.xml`}</inlineCode>{` files. The real entity in the database has a system-generated name. The most convenient way to set the value of this attribute is to use the value that is written in the module's `}<inlineCode parentName=\"td\">{`db_schema_whitelist.json`}</inlineCode>{`  file when you `}<a parentName=\"td\" {...{\n              \"href\": \"migration-scripts.md#create-a-schema-whitelist\"\n            }}>{`run the `}<inlineCode parentName=\"a\">{`generate-whitelist`}</inlineCode>{` command`}</a>{`.`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`The `}<inlineCode parentName=\"p\">{`primary`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`unique`}</inlineCode>{` constraints are called \"internal\" constraints, because they can be applied only to the scope of the table where they are created. Internal constraints define one or more `}<inlineCode parentName=\"p\">{`column`}</inlineCode>{` subnodes. Each subnode defines a constrained column.`}</p>\n    <p>{`The following example shows the format of an internal constraint.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<constraint xsi:type=\"primary\" referenceId=\"PRIMARY\">\n    <column name=\"entity_id\"/>\n</constraint>\n`}</code></pre>\n    <p>{`The `}<inlineCode parentName=\"p\">{`foreign`}</inlineCode>{` constraint is similar to foreign keys in SQL. This type of constraint connects two tables with each other. The following attributes define a foreign constraint:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Attribute`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`table`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The name of the current table`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`column`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`A column in the current table that refers to a specific column in another table`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`referenceTable`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The table being referenced`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`referenceColumn`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`A column in the `}<inlineCode parentName=\"td\">{`referenceTable`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`onDelete`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Foreign key trigger. The value must be `}<inlineCode parentName=\"td\">{`CASCADE`}</inlineCode>{`, `}<inlineCode parentName=\"td\">{`SET NULL`}</inlineCode>{`, or `}<inlineCode parentName=\"td\">{`NO ACTION`}</inlineCode></td>\n        </tr>\n      </tbody>\n    </table>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`To keep entity identifiers as immutable values, the declarative schema does not support `}<inlineCode parentName=\"p\">{`ON UPDATE`}</inlineCode>{` action for `}<inlineCode parentName=\"p\">{`constraint`}</inlineCode>{`.`}</p>\n    <p>{`Example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<constraint xsi:type=\"foreign\" referenceId=\"COMPANY_CREDIT_COMPANY_ID_COMPANY_ENTITY_ID\" table=\"company_credit\" column=\"company_id\" referenceTable=\"company\" referenceColumn=\"entity_id\" onDelete=\"CASCADE\"/>\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"index-subnode\"\n    }}><inlineCode parentName=\"h4\">{`index`}</inlineCode>{` subnode`}</h4>\n    <p>{`The `}<inlineCode parentName=\"p\">{`index`}</inlineCode>{` subnode has the same structure as internal constraints but contains different logic. While constraints are used for defining limitations, indexes are used for speeding up DQL operations. The following attributes define an index:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Attribute`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`referenceId`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`A custom identifier that is used only for relation mapping in the scope of `}<inlineCode parentName=\"td\">{`db_schema.xml`}</inlineCode>{` files. The real entity in the database has a system-generated name. The most convenient way to set the value of this attribute is to use the value that is written in the module's `}<inlineCode parentName=\"td\">{`db_schema_whitelist.json`}</inlineCode>{`  file when you `}<a parentName=\"td\" {...{\n              \"href\": \"migration-scripts.md#create-a-schema-whitelist\"\n            }}>{`run the `}<inlineCode parentName=\"a\">{`generate-whitelist`}</inlineCode>{` command`}</a>{`.`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`indexType`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The value must be `}<inlineCode parentName=\"td\">{`btree`}</inlineCode>{`, `}<inlineCode parentName=\"td\">{`fulltext`}</inlineCode>{`, or `}<inlineCode parentName=\"td\">{`hash`}</inlineCode></td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`Example:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<index referenceId=\"NEWSLETTER_SUBSCRIBER_CUSTOMER_ID\" indexType=\"btree\">\n    <column name=\"customer_id\"/>\n</index>\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"perform-common-database-operations\"\n    }}>{`Perform common database operations`}</h2>\n    <p>{`This section shows how to perform common database operations using declarative schema. The screen captures use `}<inlineCode parentName=\"p\">{`git diff`}</inlineCode>{` to illustrate how to perform these tasks.`}</p>\n    <h3 {...{\n      \"id\": \"create-a-table\"\n    }}>{`Create a table`}</h3>\n    <p>{`The following example creates the `}<inlineCode parentName=\"p\">{`declarative_table`}</inlineCode>{` table with four columns. The `}<inlineCode parentName=\"p\">{`id_column`}</inlineCode>{` column is the primary key.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-diff\"\n      }}>{`<schema xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n                 xsi:noNamespaceSchemaLocation=\"urn:magento:framework:Setup/Declaration/Schema/etc/schema.xsd\">\n+    <table name=\"declarative_table\">\n+        <column xsi:type=\"int\" name=\"id_column\" unsigned=\"true\" nullable=\"false\" comment=\"Entity Id\"/>\n+        <column xsi:type=\"int\" name=\"severity\" unsigned=\"true\" nullable=\"false\" comment=\"Severity code\"/>\n+        <column xsi:type=\"varchar\" name=\"title\" nullable=\"false\" length=\"255\" comment=\"Title\"/>\n+        <column xsi:type=\"timestamp\" name=\"time_occurred\" comment=\"Time of event\"/>\n+        <constraint xsi:type=\"primary\" referenceId=\"PRIMARY\">\n+            <column name=\"id_column\"/>\n+        </constraint>\n+    </table>\n</schema>\n`}</code></pre>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`When creating a new table, remember to `}<a parentName=\"p\" {...{\n        \"href\": \"migration-scripts.md#create-a-schema-whitelist\"\n      }}>{`generate`}</a>{` the `}<inlineCode parentName=\"p\">{`db_schema_whitelist.json`}</inlineCode>{` file.`}</p>\n    <h3 {...{\n      \"id\": \"drop-a-table\"\n    }}>{`Drop a table`}</h3>\n    <p>{`In the following example, the `}<inlineCode parentName=\"p\">{`declarative_table`}</inlineCode>{` table was completely removed from the `}<inlineCode parentName=\"p\">{`db_schema.xml`}</inlineCode>{` file.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-diff\"\n      }}>{`<schema xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n                 xsi:noNamespaceSchemaLocation=\"urn:magento:framework:Setup/Declaration/Schema/etc/schema.xsd\">\n-    <table name=\"declarative_table\">\n-        <column xsi:type=\"int\" name=\"id_column\" unsigned=\"true\" nullable=\"false\" comment=\"Entity Id\"/>\n-        <column xsi:type=\"int\" name=\"severity\" unsigned=\"true\" nullable=\"false\" comment=\"Severity code\"/>\n-        <column xsi:type=\"varchar\" name=\"title\" nullable=\"false\" length=\"255\" comment=\"Title\"/>\n-        <column xsi:type=\"timestamp\" name=\"time_occurred\" comment=\"Time of event\"/>\n-        <constraint xsi:type=\"primary\" referenceId=\"PRIMARY\">\n-            <column name=\"id_column\"/>\n-        </constraint>\n-    </table>\n</schema>\n`}</code></pre>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`When dropping a table, do not remove it from the `}<inlineCode parentName=\"p\">{`db_schema_whitelist.json`}</inlineCode>{` file, otherwise it will not be dropped.`}</p>\n    <h3 {...{\n      \"id\": \"rename-a-table\"\n    }}>{`Rename a table`}</h3>\n    <p>{`Table renaming is supported. The declarative schema will create a new table with the new name and drop the table with the old name.\nRenaming a table via `}<inlineCode parentName=\"p\">{`RENAME TABLE`}</inlineCode>{` is `}<em parentName=\"p\">{`NOT`}</em>{` supported.\nTo migrate data from another table, specify the `}<inlineCode parentName=\"p\">{`onCreate`}</inlineCode>{` attribute on the `}<inlineCode parentName=\"p\">{`table`}</inlineCode>{` declaration, and add specify the source table name:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`onCreate=\"migrateDataFromAnotherTable(catalog_category_entity)\"\n`}</code></pre>\n    <p>{`Please note that migrating data from another table and renaming columns at the same time is not supported.`}</p>\n    <p>{`This declarative process of renaming a table is not fast. If you need to migrate lots of data quickly you can create a CSV table dump using the `}<inlineCode parentName=\"p\">{`--safe-mode=1`}</inlineCode>{` and add the data manually by using data/recurring patches.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-diff\"\n      }}>{`<schema xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n                 xsi:noNamespaceSchemaLocation=\"urn:magento:framework:Setup/Declaration/Schema/etc/schema.xsd\">\n+    <table name=\"new_declarative_table\" onCreate=\"migrateDataFromAnotherTable(declarative_table)\">\n-    <table name=\"declarative_table\">\n        <column xsi:type=\"int\" name=\"id_column\" unsigned=\"true\" nullable=\"false\" comment=\"Entity Id\"/>\n        <column xsi:type=\"int\" name=\"severity\" unsigned=\"true\" nullable=\"false\" comment=\"Severity code\"/>\n        <column xsi:type=\"varchar\" name=\"title\" nullable=\"false\" length=\"255\" comment=\"Title\"/>\n        <column xsi:type=\"timestamp\" name=\"time_occurred\" comment=\"Time of event\"/>\n        <constraint xsi:type=\"primary\" referenceId=\"PRIMARY\">\n            <column name=\"id_column\"/>\n        </constraint>\n    </table>\n</schema>\n`}</code></pre>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`When renaming a table, remember to regenerate the `}<inlineCode parentName=\"p\">{`db_schema_whitelist.json`}</inlineCode>{` file so it contains the new name in addition to the old one.`}</p>\n    <h3 {...{\n      \"id\": \"add-a-column-to-table\"\n    }}>{`Add a column to table`}</h3>\n    <p>{`The following example adds the `}<inlineCode parentName=\"p\">{`date_closed`}</inlineCode>{` column.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-diff\"\n      }}>{`<schema xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n                 xsi:noNamespaceSchemaLocation=\"urn:magento:framework:Setup/Declaration/Schema/etc/schema.xsd\">\n    <table name=\"declarative_table\">\n        <column xsi:type=\"int\" name=\"id_column\" unsigned=\"true\" nullable=\"false\" comment=\"Entity Id\"/>\n        <column xsi:type=\"int\" name=\"severity\" unsigned=\"true\" nullable=\"false\" comment=\"Severity code\"/>\n        <column xsi:type=\"varchar\" name=\"title\" nullable=\"false\" length=\"255\" comment=\"Title\"/>\n        <column xsi:type=\"timestamp\" name=\"time_occurred\" comment=\"Time of event\"/>\n+       <column xsi:type=\"timestamp\" name=\"date_closed\" comment=\"Time of event\"/>\n        <constraint xsi:type=\"primary\" referenceId=\"PRIMARY\">\n            <column name=\"id_column\"/>\n        </constraint>\n    </table>\n</schema>\n`}</code></pre>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`When adding a new column into table, remember to `}<a parentName=\"p\" {...{\n        \"href\": \"migration-scripts.md#create-a-schema-whitelist\"\n      }}>{`generate`}</a>{` the `}<inlineCode parentName=\"p\">{`db_schema_whitelist.json`}</inlineCode>{` file.`}</p>\n    <h3 {...{\n      \"id\": \"drop-a-column-from-a-table\"\n    }}>{`Drop a column from a table`}</h3>\n    <p>{`The following example removes the  `}<inlineCode parentName=\"p\">{`date_closed`}</inlineCode>{` column by deleting its `}<inlineCode parentName=\"p\">{`column`}</inlineCode>{` node. To drop a column declared in another module, redeclare it with the `}<inlineCode parentName=\"p\">{`disabled`}</inlineCode>{` attribute set to `}<inlineCode parentName=\"p\">{`true`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-diff\"\n      }}>{`<schema xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n                 xsi:noNamespaceSchemaLocation=\"urn:magento:framework:Setup/Declaration/Schema/etc/schema.xsd\">\n    <table name=\"declarative_table\">\n        <column xsi:type=\"int\" name=\"id_column\" unsigned=\"true\" nullable=\"false\" comment=\"Entity Id\"/>\n        <column xsi:type=\"int\" name=\"severity\" unsigned=\"true\" nullable=\"false\" comment=\"Severity code\"/>\n        <column xsi:type=\"varchar\" name=\"title\" nullable=\"false\" length=\"255\" comment=\"Title\"/>\n        <column xsi:type=\"timestamp\" name=\"time_occurred\" comment=\"Time of event\"/>\n-       <column xsi:type=\"timestamp\" name=\"date_closed\" comment=\"Time of event\"/>\n        <constraint xsi:type=\"primary\" referenceId=\"PRIMARY\">\n            <column name=\"id_column\"/>\n        </constraint>\n    </table>\n</schema>\n`}</code></pre>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`It is possible to drop a column only if it exists in the `}<inlineCode parentName=\"p\">{`db_schema_whitelist.json`}</inlineCode>{` file.`}</p>\n    <h3 {...{\n      \"id\": \"change-the-column-type\"\n    }}>{`Change the column type`}</h3>\n    <p>{`The following example changes the `}<inlineCode parentName=\"p\">{`type`}</inlineCode>{` of the `}<inlineCode parentName=\"p\">{`title`}</inlineCode>{` column from `}<inlineCode parentName=\"p\">{`varchar`}</inlineCode>{` to  `}<inlineCode parentName=\"p\">{`text`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-diff\"\n      }}>{`<schema xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n                 xsi:noNamespaceSchemaLocation=\"urn:magento:framework:Setup/Declaration/Schema/etc/schema.xsd\">\n    <table name=\"declarative_table\">\n        <column xsi:type=\"int\" name=\"id_column\" unsigned=\"true\" nullable=\"false\" comment=\"Entity Id\"/>\n        <column xsi:type=\"int\" name=\"severity\" unsigned=\"true\" nullable=\"false\" comment=\"Severity code\"/>\n-       <column xsi:type=\"varchar\" name=\"title\" nullable=\"false\" length=\"255\" comment=\"Title\"/>\n+       <column xsi:type=\"text\" name=\"title\" nullable=\"false\" comment=\"Title\"/>\n        <column xsi:type=\"timestamp\" name=\"time_occurred\" comment=\"Time of event\"/>\n        <constraint xsi:type=\"primary\" referenceId=\"PRIMARY\">\n            <column name=\"id_column\"/>\n        </constraint>\n    </table>\n</schema>\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"rename-a-column\"\n    }}>{`Rename a column`}</h3>\n    <p>{`To rename a column, delete the original column declaration and create a new one. In the new column declaration, use the `}<inlineCode parentName=\"p\">{`onCreate`}</inlineCode>{` attribute to specify which column to migrate data from. Use the following construction to migrate data from the same table.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`onCreate=\"migrateDataFrom(entity_id)\"\n`}</code></pre>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`When renaming a column, remember to regenerate the `}<inlineCode parentName=\"p\">{`db_schema_whitelist.json`}</inlineCode>{` file so it contains the new name in addition to the old one.`}</p>\n    <h3 {...{\n      \"id\": \"add-an-index\"\n    }}>{`Add an index`}</h3>\n    <p>{`The following example adds the `}<inlineCode parentName=\"p\">{`INDEX_SEVERITY`}</inlineCode>{` index to the `}<inlineCode parentName=\"p\">{`declarative_table`}</inlineCode>{` table.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-diff\"\n      }}>{`<schema xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n                 xsi:noNamespaceSchemaLocation=\"urn:magento:framework:Setup/Declaration/Schema/etc/schema.xsd\">\n    <table name=\"declarative_table\">\n        <column xsi:type=\"int\" name=\"id_column\" unsigned=\"true\" nullable=\"false\" comment=\"Entity Id\"/>\n        <column xsi:type=\"int\" name=\"severity\" unsigned=\"true\" nullable=\"false\" comment=\"Severity code\"/>\n        <column xsi:type=\"text\" name=\"title\" nullable=\"false\" length=\"255\" comment=\"Title\"/>\n        <column xsi:type=\"timestamp\" name=\"time_occurred\" comment=\"Time of event\"/>\n        <constraint xsi:type=\"primary\" referenceId=\"PRIMARY\">\n            <column name=\"id_column\"/>\n        </constraint>\n+       <index referenceId=\"INDEX_SEVERITY\" indexType=\"btree\">\n+           <column name=\"severity\"/>\n+       </index>\n    </table>\n</schema>\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"create-a-foreign-key\"\n    }}>{`Create a foreign key`}</h3>\n    <p>{`In the following example, the selected `}<inlineCode parentName=\"p\">{`constraint`}</inlineCode>{` node defines the characteristics of the `}<inlineCode parentName=\"p\">{`FL_ALLOWED_SEVERITIES`}</inlineCode>{` foreign key.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-diff\"\n      }}>{`<schema xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n                 xsi:noNamespaceSchemaLocation=\"urn:magento:framework:Setup/Declaration/Schema/etc/schema.xsd\">\n    <table name=\"declarative_table\">\n        <column xsi:type=\"int\" name=\"id_column\" unsigned=\"true\" nullable=\"false\" comment=\"Entity Id\"/>\n        <column xsi:type=\"int\" name=\"severity\" unsigned=\"true\" nullable=\"false\" comment=\"Severity code\"/>\n        <column xsi:type=\"varchar\" name=\"title\" nullable=\"false\" length=\"255\" comment=\"Title\"/>\n        <column xsi:type=\"timestamp\" name=\"time_occurred\" comment=\"Time of event\"/>\n        <constraint xsi:type=\"primary\" referenceId=\"PRIMARY\">\n            <column name=\"id_column\"/>\n        </constraint>\n+       <constraint xsi:type=\"foreign\" referenceId=\"FL_ALLOWED_SEVERITIES\" table=\"declarative_table\"\n+               column=\"severity\" referenceTable=\"severities\" referenceColumn=\"severity_identifier\"\n+               onDelete=\"CASCADE\"/>\n    </table>\n</schema>\n`}</code></pre>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`Foreign keys can only be added to tables when both tables were created using a declarative schema (`}<inlineCode parentName=\"p\">{`db_schema.xml`}</inlineCode>{`).`}</p>\n    <h3 {...{\n      \"id\": \"drop-a-foreign-key\"\n    }}>{`Drop a foreign key`}</h3>\n    <p>{`The following example removes the  `}<inlineCode parentName=\"p\">{`FL_ALLOWED_SEVERITIES`}</inlineCode>{` foreign key by deleting its `}<inlineCode parentName=\"p\">{`constraint`}</inlineCode>{` node. To drop a constraint declared in another module, redeclare it with the `}<inlineCode parentName=\"p\">{`disabled`}</inlineCode>{` attribute set to `}<inlineCode parentName=\"p\">{`true`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-diff\"\n      }}>{`<schema xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n                 xsi:noNamespaceSchemaLocation=\"urn:magento:framework:Setup/Declaration/Schema/etc/schema.xsd\">\n    <table name=\"declarative_table\">\n        <column xsi:type=\"int\" name=\"id_column\" unsigned=\"true\" nullable=\"false\" comment=\"Entity Id\"/>\n        <column xsi:type=\"int\" name=\"severity\" unsigned=\"true\" nullable=\"false\" comment=\"Severity code\"/>\n        <column xsi:type=\"varchar\" name=\"title\" nullable=\"false\" length=\"255\" comment=\"Title\"/>\n        <column xsi:type=\"timestamp\" name=\"time_occurred\" comment=\"Time of event\"/>\n        <constraint xsi:type=\"primary\" referenceId=\"PRIMARY\">\n            <column name=\"id_column\"/>\n        </constraint>\n-       <constraint xsi:type=\"foreign\" referenceId=\"FL_ALLOWED_SEVERITIES\" table=\"declarative_table\"\n-               column=\"severity\" referenceTable=\"severities\" referenceColumn=\"severity_identifier\"\n-               onDelete=\"CASCADE\"/>\n    </table>\n</schema>\n`}</code></pre>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`It is possible to drop a foreign key only if it exists in the `}<inlineCode parentName=\"p\">{`db_schema_whitelist.json`}</inlineCode>{` file.`}</p>\n    <h3 {...{\n      \"id\": \"recreate-a-foreign-key\"\n    }}>{`Recreate a foreign key`}</h3>\n    <p>{`In this example, Module A defines a new table with primary key `}<inlineCode parentName=\"p\">{`id_column`}</inlineCode>{`. Module B declares its own schema, in which it creates a new column (`}<inlineCode parentName=\"p\">{`new_id_column`}</inlineCode>{`) and changes the primary index to this column.\nModule B disables the original primary key and sets a new primary key with a `}<inlineCode parentName=\"p\">{`referenceId`}</inlineCode>{` value that is different from PRIMARY. Although this value is different, the real name of the primary key in the database remains PRIMARY.`}</p>\n    <p><strong parentName=\"p\">{`Module A declaration:`}</strong></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<schema xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n                 xsi:noNamespaceSchemaLocation=\"urn:magento:framework:Setup/Declaration/Schema/etc/schema.xsd\">\n    <table name=\"declarative_table\">\n        <column xsi:type=\"int\" name=\"id_column\" unsigned=\"true\" nullable=\"false\" comment=\"Entity Id\"/>\n        <constraint xsi:type=\"primary\" referenceId=\"PRIMARY\">\n            <column name=\"id_column\"/>\n        </constraint>\n    </table>\n</schema>\n`}</code></pre>\n    <p><strong parentName=\"p\">{`Module B declaration:`}</strong></p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<schema xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n        xsi:noNamespaceSchemaLocation=\"urn:magento:framework:Setup/Declaration/Schema/etc/schema.xsd\">\n    <table name=\"declarative_table\">\n        <column xsi:type=\"int\" name=\"new_id_column\" unsigned=\"true\" nullable=\"false\"\n                comment=\"New Entity Id\"/>\n        <constraint xsi:type=\"primary\" referenceId=\"PRIMARY\" disabled=\"true\"/>\n        <constraint xsi:type=\"primary\" referenceId=\"NEW_PRIMARY\">\n            <column name=\"new_id_column\"/>\n        </constraint>\n    </table>\n</schema>\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"other-tasks\"\n    }}>{`Other tasks`}</h2>\n    <h3 {...{\n      \"id\": \"disable-a-module\"\n    }}>{`Disable a module`}</h3>\n    <p>{`When a module is disabled in `}<inlineCode parentName=\"p\">{`app/etc/config.php`}</inlineCode>{`, its database schema configuration is no longer read on upgrade or install. As a result, subsequent system upgrades rebuild the database schema without the module's tables, columns, or other elements.\nPlease note that the `}<inlineCode parentName=\"p\">{`db_schema_whitelist.json`}</inlineCode>{` file of disabled modules is still read during upgrades of installs, so the declarative schema system can perform the necessary operations.\nPractically, this means that if you disable a module which uses declarative schema and run `}<inlineCode parentName=\"p\">{`bin/magento setup:upgrade`}</inlineCode>{`, `}<em parentName=\"p\">{`its database tables will be dropped`}</em>{` (see more details and discussion at  `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/magento/magento2/issues/24926\"\n      }}>{`https://github.com/magento/magento2/issues/24926`}</a>{`). Please consider using `}<inlineCode parentName=\"p\">{`setup:upgrade --safe-mode=1`}</inlineCode>{` in order to create a database backup after disabling a module and then eventually `}<inlineCode parentName=\"p\">{`setup:upgrade --data-restore=1`}</inlineCode>{` if you enable the module back and wish to restore from that backup.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["name","_frontmatter","InlineAlert","props","console","warn","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","variant","slots","className","isMDXComponent"],"sourceRoot":""}