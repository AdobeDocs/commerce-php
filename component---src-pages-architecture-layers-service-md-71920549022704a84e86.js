"use strict";(self.webpackChunkcommerce_php=self.webpackChunkcommerce_php||[]).push([[80626],{32860:function(e,a,t){t.r(a),t.d(a,{_frontmatter:function(){return m},default:function(){return p}});var n=t(87462),r=t(63366),i=(t(15007),t(64983)),o=t(91515),s=["components"],m={},l={_frontmatter:m},c=o.Z;function p(e){var a=e.components,t=(0,r.Z)(e,s);return(0,i.mdx)(c,(0,n.Z)({},l,t,{components:a,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"service-layer"},"Service layer"),(0,i.mdx)("p",null,"The service layer provides a bridge between the presentation layer and the domain layer and resource-specific data.\nThis is implemented using ",(0,i.mdx)("em",{parentName:"p"},"service contracts"),", which are defined using ",(0,i.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/php"},"PHP")," interfaces."),(0,i.mdx)("p",null,"In general, the service layer:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},"Resides below the presentation layer and above the domain layer.")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},"Contains service contracts, which define how the implementation will behave.")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},"Provides an easy way to access the REST/SOAP ",(0,i.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/api"},"API")," framework code (which also resides above the service contracts). You can bind service contracts to web service APIs in configuration files --- no coding required.")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},"Provides a stable API for other modules to call into."))),(0,i.mdx)("h2",{id:"who-accesses-the-service-layer"},"Who accesses the service layer?"),(0,i.mdx)("p",null,"All calls from web service interfaces, or users working with your ",(0,i.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/storefront"},"storefront")," (that is, controller-initiated requests), are typically routed through the service layer.\nWe strongly encourage the use of service contracts to call business logic."),(0,i.mdx)("p",null,"External applications can make requests for business logic with simple SOAP and REST calls.\nWith some simple ",(0,i.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/xml"},"XML")," or JSON, you can expose the service layer's PHP API and make it accessible to REST or SOAP web services.\nOnce implemented, a web service can make a single API call and return an information-rich data structure."),(0,i.mdx)("p",null,(0,i.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/service-contract"},"Service contract")," clients include:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},"Controllers (initiated by actions of users of the storefront)")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},"Web services (SOAP and REST API calls)")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},"Other modules through service contracts"))),(0,i.mdx)("h2",{id:"service-contract-anatomy"},"Service contract anatomy"),(0,i.mdx)("p",null,"The service contract of a ",(0,i.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/module"},"module")," is defined by the set of interfaces in the module's ",(0,i.mdx)("inlineCode",{parentName:"p"},"/Api")," directory."),(0,i.mdx)("p",null,"This directory contains:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},"Service interfaces in the ",(0,i.mdx)("inlineCode",{parentName:"p"},"/Api")," ",(0,i.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/namespace"},"namespace")," of the module (",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/app/code/Magento/Catalog/Api"},"Catalog API"),").")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},"Data (or ",(0,i.mdx)("em",{parentName:"p"},"entity"),") interfaces in the ",(0,i.mdx)("inlineCode",{parentName:"p"},"Api/Data")," directory (",(0,i.mdx)("a",{parentName:"p",href:"https://github.com/magento/magento2/blob/2.4/app/code/Magento/Catalog/Api/Data"},"Catalog API/Data"),").\nData entities* are data structures passed to and returned from service interfaces."),(0,i.mdx)("p",{parentName:"li"},"Files in the data directory contain ",(0,i.mdx)("inlineCode",{parentName:"p"},"get()")," and ",(0,i.mdx)("inlineCode",{parentName:"p"},"set()")," methods for entries in the entity table and extension attributes."))),(0,i.mdx)("p",null,"Typically, service contracts provide three distinct types of interfaces:"),(0,i.mdx)("ul",null,(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},"Repository interfaces")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},"Management interfaces")),(0,i.mdx)("li",{parentName:"ul"},(0,i.mdx)("p",{parentName:"li"},(0,i.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/metadata"},"Metadata")," interfaces"))),(0,i.mdx)("p",null,"However, there is no requirement that service contracts conform to all three patterns."),(0,i.mdx)("h2",{id:"advantages-of-service-contracts"},"Advantages of service contracts"),(0,i.mdx)("p",null,"Service contracts allow you to add a new customer ",(0,i.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/extension"},"extension")," that adds or changes business logic-level resource models without breaking the system."),(0,i.mdx)("p",null,"This is done using the ",(0,i.mdx)("em",{parentName:"p"},"<","preference",">")," element in a custom module's ",(0,i.mdx)("a",{parentName:"p",href:"https://glossary.magento.com/dependency-injection"},"dependency injection")," configuration file (",(0,i.mdx)("inlineCode",{parentName:"p"},"di.xml"),") file."),(0,i.mdx)("p",null,"The ",(0,i.mdx)("inlineCode",{parentName:"p"},"di.xml")," file specifies which PHP class to use for the interface ",(0,i.mdx)("inlineCode",{parentName:"p"},"Magento\\Customer\\Api\\CustomerRepositoryInterface"),"."),(0,i.mdx)("p",null,"Another module can change this interface file by specifying a different class name.\nHowever, if the client code uses the interface definition only, no class change is necessary."))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-architecture-layers-service-md-71920549022704a84e86.js.map